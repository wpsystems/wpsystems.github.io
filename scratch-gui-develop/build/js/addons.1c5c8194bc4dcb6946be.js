(window.webpackJsonpGUI=window.webpackJsonpGUI||[]).push([[6],{1906:function(e,t,n){"use strict";n.r(t),n.d(t,"paused",(function(){return s})),n.d(t,"onPauseChanged",(function(){return i})),n.d(t,"setPaused",(function(){return c}));const o=window.vm;let s=!1,a=new WeakMap,r=new EventTarget;const i=e=>{r.addEventListener("change",()=>e(s))},c=e=>{if(s=e,s){o.runtime.audioEngine.audioContext.suspend(),o.runtime.ioDevices.clock._paused||o.runtime.ioDevices.clock.pause();for(const e of o.runtime.threads)if(!e.updateMonitor&&!a.has(e)){const t={pauseTime:o.runtime.currentMSecs,status:e.status};a.set(e,t),Object.defineProperty(e,"status",{get:()=>1,set(e){t.status=e},configurable:!0,enumerable:!0})}o.runtime.emit("PROJECT_RUN_STOP")}else{o.runtime.audioEngine.audioContext.resume(),o.runtime.ioDevices.clock.resume();const e=Date.now();for(const t of o.runtime.threads){const n=a.get(t);if(n){const o=t.peekStackFrame();if(o&&o.executionContext&&o.executionContext.timer){const t=e-n.pauseTime;o.executionContext.timer.startTime+=t}if(t.timer){const o=e-n.pauseTime;t.timer.startTime+=o}Object.defineProperty(t,"status",{value:n.status,configurable:!0,enumerable:!0,writable:!0})}}a=new WeakMap}r.dispatchEvent(new CustomEvent("change"))},l=o.runtime.greenFlag;o.runtime.greenFlag=function(){return c(!1),l.call(this)};const d=o.runtime.startHats;o.runtime.startHats=function(...e){if(s){const t=e[0];if("event_whenbroadcastreceived"!==t&&"control_start_as_clone"!==t)return[]}return d.apply(this,e)};const u=o.runtime._getMonitorThreadCount;o.runtime._getMonitorThreadCount=function(e){let t=u.call(this,e);if(s)for(const n of e)a.has(n)&&t++;return t}},1907:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));class o{constructor(e,t){this.targetId=e.id,this.id=t.id}}},1908:function(e,t,n){"use strict";n.r(t);var o=n(1999),s=n.n(o),a=n(1909),r=n(1910),i=n(1911);const c=e=>{if("/assets/sv-gr.png"===e)return s.a;throw new Error("Unknown asset: ".concat(e))};t.default=async({addon:e,console:t,msg:n})=>{let o;const s=new r.a(250),l=t=>{let n;const o=e.tab.redux.state;if(o.scratchPaint.modals.fillColor)n="fill";else{if(!o.scratchPaint.modals.strokeColor)return;n="stroke"}const s=["primary","secondary"][o.scratchPaint.fillMode.colorIndex],a=o.scratchPaint.color["".concat(n,"Color")][s];if(null!==a&&"scratch-paint/style-path/mixed"!==a)return Object(i.a)(a).toHex8()},d=(t,n)=>{if(t=Object(a.b)(t),!e.tab.redux.state||!e.tab.redux.state.scratchPaint)return;const o=({detail:n})=>{"scratch-paint/eye-dropper/ACTIVATE_COLOR_PICKER"===n.action.type&&(e.tab.redux.removeEventListener("statechanged",o),setTimeout(()=>{const n=e.tab.redux.state.scratchPaint.color.eyeDropper.previousTool;n&&n.activate(),e.tab.redux.state.scratchPaint.color.eyeDropper.callback(t),e.tab.redux.dispatch({type:"scratch-paint/eye-dropper/DEACTIVATE_COLOR_PICKER"})},50))};e.tab.redux.addEventListener("statechanged",o),n.children[1].children[0].click()},u=e=>{let t=Object(i.a)(e).toHsv();return t.s=1,t.v=1,Object(i.a)(t).toHex()};for(;;){const t=await e.tab.waitForElement('div[class*="color-picker_swatch-row"]',{markAsSeen:!0,reduxCondition:e=>1===e.scratchGui.editorTab.activeTabIndex&&!e.scratchGui.mode.isPlayerOnly});function p(){s.limit(()=>{let e=l(),t=Object(i.a)(e).toHsv();g(t.s,t.v),r.style.background="#"+u(l())})}if(s.abort(!1),e.tab.redux.initialize(),e.tab.redux.addEventListener("statechanged",e=>"scratch-paint/fill-style/CHANGE_FILL_COLOR"===e.detail.action.type||"scratch-paint/fill-style/CHANGE_FILL_COLOR_2"===e.detail.action.type||"scratch-paint/stroke-style/CHANGE_STROKE_COLOR"===e.detail.action.type||"scratch-paint/stroke-style/CHANGE_STROKE_COLOR_2"===e.detail.action.type?p():0),e.tab.redux&&"function"==typeof o&&(e.tab.redux.removeEventListener("statechanged",o),o=null),"editor"!==e.tab.editorMode)continue;let a=l();const r=document.createElement("div");r.className="sa-2dcolor-picker",r.style.background="#"+u(a||"ff0000");const f=Object.assign(document.createElement("img"),{className:"sa-2dcolor-picker-image",src:c("/assets/sv-gr.png"),draggable:!1}),b=Object.assign(document.createElement("div"),{className:e.tab.scratchClass("slider_handle")});b.style.pointerEvents="none";const v=document.createElement("div");v.className=e.tab.scratchClass("color-picker_row-header",{others:"sa-2dcolor-label"});const y=document.createElement("span");y.className=e.tab.scratchClass("color-picker_label-name",{others:"sa-2dcolor-label-name"}),y.innerText=n("shade");const w=document.createElement("span");w.className=e.tab.scratchClass("color-picker_label-readout",{others:"sa-2dcolor-label-val"}),v.appendChild(y),v.appendChild(w);let k=-1,x={x:0,y:0};window.addEventListener("keydown",e=>k=e.keyCode),window.addEventListener("keyup",()=>k=-1);let C=0,E=null,_=function(e){return h(e,k,x),!1},L=function(e){m(e,k,x)};function h(t,n,o){let s=Math.min(Math.max(t.clientX-r.getBoundingClientRect().x,0),150),a=Math.min(Math.max(t.clientY-r.getBoundingClientRect().y,0),150);if(16===n&&(Math.abs(s-o.x)>Math.abs(a-o.y)?a=o.y:s=o.x),b.style.left=s-8+"px",b.style.top=a-8+"px",w.innerText="".concat(Math.round(s/150*100),", ").concat(100-Math.round(a/150*100)),(!e.tab.redux.state.scratchPaint.fillMode.gradientType||"SOLID"===e.tab.redux.state.scratchPaint.fillMode.gradientType)&&E){let e=Object(i.a)({h:C,s:s/150,v:1-a/150}).toHex();e.startsWith("#")?E.style.background=e:E.style.background="#"+e}}function g(e,t){b.style.left=150*e-8+"px",b.style.top=150*(1-t)-8+"px",w.innerText="".concat(Math.round(100*e),", ").concat(Math.round(100*t))}function m(e,n,o){s.limit(()=>{let s=Math.min(Math.max(e.clientX-r.getBoundingClientRect().x,0),150),a=Math.min(Math.max(e.clientY-r.getBoundingClientRect().y,0),150);16===n&&(Math.abs(s-o.x)>Math.abs(a-o.y)?a=o.y:s=o.x);let c=Object(i.a)(l()).toHsv(),u=s/150,p=1-a/150,h=Object(i.a)({h:c.h,s:u,v:p,a:c.a}).toHex8();d(h,t),g(u,p)}),window.removeEventListener("pointermove",_),window.removeEventListener("pointerup",L)}if(a){let e=Object(i.a)(a).toHsv();g(e.s,e.v)}else g(1,1);r.addEventListener("pointerdown",t=>{let n;t.preventDefault(),x={x:parseFloat(b.style.left)+8,y:parseFloat(b.style.top)+8};const o=e.tab.redux.state;n=o.scratchPaint.modals.fillColor?"fill":o.scratchPaint.modals.strokeColor?"stroke":"wh",E=null,"fill"===n?E=document.getElementsByClassName(e.tab.scratchClass("color-button_color-button-swatch"))[0]:"stroke"===n&&(E=document.getElementsByClassName(e.tab.scratchClass("color-button_color-button-swatch"))[1]),E&&(C=Object(i.a)(E.style.background).toHsv().h),h(t),window.addEventListener("pointermove",_),window.addEventListener("pointerup",L)}),o=({detail:e})=>{"scratch-paint/color-index/CHANGE_COLOR_INDEX"===e.action.type&&setTimeout(()=>{p()},100)},e.tab.redux.addEventListener("statechanged",o),r.appendChild(f),r.appendChild(b);const[T,D,M]=[...t.parentElement.querySelectorAll('[class^="color-picker_row-header"]')].map(e=>e.parentElement);D.style.display="none",M.style.display="none",T.insertAdjacentElement("afterend",r),T.insertAdjacentElement("afterend",v)}}},1909:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));const o=()=>/^#?[0-9a-fA-F]{3,8}$/,s=e=>{let t=String(e);if(!o().test(t))return"#000000";if(t.startsWith("#")||(t="#".concat(t)),4===t.length){const[e,n,o,s]=t;t="#".concat(n).concat(n).concat(o).concat(o).concat(s).concat(s)}return t.toLowerCase()}},1910:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));class o{constructor(e){this.timeout=null,this.callback=null,this.wait=e}abort(e=!0){this.timeout&&(clearTimeout(this.timeout),e&&this.callback(),this.timeout=this.callback=null)}limit(e){this.abort(!1),this.callback=e,this.timeout=setTimeout(()=>{this.timeout=this.callback=null,e()},this.wait)}}},1911:function(e,t,n){"use strict";const o=function(e){var t=/^\s+/,n=/\s+$/,o=0,s=e.round,a=e.min,r=e.max,i=e.random;function c(i,l){if(l=l||{},(i=i||"")instanceof c)return i;if(!(this instanceof c))return new c(i,l);var d=function(o){var s={r:0,g:0,b:0},i=1,c=null,l=null,d=null,u=!1,p=!1;"string"==typeof o&&(o=function(e){e=e.replace(t,"").replace(n,"").toLowerCase();var o,s=!1;if(L[e])e=L[e],s=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(o=F.rgb.exec(e))return{r:o[1],g:o[2],b:o[3]};if(o=F.rgba.exec(e))return{r:o[1],g:o[2],b:o[3],a:o[4]};if(o=F.hsl.exec(e))return{h:o[1],s:o[2],l:o[3]};if(o=F.hsla.exec(e))return{h:o[1],s:o[2],l:o[3],a:o[4]};if(o=F.hsv.exec(e))return{h:o[1],s:o[2],v:o[3]};if(o=F.hsva.exec(e))return{h:o[1],s:o[2],v:o[3],a:o[4]};if(o=F.hex8.exec(e))return{r:I(o[1]),g:I(o[2]),b:I(o[3]),a:j(o[4]),format:s?"name":"hex8"};if(o=F.hex6.exec(e))return{r:I(o[1]),g:I(o[2]),b:I(o[3]),format:s?"name":"hex"};if(o=F.hex4.exec(e))return{r:I(o[1]+""+o[1]),g:I(o[2]+""+o[2]),b:I(o[3]+""+o[3]),a:j(o[4]+""+o[4]),format:s?"name":"hex8"};if(o=F.hex3.exec(e))return{r:I(o[1]+""+o[1]),g:I(o[2]+""+o[2]),b:I(o[3]+""+o[3]),format:s?"name":"hex"};return!1}(o));"object"==typeof o&&(z(o.r)&&z(o.g)&&z(o.b)?(h=o.r,g=o.g,m=o.b,s={r:255*M(h,255),g:255*M(g,255),b:255*M(m,255)},u=!0,p="%"===String(o.r).substr(-1)?"prgb":"rgb"):z(o.h)&&z(o.s)&&z(o.v)?(c=N(o.s),l=N(o.v),s=function(t,n,o){t=6*M(t,360),n=M(n,100),o=M(o,100);var s=e.floor(t),a=t-s,r=o*(1-n),i=o*(1-a*n),c=o*(1-(1-a)*n),l=s%6;return{r:255*[o,i,r,r,c,o][l],g:255*[c,o,o,i,r,r][l],b:255*[r,r,c,o,o,i][l]}}(o.h,c,l),u=!0,p="hsv"):z(o.h)&&z(o.s)&&z(o.l)&&(c=N(o.s),d=N(o.l),s=function(e,t,n){var o,s,a;function r(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=M(e,360),t=M(t,100),n=M(n,100),0===t)o=s=a=n;else{var i=n<.5?n*(1+t):n+t-n*t,c=2*n-i;o=r(c,i,e+1/3),s=r(c,i,e),a=r(c,i,e-1/3)}return{r:255*o,g:255*s,b:255*a}}(o.h,c,d),u=!0,p="hsl"),o.hasOwnProperty("a")&&(i=o.a));var h,g,m;return i=D(i),{ok:u,format:o.format||p,r:a(255,r(s.r,0)),g:a(255,r(s.g,0)),b:a(255,r(s.b,0)),a:i}}(i);this._originalInput=i,this._r=d.r,this._g=d.g,this._b=d.b,this._a=d.a,this._roundA=s(100*this._a)/100,this._format=l.format||d.format,this._gradientType=l.gradientType,this._r<1&&(this._r=s(this._r)),this._g<1&&(this._g=s(this._g)),this._b<1&&(this._b=s(this._b)),this._ok=d.ok,this._tc_id=o++}function l(e,t,n){e=M(e,255),t=M(t,255),n=M(n,255);var o,s,i=r(e,t,n),c=a(e,t,n),l=(i+c)/2;if(i==c)o=s=0;else{var d=i-c;switch(s=l>.5?d/(2-i-c):d/(i+c),i){case e:o=(t-n)/d+(t<n?6:0);break;case t:o=(n-e)/d+2;break;case n:o=(e-t)/d+4}o/=6}return{h:o,s:s,l:l}}function d(e,t,n){e=M(e,255),t=M(t,255),n=M(n,255);var o,s,i=r(e,t,n),c=a(e,t,n),l=i,d=i-c;if(s=0===i?0:d/i,i==c)o=0;else{switch(i){case e:o=(t-n)/d+(t<n?6:0);break;case t:o=(n-e)/d+2;break;case n:o=(e-t)/d+4}o/=6}return{h:o,s:s,v:l}}function u(e,t,n,o){var a=[A(s(e).toString(16)),A(s(t).toString(16)),A(s(n).toString(16))];return o&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function p(e,t,n,o){return[A(O(o)),A(s(e).toString(16)),A(s(t).toString(16)),A(s(n).toString(16))].join("")}function h(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.s-=t/100,n.s=S(n.s),c(n)}function g(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.s+=t/100,n.s=S(n.s),c(n)}function m(e){return c(e).desaturate(100)}function f(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.l+=t/100,n.l=S(n.l),c(n)}function b(e,t){t=0===t?0:t||10;var n=c(e).toRgb();return n.r=r(0,a(255,n.r-s(-t/100*255))),n.g=r(0,a(255,n.g-s(-t/100*255))),n.b=r(0,a(255,n.b-s(-t/100*255))),c(n)}function v(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.l-=t/100,n.l=S(n.l),c(n)}function y(e,t){var n=c(e).toHsl(),o=(n.h+t)%360;return n.h=o<0?360+o:o,c(n)}function w(e){var t=c(e).toHsl();return t.h=(t.h+180)%360,c(t)}function k(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+120)%360,s:t.s,l:t.l}),c({h:(n+240)%360,s:t.s,l:t.l})]}function x(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+90)%360,s:t.s,l:t.l}),c({h:(n+180)%360,s:t.s,l:t.l}),c({h:(n+270)%360,s:t.s,l:t.l})]}function C(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+72)%360,s:t.s,l:t.l}),c({h:(n+216)%360,s:t.s,l:t.l})]}function E(e,t,n){t=t||6,n=n||30;var o=c(e).toHsl(),s=360/n,a=[c(e)];for(o.h=(o.h-(s*t>>1)+720)%360;--t;)o.h=(o.h+s)%360,a.push(c(o));return a}function _(e,t){t=t||6;for(var n=c(e).toHsv(),o=n.h,s=n.s,a=n.v,r=[],i=1/t;t--;)r.push(c({h:o,s:s,v:a})),a=(a+i)%1;return r}c.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var t,n,o,s=this.toRgb();return t=s.r/255,n=s.g/255,o=s.b/255,.2126*(t<=.03928?t/12.92:e.pow((t+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:e.pow((n+.055)/1.055,2.4))+.0722*(o<=.03928?o/12.92:e.pow((o+.055)/1.055,2.4))},setAlpha:function(e){return this._a=D(e),this._roundA=s(100*this._a)/100,this},toHsv:function(){var e=d(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=d(this._r,this._g,this._b),t=s(360*e.h),n=s(100*e.s),o=s(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+o+"%)":"hsva("+t+", "+n+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var e=l(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=l(this._r,this._g,this._b),t=s(360*e.h),n=s(100*e.s),o=s(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+o+"%)":"hsla("+t+", "+n+"%, "+o+"%, "+this._roundA+")"},toHex:function(e){return u(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,o,a){var r=[A(s(e).toString(16)),A(s(t).toString(16)),A(s(n).toString(16)),A(O(o))];if(a&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)&&r[3].charAt(0)==r[3].charAt(1))return r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0);return r.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:s(this._r),g:s(this._g),b:s(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+s(this._r)+", "+s(this._g)+", "+s(this._b)+")":"rgba("+s(this._r)+", "+s(this._g)+", "+s(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:s(100*M(this._r,255))+"%",g:s(100*M(this._g,255))+"%",b:s(100*M(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+s(100*M(this._r,255))+"%, "+s(100*M(this._g,255))+"%, "+s(100*M(this._b,255))+"%)":"rgba("+s(100*M(this._r,255))+"%, "+s(100*M(this._g,255))+"%, "+s(100*M(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(T[u(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+p(this._r,this._g,this._b,this._a),n=t,o=this._gradientType?"GradientType = 1, ":"";if(e){var s=c(e);n="#"+p(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,o=this._a<1&&this._a>=0;return t||!o||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return c(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(f,arguments)},brighten:function(){return this._applyModification(b,arguments)},darken:function(){return this._applyModification(v,arguments)},desaturate:function(){return this._applyModification(h,arguments)},saturate:function(){return this._applyModification(g,arguments)},greyscale:function(){return this._applyModification(m,arguments)},spin:function(){return this._applyModification(y,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(E,arguments)},complement:function(){return this._applyCombination(w,arguments)},monochromatic:function(){return this._applyCombination(_,arguments)},splitcomplement:function(){return this._applyCombination(C,arguments)},triad:function(){return this._applyCombination(k,arguments)},tetrad:function(){return this._applyCombination(x,arguments)}},c.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]="a"===o?e[o]:N(e[o]));e=n}return c(e,t)},c.equals=function(e,t){return!(!e||!t)&&c(e).toRgbString()==c(t).toRgbString()},c.random=function(){return c.fromRatio({r:i(),g:i(),b:i()})},c.mix=function(e,t,n){n=0===n?0:n||50;var o=c(e).toRgb(),s=c(t).toRgb(),a=n/100;return c({r:(s.r-o.r)*a+o.r,g:(s.g-o.g)*a+o.g,b:(s.b-o.b)*a+o.b,a:(s.a-o.a)*a+o.a})},c.readability=function(t,n){var o=c(t),s=c(n);return(e.max(o.getLuminance(),s.getLuminance())+.05)/(e.min(o.getLuminance(),s.getLuminance())+.05)},c.isReadable=function(e,t,n){var o,s,a=c.readability(e,t);switch(s=!1,(o=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+o.size){case"AAsmall":case"AAAlarge":s=a>=4.5;break;case"AAlarge":s=a>=3;break;case"AAAsmall":s=a>=7}return s},c.mostReadable=function(e,t,n){var o,s,a,r,i=null,l=0;s=(n=n||{}).includeFallbackColors,a=n.level,r=n.size;for(var d=0;d<t.length;d++)(o=c.readability(e,t[d]))>l&&(l=o,i=c(t[d]));return c.isReadable(e,i,{level:a,size:r})||!s?i:(n.includeFallbackColors=!1,c.mostReadable(e,["#fff","#000"],n))};var L=c.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},T=c.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(L);function D(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function M(t,n){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(t)&&(t="100%");var o=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(t);return t=a(n,r(0,parseFloat(t))),o&&(t=parseInt(t*n,10)/100),e.abs(t-n)<1e-6?1:t%n/parseFloat(n)}function S(e){return a(1,r(0,e))}function I(e){return parseInt(e,16)}function A(e){return 1==e.length?"0"+e:""+e}function N(e){return e<=1&&(e=100*e+"%"),e}function O(t){return e.round(255*parseFloat(t)).toString(16)}function j(e){return I(e)/255}var B,P,R,F=(P="[\\s|\\(]+("+(B="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+B+")[,|\\s]+("+B+")\\s*\\)?",R="[\\s|\\(]+("+B+")[,|\\s]+("+B+")[,|\\s]+("+B+")[,|\\s]+("+B+")\\s*\\)?",{CSS_UNIT:new RegExp(B),rgb:new RegExp("rgb"+P),rgba:new RegExp("rgba"+R),hsl:new RegExp("hsl"+P),hsla:new RegExp("hsla"+R),hsv:new RegExp("hsv"+P),hsva:new RegExp("hsva"+R),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function z(e){return!!F.CSS_UNIT.exec(e)}return c}(Math);t.a=o},1912:function(e,t,n){"use strict";n.r(t);
/**
 * This file is imported from https://github.com/LLK/scratch-blocks/
 * It has been cleaned up and unnecessary functions have been removed.
 * Original license is below.
 *
 * @license
 * Visual Blocks Editor
 *
 * Copyright 2012 Google Inc.
 * https://developers.google.com/blockly/
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const o=function(e,t,n){const o=document.createElement(e);if(void 0!==n){Array.isArray(n)||(n=[n]);for(const e of n)"string"==typeof e?o.appendChild(document.createTextNode(e)):o.appendChild(e)}return o},s=e=>{e.parentNode&&e.parentNode.removeChild(e)},a=function(e){if(e.name&&e.SERIALIZABLE){if(e.referencesVariables())return function(e){null==e.getValue()&&e.initModel();var t=e.getVariable();if(!t)throw Error("Tried to serialize a variable field with no variable.");var n=o("field",0,t.name);return n.setAttribute("name",e.name),n.setAttribute("id",t.getId()),n.setAttribute("variabletype",t.type),n}(e);var t=o("field",0,e.getValue());return t.setAttribute("name",e.name),t}return null},r=function e(t,n){var s=o(t.isShadow()?"shadow":"block");if(s.setAttribute("type",t.type),n||s.setAttribute("id",t.id),t.mutationToDom){var r=t.mutationToDom();r&&(r.hasChildNodes()||r.hasAttributes())&&s.appendChild(r)}if(function(e,t){for(var n,o=0;n=e.inputList[o];o++)for(var s,r=0;s=n.fieldRow[r];r++){var i=a(s);i&&t.appendChild(i)}}(t,s),i(t,s),t.data){var l=o("data",0,t.data);s.appendChild(l)}for(var d,u=0;d=t.inputList[u];u++){var p=!0;if(5!=d.type){var h=d.connection.targetBlock();if(1==d.type?b=o("value"):3==d.type&&(b=o("statement")),(m=d.connection.getShadowDom())&&(!h||!h.isShadow())){var g=c(m);n&&g.getAttribute("id")&&g.removeAttribute("id"),b.appendChild(g)}h&&(b.appendChild(e(h,n)),p=!1),b.setAttribute("name",d.name),p||s.appendChild(b)}}t.inputsInlineDefault!=t.inputsInline&&s.setAttribute("inline",t.inputsInline),t.isCollapsed()&&s.setAttribute("collapsed",!0),t.disabled&&s.setAttribute("disabled",!0),t.isDeletable()||t.isShadow()||s.setAttribute("deletable",!1),t.isMovable()||t.isShadow()||s.setAttribute("movable",!1),t.isEditable()||s.setAttribute("editable",!1);var m,f=t.getNextBlock();if(f){var b=o("next",0,e(f,n));s.appendChild(b)}return!(m=t.nextConnection&&t.nextConnection.getShadowDom())||f&&f.isShadow()||b.appendChild(c(m)),s},i=function(e,t){var n=e.getCommentText();if(n){var s=o("comment",0,n);if("object"==typeof e.comment){var a;s.setAttribute("id",e.comment.id),s.setAttribute("pinned",e.comment.isVisible()),a=e.comment.getHeightWidth?e.comment.getHeightWidth():e.comment.getBubbleSize(),s.setAttribute("h",a.height),s.setAttribute("w",a.width);var r=e.comment.getXY();s.setAttribute("x",r.x),s.setAttribute("y",r.y),s.setAttribute("minimized",e.comment.isMinimized())}t.appendChild(s)}},c=function(e){for(var t,n=e=e.cloneNode(!0);n;)if(n.firstChild)n=n.firstChild;else{for(;n&&!n.nextSibling;)t=n,n=n.parentNode,3==t.nodeType&&""==t.data.trim()&&n.firstChild!=t&&s(t);n&&(t=n,n=n.nextSibling,3==t.nodeType&&""==t.data.trim()&&s(t))}return e};t.default=e=>{const t=r(e,!1),n=e.getRelativeToSurfaceXY();return t.setAttribute("x",Math.round(e.workspace.RTL?-n.x:n.x)),t.setAttribute("y",Math.round(n.y)),t}},1913:function(e,t,n){"use strict";n.r(t);var o=n(1909),s=n(1910),a=n(1911);t.default=async({addon:e,console:t,msg:n})=>{const r=new s.a(250),i=(t,n)=>{if(t=Object(o.b)(t),!e.tab.redux.state||!e.tab.redux.state.scratchGui)return;const s=({detail:t})=>{"scratch-gui/color-picker/DEACTIVATE_COLOR_PICKER"===t.action.type&&(e.tab.redux.removeEventListener("statechanged",s),setTimeout(()=>{document.body.classList.remove("sa-hide-eye-dropper-background")},50))},a=({detail:n})=>{"scratch-gui/color-picker/ACTIVATE_COLOR_PICKER"===n.action.type&&(e.tab.redux.removeEventListener("statechanged",a),e.tab.redux.addEventListener("statechanged",s),setTimeout(()=>{e.tab.redux.dispatch({type:"scratch-gui/color-picker/DEACTIVATE_COLOR_PICKER",color:t})},50))};e.tab.redux.addEventListener("statechanged",a),document.body.classList.add("sa-hide-eye-dropper-background"),n.click()},c=()=>{const t=document.querySelector("button.scratchEyedropper");r.abort(!1),e.tab.redux.initialize();const s=(e=>{const{children:t}=e.parentElement,n=t[1].getAttribute("aria-valuenow"),o=t[3].getAttribute("aria-valuenow"),s=t[5].getAttribute("aria-valuenow"),r=Number(s)/255;return Object(a.a)("hsv(".concat(n,", ").concat(o,", ").concat(r||0,")")).toHexString()})(t),c=Object.assign(document.createElement("div"),{className:"sa-color-picker sa-color-picker-code"}),l=Object.assign(document.createElement("input"),{className:"sa-color-picker-color sa-color-picker-code-color",type:"color",value:s||"#000000"}),d=Object.assign(document.createElement("input"),{className:e.tab.scratchClass("input_input-form",{others:"sa-color-picker-text sa-color-picker-code-text"}),type:"text",pattern:"^#?([0-9a-fA-F]{3}){1,2}$",placeholder:n("hex"),value:s||""});l.addEventListener("input",()=>r.limit(()=>i(d.value=l.value,t))),d.addEventListener("change",()=>{const{value:e}=d;Object(o.a)().test(e)&&i(l.value=Object(o.b)(e),t)}),c.appendChild(l),c.appendChild(d),t.parentElement.insertBefore(c,t)},l=await e.tab.traps.getBlockly(),d=l.FieldColourSlider.prototype.showEditor_;l.FieldColourSlider.prototype.showEditor_=function(...e){const t=d.call(this,...e);return c(),t}}},1914:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));class o{constructor(e,t,n,o){this.cls=e,this.procCode=t,this.labelID=n,this.y=o,this.lower=t.toLowerCase(),this.clones=null,this.eventName=null}matchesID(e){if(this.labelID===e)return!0;if(this.clones)for(const t of this.clones)if(t===e)return!0;return!1}}},1915:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return l}));var o=n(1916),s=n(1918),a=n(1907),r=n(1919),i=n(1914),c=n(1920);class l{constructor(e,t,n,a){this.addon=e,this.msg=t,this.m=n,this.vm=e.tab.traps.vm,this.utils=new o.default(e),this.domHelpers=new s.default(e),this.multi=new d(this.utils),this._helpHTML=a,this.find=null,this.findInp=null,this.ddOut=null,this.dd=null,this.codeTab=null,this.costTab=null,this.costTabBody=null,this.selVarID=null,this.floatInp=null,this.blockCursor=null,this.canShare=!1,this.mouseXY={x:0,y:0}}init(){setTimeout(()=>this.initInner(),500)}isScriptEditor(){return this.codeTab.className.indexOf("gui_is-selected")>=0}isCostumeEditor(){return this.costTab.className.indexOf("gui_is-selected")>=0}eventClickHelp(e){document.getElementById("s3devHelpPop")||(document.body.insertAdjacentHTML("beforeend",this._helpHTML),document.getElementById("s3devHelpPop").addEventListener("mousedown",(function(e){"s3devHelpPop"===e.target.id&&e.target.remove()})),document.querySelector("#s3devHelpPop .close-button").addEventListener("click",(function(e){document.getElementById("s3devHelpPop").remove()}))),e.preventDefault()}getScratchCostumes(){let e=this.costTabBody.querySelectorAll("div[class^='sprite-selector-item_sprite-name']"),t=[],n={};function o(e,o,s){let a=s.className,r=new i.default(e,o,a,0);return t.push(r),n[o]=r,r}let s=0;for(const t of e)o("costume",t.innerText,t).y=s,s++;return{procs:t}}getScratchBlocks(){let e=[],t={},n=this.utils.getWorkspace(),o=n.getTopBlocks();function s(n,o,s){let a=s.id?s.id:s.getId?s.getId():null,r=t[o];if(r)return r.clones||(r.clones=[]),r.clones.push(a),r;let c=new i.default(n,o,a,0);return c.y=s.getRelativeToSurfaceXY?s.getRelativeToSurfaceXY().y:null,e.push(c),t[o]=c,c}function a(e){let t,n=e.inputList[0];for(const e of n.fieldRow)t=(t?t+" ":"")+e.getText();return t}for(const e of o)if("procedures_definition"!==e.type)if("event_whenflagclicked"!==e.type)if("event_whenbroadcastreceived"!==e.type)"event_when"!==e.type.substr(0,10)&&"control_start_as_clone"!==e.type||s("event",a(e),e);else try{let t=e.inputList[0].fieldRow[1].getText();s("receive","event "+t,e).eventName=t}catch(e){}else s("flag",a(e),e);else{let t=e.inputList[0].fieldRow[0].getText(),n=e.getChildren()[0].getProcCode();if(!n)continue;s("define",t+" "+n,e)}let r=n.getVariableMap(),c=r.getVariablesOfType("");for(const e of c)s(e.isLocal?"var":"VAR",(e.isLocal?"var ":"VAR ")+e.name,e);let l=r.getVariablesOfType("list");for(const e of l)s(e.isLocal?"list":"LIST",(e.isLocal?"list ":"LIST ")+e.name,e);const d=this.getCallsToEvents();for(const e of d)s("receive","event "+e.eventName,e.block).eventName=e.eventName;const u={flag:0,receive:1,event:2,define:3,var:4,VAR:5,list:6,LIST:7};return e.sort((e,t)=>{let n=u[e.cls]-u[t.cls];return 0!==n?n:e.lower<t.lower?-1:e.lower>t.lower?1:e.y-t.y}),{procs:e}}showDropDown(e,t,n){if(clearTimeout(h),h=0,!t&&this.ddOut.classList.contains("vis"))return;m=t?"":null,this.ddOut.classList.add("vis");let o=this.isCostumeEditor()?this.getScratchCostumes():this.getScratchBlocks();this.dom_removeChildren(this.dd);let s=null;const a=o.procs;for(const e of a){let n=document.createElement("li");n.innerText=e.procCode,n.data=e,n.className=e.cls,t&&(e.matchesID(t)?(s=n,n.classList.add("sel")):n.style.display="none"),this.dd.appendChild(n)}let r=document.getElementById("s3devFindLabel");this.utils.offsetX=this.ddOut.getBoundingClientRect().right-r.getBoundingClientRect().left+26,this.utils.offsetY=32,s&&this.clickDropDownRow(s,this.utils.getWorkspace(),n)}hideDropDown(){clearTimeout(h),h=setTimeout(()=>this.reallyHideDropDown(),250)}reallyHideDropDown(){this.findInp!==document.activeElement?(this.ddOut.classList.remove("vis"),h=0):this.hideDropDown()}hideFloatDropDown(){clearTimeout(g),g=setTimeout(()=>this.reallyHideFloatDropDown(),50)}reallyHideFloatDropDown(e){if(!e&&this.floatInp===document.activeElement)return void this.hideFloatDropDown();let t=document.getElementById("s3devFloatingBar");t&&t.remove(),this.floatInp=null,g=0}dom_removeChildren(e){for(;e.firstChild;)e.removeChild(e.firstChild)}getTopBlocks(){let e=this.getOrderedTopBlockColumns().cols,t=[];for(const n of e)t=t.concat(n.blocks);return t}hidePopups(e){const t=e.getToolbox().HtmlDiv;t.dispatchEvent(new MouseEvent("mousedown",{relatedTarget:t,bubbles:!0})),t.dispatchEvent(new MouseEvent("mouseup",{relatedTarget:t,bubbles:!0}))}doCleanUp(e,t){let n=this.utils.getWorkspace();if(e)return e.cancelBubble=!0,e.preventDefault(),this.hidePopups(n),void setTimeout(()=>this.doCleanUp(void 0,t),0);let o=t&&n.getBlockById(t);o=o&&o.getRootBlock(),c.default.startUndoGroup(n);let s=this.getOrderedTopBlockColumns(!0),a=s.cols,r=s.orphans.blocks.length;if(r>0&&!t){let e=this.msg("orphaned",{count:r});if(confirm(e))for(const e of s.orphans.blocks)e.dispose();else a.unshift(s.orphans)}let i=48,l=s.maxWidths;for(const e of a){let t=64,n=0;for(const s of e.blocks){let e=s===o?380:0,a=s===o?480:72,r=s.getRelativeToSurfaceXY();i-r.x==0&&t-r.y==0||s.moveBy(i-r.x,t-r.y);let c=s.getHeightWidth();t+=c.height+a;let d=l[s.id]||0;n=Math.max(n,Math.max(c.width+e,d))}i+=n+96}let d=n.getTopComments();for(const e of d)e.setVisible&&(e.setVisible(!1),e.needsAutoPositioning_=!0,e.setVisible(!0));setTimeout(()=>{let e=this.utils.getWorkspace(),n=e.getVariableMap(),o=n.getVariablesOfType(""),s=[];for(const e of o)if(e.isLocal){let t=n.getVariableUsesById(e.getId());t&&0!==t.length||s.push(e)}if(s.length>0&&!t){const t=s.length;let n=this.msg("unused-var",{count:t});for(let e=0;e<s.length;e++){let t=s[e];e>0&&(n+=", "),n+=t.name}if(confirm(n))for(const t of s)e.deleteVariableById(t.getId())}c.default.endUndoGroup(e)},100)}isBlockAnOrphan(e){return!!e.outputConnection}getOrderedTopBlockColumns(e){let t=this.utils.getWorkspace(),n=t.getTopBlocks(),o={};if(e){let e=t.getTopComments();for(const t of e)if(t.setVisible){t.setVisible(!1),t.needsAutoPositioning_=!0,t.setVisible(!0);let e=t.getBoundingRectangle().bottomRight.x,n=t.block_.getRootBlock(),s=n.getBoundingRectangle().topLeft.x;o[n.id]=Math.max(e-s,o[n.id]||0)}}let s=[];let a={x:-999999,count:0,blocks:[]};for(const t of n){let n=t.getRelativeToSurfaceXY(),o=null,r=256;if(e&&this.isBlockAnOrphan(t))a.blocks.push(t);else{for(const e of s){let t=Math.abs(n.x-e.x);t<r&&(r=t,o=e)}o?(o.x=(o.x*o.count+n.x)/++o.count,o.blocks.push(t)):s.push(new u(n.x,1,[t]))}}s.sort((e,t)=>e.x-t.x);for(const e of s)e.blocks.sort((e,t)=>e.getRelativeToSurfaceXY().y-t.getRelativeToSurfaceXY().y);return{cols:s,orphans:a,maxWidths:o}}getVariableUsesById(e){let t=[],n=this.getTopBlocks(!0);for(const o of n){let n=o.getDescendants();for(const o of n){let n=o.getVarModels();if(n)for(const s of n)s.getId()===e&&t.push(o)}}return t}getCallsToProcedureById(e){let t=this.utils.getWorkspace().getBlockById(e),n=t.getChildren()[0].getProcCode(),o=[t],s=this.getTopBlocks(!0);for(const e of s){let t=e.getDescendants();for(const e of t)"procedures_call"===e.type&&e.getProcCode()===n&&o.push(e)}return o}getCallsToEventsByName(e){let t=[];const n=this.vm.runtime.targets;for(const o of n){if(!o.isOriginal)continue;const n=o.blocks;if(n._blocks)for(const s of Object.keys(n._blocks)){const r=n._blocks[s];if("event_broadcast_menu"===r.opcode&&r.fields.BROADCAST_OPTION.value===e){const e=n.getBlock(r.parent);t.push(new a.default(o,e))}else"event_whenbroadcastreceived"===r.opcode&&r.fields.BROADCAST_OPTION.value===e&&t.push(new a.default(o,r))}}return t}getCallsToEvents(){const e=[],t={};let n=this.getTopBlocks(!0);for(const o of n){let n=o.getDescendants();for(const o of n)if("event_broadcast"===o.type||"event_broadcastandwait"===o.type){const n=o.getChildren()[0].inputList[0].fieldRow[0].getText();t[n]||(t[n]=o,e.push({eventName:n,block:o}))}}return e}buildNavigationCarousel(e,t,n,o){if(e&&e.parentNode===t)this.multi.navRight();else{if(e&&e.remove(),t.insertAdjacentHTML("beforeend",'\n                    <span id="s3devMulti" class="s3devMulti">\n                        <span id="s3devMultiLeft" class="s3devNav">◀</span><span id="s3devMultiCount"></span><span id="s3devMultiRight" class="s3devNav">▶</span>\n                    </span>\n                '),document.getElementById("s3devMultiLeft").addEventListener("mousedown",(...e)=>this.multi.navLeft(...e)),document.getElementById("s3devMultiRight").addEventListener("mousedown",(...e)=>this.multi.navRight(...e)),this.multi.idx=0,o)for(let e=0;e<n.length;e++){if(n[e].id===o.id){this.multi.idx=e;break}}this.multi.blocks=n,this.multi.update(),this.multi.idx<n.length&&this.centerTop(n[this.multi.idx])}}moveCostumeTo(e,t){let n=!t||t.className.indexOf("sprite-selector-item_is-selected")>=0;if(!t){if(0===(t=this.costTabBody.querySelectorAll("div[class*='sprite-selector-item_is-selected']")).length)return;t=t[0].querySelectorAll("div[class^='sprite-selector-item_sprite-name']")[0]}let o=this.costTabBody.querySelectorAll("div[class^='sprite-selector-item_sprite-name']"),s=t.closest("div[class*=selector_list-area]"),a=s.scrollTop;s.scrollTop=e?0:s.scrollHeight,this.domHelpers.triggerDragAndDrop(t,o[e?0:o.length-1],void 0),n||(s.scrollTop=a)}clickDropDownRow(e,t,n){let o=document.getElementById("s3devMulti"),s=e.data.cls;if("costume"===s){let t=this.costTabBody.querySelectorAll("div[class^='sprite-selector-item_sprite-name']")[e.data.y];t&&(t.click(),setTimeout(()=>{let e=t.closest("div[class*=gui_flex-wrapper]");t.parentElement.parentElement.scrollIntoView({behavior:"auto",block:"center",inline:"start"}),e.scrollTop=0},10))}else if("var"===s||"VAR"===s||"list"===s||"LIST"===s){let t=this.getVariableUsesById(e.data.labelID);this.buildNavigationCarousel(o,e,t,n)}else if("define"===s){let t=this.getCallsToProcedureById(e.data.labelID);this.buildNavigationCarousel(o,e,t,n)}else if("receive"===s){let t=this.getCallsToEventsByName(e.data.eventName);if(!n){const e=this.utils.getEditingTarget().id;for(const o of t)if(o.targetId===e){n=o;break}}this.buildNavigationCarousel(o,e,t,n)}else if(e.data.clones){let s=[t.getBlockById(e.data.labelID)];for(const n of e.data.clones)s.push(t.getBlockById(n));this.buildNavigationCarousel(o,e,s,n)}else this.multi.blocks=null,this.centerTop(e.data.labelID),o&&o.remove()}dropDownClick(e){let t=this.utils.getWorkspace();null===m&&(m=this.findInp.value);let n=e.target;for(;;){if(!n||n===this.dd)return;if(n.data)break;n=n.parentNode}if(!e.navKey){let t=this.dd.getElementsByClassName("sel");if(t=t.length>0?t[0]:null,t&&t!==n)try{t.classList.remove("sel")}catch(e){console.log(t),console.error(e)}n!==t&&n.classList.add("sel")}return this.clickDropDownRow(n,t),e&&e.preventDefault&&(e.preventDefault(),e.cancelBubble=!0),!1}centerTop(e,t){this.utils.scrollBlockIntoView(e,t)}inputChange(e){this.ddOut.classList.contains("vis")||(this.showDropDown(),this.hideDropDown());let t=(this.findInp.value||"").toLowerCase();if(t===m)return;m=t,this.multi.blocks=null;let n=this.dd.getElementsByTagName("li");for(const e of n){let n=e.data.procCode,o=e.data.lower.indexOf(t);if(o>=0){e.style.display="block",this.dom_removeChildren(e),o>0&&e.appendChild(document.createTextNode(n.substring(0,o)));let s=document.createElement("b");s.appendChild(document.createTextNode(n.substr(o,t.length))),e.appendChild(s),o+t.length<n.length&&e.appendChild(document.createTextNode(n.substr(o+t.length)))}else e.style.display="none"}}navigateFilter(e){let t,n=this.dd.getElementsByClassName("sel");for(n.length>0&&"none"!==n[0].style.display?t=-1===e?n[0].previousSibling:n[n.length-1].nextSibling:(t=this.dd.children[0],e=1);t&&"none"===t.style.display;)t=-1===e?t.previousSibling:t.nextSibling;if(t){for(const e of n)e.classList.remove("sel");t.classList.add("sel"),this.dropDownClick({target:t,navKey:!0})}}inputKeyDown(e){if(38===e.keyCode)return this.navigateFilter(-1),void e.preventDefault();if(40===e.keyCode)return this.navigateFilter(1),void e.preventDefault();if(37===e.keyCode){this.dd.getElementsByClassName("sel")&&this.multi.blocks&&this.multi.navLeft(e)}if(39===e.keyCode){this.dd.getElementsByClassName("sel")&&this.multi.blocks&&this.multi.navRight(e)}if(13===e.keyCode){return 0===this.dd.getElementsByClassName("sel").length&&this.navigateFilter(1),document.activeElement.blur(),void e.preventDefault()}return 27===e.keyCode?(this.findInp.value.length>0?(this.findInp.value="",this.inputChange(e)):document.activeElement.blur(),void e.preventDefault()):void 0}doReplaceVariable(e,t,n){let o=this.utils.getWorkspace(),s=o.getVariable(t,n);if(!s)return void alert(this.msg("var-not-exist"));let a=s.getId();c.default.startUndoGroup(o);let r=this.getVariableUsesById(e);for(const e of r)try{""===n?e.getField("VARIABLE").setValue(a):e.getField("LIST").setValue(a)}catch(e){}c.default.endUndoGroup(o)}clickReplace(e){let t=this.utils.getWorkspace();return this.hidePopups(t),setTimeout(()=>{let e=this.utils.getWorkspace().getVariableById(this.selVarID),t=window.prompt(this.msg("replace",{name:e.name}));t&&this.doReplaceVariable(this.selVarID,t,e.type)},0),e.preventDefault(),!1}getTopBlockIDs(){let e=this.utils.getWorkspace().getTopBlocks(),t=new Set;for(const n of e)t.add(n.id);return t}beginDragOfNewBlocksNotInIDs(e){if(!this.addon.settings.get("enablePasteBlocksAtMouse"))return;let t=this.utils.getWorkspace().getTopBlocks();for(const n of t)if(!e.has(n.id)){let e={x:this.mouseXY.x,y:this.mouseXY.y};this.domHelpers.triggerDragAndDrop(n.svgPath_,null,e)}}updateMousePosition(e){this.mouseXY.x=e.clientX,this.mouseXY.y=e.clientY}eventMouseMove(e){this.updateMousePosition(e)}eventKeyDown(e){function t(e){let t=this.costTabBody.querySelector("div[class*='sprite-selector-item_is-selected']"),n=e?t.parentNode.previousSibling:t.parentNode.nextSibling;if(n){let e=n.closest("div[class*=gui_flex-wrapper]");n.querySelector("div[class^='sprite-selector-item_sprite-name']").click(),n.scrollIntoView({behavior:"auto",block:"center",inline:"start"}),e.scrollTop=0}}if(document.URL.indexOf("editor")<=0)return;let n=e.ctrlKey||e.metaKey;if("f"===e.key&&n&&!e.shiftKey)return this.findInp.focus(),this.findInp.select(),e.cancelBubble=!0,e.preventDefault(),!0;if(" "===e.key&&n)return this.middleClickWorkspace(e),e.cancelBubble=!0,e.preventDefault(),!0;if(37===e.keyCode&&n){if("INPUT"===document.activeElement.tagName)return;return this.isScriptEditor()?this.utils.navigationHistory.goBack():this.isCostumeEditor()&&t(!0),e.cancelBubble=!0,e.preventDefault(),!0}if(39===e.keyCode&&n){if("INPUT"===document.activeElement.tagName)return;return this.isScriptEditor()?this.utils.navigationHistory.goForward():this.isCostumeEditor()&&t(!1),e.cancelBubble=!0,e.preventDefault(),!0}if(86===e.keyCode&&n&&!e.griff){let e=this.getTopBlockIDs();setTimeout(()=>{this.beginDragOfNewBlocksNotInIDs(e)},10)}}eventMouseDown(e){if(this.updateMousePosition(e),this.ddOut&&this.ddOut.classList.contains("vis")&&!e.target.closest("#s3devDDOut")&&this.hideDropDown(),this.floatInp&&!e.target.closest("#s3devIDDOut")&&this.hideFloatDropDown(),1===e.button)try{this.middleClick(e)}catch(e){console.error(e)}else if(2===e.button){let t=e.target.closest("#react-tabs-3 div[class*='sprite-selector-item_sprite-selector-item']");if(t){let e=t.getElementsByTagName("nav")[0];e.querySelector("div.s3devSTT")||e.insertAdjacentHTML("beforeend",'\n                            <div class="'.concat(this.addon.tab.scratchClass("context-menu_menu-item","context-menu_menu-item-bordered",{others:["react-contextmenu-item","s3devSTT"]}),'" role="menuitem"\n                                tabindex="-1" aria-disabled="false"><span>').concat(this.m("top"),'</span></div>\n                            <div class="').concat(this.addon.tab.scratchClass("context-menu_menu-item",{others:["react-contextmenu-item","s3devSTT"]}),'" role="menuitem"\n                                tabindex="-1" aria-disabled="false"><span>').concat(this.m("bottom"),"</span></div>\n                        "))}let n=e.target.closest("[data-id]"),o=!n&&e.target.closest("svg.blocklySvg");if(n||o){let e=n&&n.getAttribute("data-id");(e||o)&&setTimeout(async()=>{let t=document.querySelector("div.blocklyWidgetDiv");if(!t)return;let n=t.querySelector("div.blocklyContextMenu");if(!n)return;if(o){let e=this.addon.settings.get("enableCleanUpPlus"),t=n.children;const o=await this.addon.tab.traps.getBlockly();if(e)for(const e of t)if(e.textContent===o.Msg.CLEAN_UP){e.remove();break}let s=e?'\n                  <div\n                    id="s3devCleanUp"\n                    class="goog-menuitem s3dev-mi '.concat("rtl"===this.addon.tab.direction?"goog-menuitem-rtl":"",'"\n                    role="menuitem"\n                    style="user-select: none; border-top: 1px solid hsla(0, 0%, 0%, 0.15);"\n                  >\n                      <div class="goog-menuitem-content" style="user-select: none;">').concat(this.m("clean-plus"),"</div>\n                  </div>\n              "):"";s+='\n                  <div\n                    id="s3devPaste"\n                    class="goog-menuitem s3dev-mi '.concat("rtl"===this.addon.tab.direction?"goog-menuitem-rtl":"",'"\n                    role="menuitem"\n                    style="user-select: none;"\n                  >\n                      <div class="goog-menuitem-content" style="user-select: none;">').concat(this.m("paste"),"</div>\n                  </div>\n              "),n.insertAdjacentHTML("beforeend",s)}else{let t=this.utils.getWorkspace().getBlockById(e);t.workspace.isFlyout||n.insertAdjacentHTML("beforeend",'\n                    <div id="s3devMakeSpace" class="goog-menuitem s3dev-mi" role="menuitem" style="user-select: none; border-top: 1px solid hsla(0, 0%, 0%, 0.15);">\n                        <div class="goog-menuitem-content" style="user-select: none;">'.concat(this.m("make-space"),'</div>\n                    </div>\n                    <div id="s3devCopy" class="goog-menuitem s3dev-mi" role="menuitem" style="user-select: none; border-top: 1px solid hsla(0, 0%, 0%, 0.15);">\n                        <div class="goog-menuitem-content" style="user-select: none;">').concat(this.m("copy-all"),'</div>\n                    </div>\n                    <div id="s3devCopyBlock" class="goog-menuitem s3dev-mi" role="menuitem" style="user-select: none;">\n                        <div class="goog-menuitem-content" style="user-select: none;">').concat(this.m("copy-block"),'</div>\n                    </div>\n                    <div id="s3devCutBlock" class="goog-menuitem s3dev-mi" role="menuitem" style="user-select: none;">\n                        <div class="goog-menuitem-content" style="user-select: none;">').concat(this.m("cut-block"),"</div>\n                    </div>\n                  ")),!t||"data"!==t.getCategory()&&"data-lists"!==t.getCategory()||(n.insertAdjacentHTML("beforeend",'\n                        <div id="s3devReplaceAllVars" class="goog-menuitem s3dev-mi" role="menuitem" style="user-select: none; border-top: 1px solid hsla(0, 0%, 0%, 0.15);">\n                            <div class="goog-menuitem-content" style="user-select: none;">'.concat(this.m("swap",{var:"data"===t.getCategory()?this.m("variables"):this.m("lists")}),"</div>\n                        </div>\n                  ")),this.selVarID=t.getVars()[0])}n.children.length<15&&(n.style.maxHeight="none",t.style.height=n.getBoundingClientRect().height+12+"px",n.style.maxHeight="");let s=n.querySelector("div#s3devCleanUp");s&&s.addEventListener("click",(...e)=>this.doCleanUp(...e)),s=n.querySelector("div#s3devMakeSpace"),s&&s.addEventListener("click",t=>this.doCleanUp(t,e)),s=n.querySelector("div#s3devCopy"),s&&s.addEventListener("click",(...e)=>r(...e)),s=n.querySelector("div#s3devCopyBlock"),s&&s.addEventListener("click",e=>{r(e,1)}),s=n.querySelector("div#s3devCutBlock"),s&&s.addEventListener("click",e=>{r(e,2)}),s=n.querySelector("div#s3devReplaceAllVars"),s&&s.addEventListener("click",(...e)=>this.clickReplace(...e));let a=this;function r(t,n){let o=a.utils.getWorkspace();a.hidePopups(o);let s=o.getBlockById(e);if(s){s.select();let t=n?s.getNextBlock():null;t&&t.unplug(!1),document.dispatchEvent(new KeyboardEvent("keydown",{keyCode:67,ctrlKey:!0})),(t||2===n)&&setTimeout(()=>{if(t&&o.undo(),2===n){let t=o.getBlockById(e);c.default.startUndoGroup(o),t.dispose(!0),c.default.endUndoGroup(o)}},0)}}let i=n.querySelector("div#s3devPaste");i&&i.addEventListener("click",(function(){let e=a.utils.getWorkspace();a.hidePopups(e);let t=a.getTopBlockIDs();document.dispatchEvent(new KeyboardEvent("keydown",{keyCode:86,ctrlKey:!0,griff:!0})),setTimeout(()=>{a.beginDragOfNewBlocksNotInIDs(t)},10)}))},1)}}else{let t=e.target;if(t&&"BUTTON"!==t.tagName&&t.getAttribute&&!t.getAttribute("role")&&(t=t.parentNode,t&&"BUTTON"!==t.tagName&&t.getAttribute&&!t.getAttribute("role")&&(t=t.parentNode)),t&&t.className&&t.className.indexOf&&(t.className.indexOf("see-inside-button")>=0&&setTimeout(()=>this.initInner(),200),!this.canShare&&t.className.indexOf("share-button")>=0))return;if(t="SPAN"===e.target.tagName?e.target.parentNode:e.target,t.classList.contains("s3devSTT")&&(t.textContent===this.m("top")||t.textContent===this.m("bottom"))){let n=e.target.closest("div[class*='sprite-selector-item_sprite-selector-item']");this.moveCostumeTo(t.textContent===this.m("top"),n),e.cancelBubble=!0,e.preventDefault()}}}eventMouseUp(e){this.updateMousePosition(e),1===e.button&&e.target.closest("svg.blocklySvg")&&e.preventDefault()}middleClickWorkspace(e){if(!this.isScriptEditor())return;e.cancelBubble=!0,e.preventDefault();let t=document.getElementById("s3devFloatingBar");t&&t.remove(),document.body.insertAdjacentHTML("beforeend",'\n            <div id="s3devFloatingBar" dir="'.concat(this.addon.tab.direction,'">\n                <label class=\'title s3devLabel\' id=s3devInsertLabel>\n                    <span style="display:none;">').concat(this.m("insert"),' </span>\n                    <span id=s3devInsert class="s3devWrap">\n                        <div id=\'s3devIDDOut\' class="s3devDDOut">\n                            <input id=\'s3devIInp\' class="').concat(this.addon.tab.scratchClass("input_input-form",{others:"s3devInp"}),"\" type='search' placeholder='").concat(this.m("start-typing"),"' autocomplete='off'>\n                            <ul id='s3devIDD' class=\"s3devDD\"></ul>\n                        </div>\n                    </span>\n                </label>\n            </div>\n        ")),t=document.getElementById("s3devFloatingBar"),t.style.left=this.mouseXY.x+16+"px",t.style.top=this.mouseXY.y-8+"px",this.floatInp=document.getElementById("s3devIInp"),this.floatInp.focus(),this.buildFloatingFilterList(e,t);document.getElementById("s3devIDDOut").addEventListener("mousedown",(...e)=>this.dropDownFloatClick(...e)),this.floatInp.addEventListener("keyup",(...e)=>this.floatInputChange(...e)),this.floatInp.addEventListener("focus",(...e)=>this.floatInputChange(...e)),this.floatInp.addEventListener("keydown",(...e)=>this.floatInputKeyDown(...e))}middleClick(e){let t=e.target.closest("[data-id]");if(!t)return void(e.target.closest("svg.blocklySvg")&&(this.blockCursor=null,this.middleClickWorkspace(e)));if(!this.addon.settings.get("enableMiddleClickFinder"))return;let n=this.utils.getWorkspace(),o=t.getAttribute("data-id"),s=n.getBlockById(o);if(s){for(;s;s=s.getSurroundParent()){if("procedures_call"===s.type){e.cancelBubble=!0,e.preventDefault();let t=s.getProcCode(),n=this.utils.getWorkspace().getTopBlocks();for(const e of n)if("procedures_definition"===e.type){let n=e.getChildren()[0].getProcCode();if(n&&n===t)return void this.centerTop(e)}}if("procedures_definition"===s.type){let t=s.id?s.id:s.getId?s.getId():null;return this.findInp.focus(),this.showDropDown(null,t),e.cancelBubble=!0,void e.preventDefault()}if("data_variable"===s.type||"data_changevariableby"===s.type||"data_setvariableto"===s.type){let t=s.getVars()[0];return this.findInp.focus(),this.showDropDown(null,t,s),this.selVarID=t,e.cancelBubble=!0,void e.preventDefault()}if("event_whenbroadcastreceived"===s.type||"event_broadcastandwait"===s.type||"event_broadcast"===s.type){let t=s.id;return this.findInp.focus(),this.showDropDown(null,t,s),this.selVarID=t,e.cancelBubble=!0,void e.preventDefault()}}e.cancelBubble=!0,e.preventDefault()}}getEdgeTypeClass(e){switch(e.edgeShape_){case 1:return"boolean";case 2:return"reporter";default:return e.startHat_?"hat":"block"}}buildFloatingFilterList(e,t){let n=[],o=this.utils.getWorkspace().getToolbox(),s=o.flyout_.getWorkspace().getTopBlocks(),a=Blockly.Xml.workspaceToDom(o.flyout_.getWorkspace());const r={};for(const e of a.children)if("BLOCK"===e.tagName){r[e.getAttribute("id")]=e}for(const e of s)this.getBlockText(e,n,r);n.sort((e,t)=>e.desc.length<t.desc.length?-1:e.desc.length>t.desc.length?1:e.desc.localeCompare(t.desc));const i=document.getElementById("s3devIDD");let c=0;for(const e of n){const t=document.createElement("li"),n=e.desc;let o=this.getEdgeTypeClass(e.block);c++,t.innerText=n,t.data={text:n,lower:" "+n.toLowerCase(),option:e},t.className="var "+(e.block.isScratchExtension?"extension":e.block.getCategory())+" "+o,c>p&&(t.style.display="none"),i.appendChild(t)}document.getElementById("s3devIDDOut").classList.add("vis")}getBlockText(e,t,n){let o,s,a,r=n[e.id];const i=e=>{for(const t of e.inputList){let e=t.fieldRow;for(const t of e){let e;s||"blocklyText blocklyDropdownText"!==t.className_?e=t.getText():(s=t.getOptions(),a=t.name,e=s&&s.length>0?"^^":t.getText()),o=(o?o+" ":"")+e}if(t.connection){let e=t.connection.targetBlock();e&&i(e)}}};if(i(e),s)for(const n of s){let s=n[1];"string"==typeof s&&"DELETE_VARIABLE_ID"!==s&&"RENAME_VARIABLE_ID"!==s&&"NEW_BROADCAST_MESSAGE_ID"!==s&&"NEW_BROADCAST_MESSAGE_ID"!==s&&t.push({desc:o.replace("^^",n[0]),block:e,dom:r,option:n,pickField:a})}else t.push({desc:o,block:e,dom:r});return o}floatInputKeyDown(e){if(38===e.keyCode)return this.navigateFloatFilter(-1),void e.preventDefault();if(40===e.keyCode)return this.navigateFloatFilter(1),void e.preventDefault();if(13===e.keyCode){return document.getElementById("s3devIDD").querySelector(".sel")&&this.dropDownFloatClick(e),e.cancelBubble=!0,void e.preventDefault()}if(27===e.keyCode){let t=document.getElementById("s3devIInp");return t.value.length>0?(t.value="",this.floatInputChange(e)):this.reallyHideFloatDropDown(!0),void e.preventDefault()}}navigateFloatFilter(e){let t,n=document.getElementById("s3devIDD"),o=n.getElementsByClassName("sel");for(o.length>0&&"none"!==o[0].style.display?t=-1===e?o[0].previousSibling:o[o.length-1].nextSibling:(t=n.children[0],e=1);t&&"none"===t.style.display;)t=-1===e?t.previousSibling:t.nextSibling;if(t){for(const e of o)e.classList.remove("sel");t.classList.add("sel")}}findNextHole(e,t){}dropDownFloatClick(e){e.cancelBubble=!0,e.target.closest("input")||e.preventDefault();let t=this.utils.getWorkspace(),n=e&&e.target;if("B"===n.tagName&&(n=n.parentNode),e instanceof MouseEvent&&"LI"!==n.tagName)return;if(!n||!n.data){n=document.getElementById("s3devIDD").querySelector(".sel")}if(!n)return;let o=(new r.default).xmlDoc.firstChild,s=n.data.option;if(s.option){let e=s.dom.querySelector("field[name="+s.pickField+"]");e.getAttribute("id")?(e.innerText=s.option[0],e.setAttribute("id",s.option[1]+"-"+s.option[0])):e.innerText=s.option[1]}o.appendChild(s.dom);let a=Blockly.Xml.domToWorkspace(o,t);this.reallyHideFloatDropDown(!0);let i=t.getBlockById(a[0]);if(this.blockCursor){let e=this.getEdgeTypeClass(s.block);"boolean"===e?this.findNextHole(this.blockCursor,""):"reporter"===e&&this.findNextHole(this.blockCursor,e)}this.domHelpers.triggerDragAndDrop(i.svgPath_,null,{x:this.mouseXY.x,y:this.mouseXY.y}),this.blockCursor=i}floatInputChange(e){document.getElementById("s3devIDDOut").classList.contains("vis");let t=(document.getElementById("s3devIInp").value||"").toLowerCase();if(t===m)return;m=t,this.multi.blocks=null;let n=document.getElementById("s3devIDD"),o=n.parentNode;n.remove();let s=0,a=t.split(" "),r=n.getElementsByTagName("li");for(const e of r){const t=e.data.text,n=e.data.lower;let o=0,r=[];for(let e=0;e<a.length;e++){let t=" "+a[e],s=n.indexOf(t,o);if(-1===s){r=null;break}r.push(s),o=s+t.length}if(s<p&&r){e.style.display="block",this.dom_removeChildren(e);let n=0;for(let o=0;o<r.length;o++){let s=r[o];s>n&&(e.appendChild(document.createTextNode(t.substring(n,s))),n=s);let i=document.createElement("b"),c=a[o].length;i.appendChild(document.createTextNode(t.substr(n,c))),e.appendChild(i),n+=c}n<t.length&&e.appendChild(document.createTextNode(t.substr(n))),0===s?e.classList.add("sel"):e.classList.remove("sel"),s++}else e.style.display="none",e.classList.remove("sel")}o.append(n)}initInner(){let e=document.querySelector("ul[class*=gui_tab-list_]"),t=e&&e.childNodes;!t||t.length<3?setTimeout(()=>this.initInner(),1e3):(this.codeTab&&t[0]!==this.codeTab&&this.domHelpers.unbindAllEvents(),this.codeTab=t[0],this.costTab=t[1],this.costTabBody=document.querySelector("div[aria-labelledby="+this.costTab.id+"]"),document.getElementById("s3devFind")||(e.insertAdjacentHTML("beforeend","\n                <div id=\"s3devToolBar\">\n                    <label class='title s3devLabel' id=s3devFindLabel>\n                        <span>".concat(this.m("find")," ").concat(this.addon.self._isDevtoolsExtension?"":'<a href="#" class="s3devAction" id="s3devHelp" style="/*s-a*/ margin-left: 0; font-size: 10px; /*s-a*/">(?)</a>',' </span>\n                        <span id=s3devFind class="s3devWrap">\n                            <div id=\'s3devDDOut\' class="s3devDDOut">\n                                <input id=\'s3devInp\' class="').concat(this.addon.tab.scratchClass("input_input-form",{others:"s3devInp"}),"\" type='search' placeholder='").concat(this.m("find-placeholder"),'\' autocomplete=\'off\'>\n                                <ul id=\'s3devDD\' class="s3devDD"></ul>\n                            </div>\n                        </span>\n                        <a id="s3devDeep" class="s3devAction s3devHide" href="#">').concat(this.m("deep"),"</a>\n                        <div ").concat(this.addon.self._isDevtoolsExtension?"":'style="display: none;"','><a href="#" class="s3devAction" id="s3devHelp"><b>').concat(this.m("help"),'</b></a>\n                        <a href="https://www.youtube.com/griffpatch" class="s3devAction" target="_blank" id="s3devHelp" rel="noreferrer noopener">').concat(this.m("tutorials"),'</a></div>\n                    </label>\n\x3c!--                    <a id="s3devCleanUp" class="s3devAction" href="#">Clean Up</a>--\x3e\n\x3c!--                    <a id="s3devReplace" class="s3devAction s3devHide" href="#">Replace All</a>--\x3e\n                </div>\n            ')),this.find=document.getElementById("s3devFind"),this.findInp=document.getElementById("s3devInp"),this.ddOut=document.getElementById("s3devDDOut"),this.domHelpers.bindOnce(this.ddOut,"mousedown",(...e)=>this.dropDownClick(...e),void 0),this.dd=document.getElementById("s3devDD"),this.domHelpers.bindOnce(this.findInp,"keyup",(...e)=>this.inputChange(...e),void 0),this.domHelpers.bindOnce(this.findInp,"keydown",(...e)=>this.inputKeyDown(...e),void 0),this.domHelpers.bindOnce(this.findInp,"focus",(...e)=>this.inputChange(...e),void 0),this.domHelpers.bindOnce(document.getElementById("s3devHelp"),"click",(...e)=>this.eventClickHelp(...e),void 0),this.domHelpers.bindOnce(document,"keydown",(...e)=>this.eventKeyDown(...e),!0)),this.domHelpers.bindOnce(document,"mousemove",(...e)=>this.eventMouseMove(...e),!0),this.domHelpers.bindOnce(document,"mousedown",(...e)=>this.eventMouseDown(...e),!0),this.domHelpers.bindOnce(document,"mouseup",(...e)=>this.eventMouseUp(...e),!0))}}class d{constructor(e){this.idx=0,this.blocks=null,this.selID=null,this.utils=e}update(){var e;document.getElementById("s3devMultiCount").innerText=this.blocks&&this.blocks.length>0?(e=this.idx+1+" / "+this.blocks.length,String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")):"0",this.selID=this.idx<this.blocks.length?this.blocks[this.idx].id:null}navLeft(e){return this.navSideways(e,-1)}navRight(e){return this.navSideways(e,1)}navSideways(e,t){return this.blocks&&this.blocks.length>0&&(this.idx=(this.idx+t+this.blocks.length)%this.blocks.length,this.update(),this.utils.scrollBlockIntoView(this.blocks[this.idx])),e&&(e.cancelBubble=!0,e.preventDefault()),!1}}class u{constructor(e,t,n){this.x=e,this.count=t,this.blocks=n}}const p=25;let h=0,g=0,m=""},1916:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));var o=n(1907),s=n(1917);class a{constructor(e){this.addon=e,this.vm=this.addon.tab.traps.vm,this.offsetX=32,this.offsetY=32,this.navigationHistory=new r(this),this._workspace=null}getEditingTarget(){return this.vm.runtime.getEditingTarget()}setEditingTarget(e){this.getEditingTarget().id!==e&&this.vm.setEditingTarget(e)}getWorkspace(){const e=Blockly.getMainWorkspace();return e.getToolbox()&&(this._workspace=e),this._workspace}scrollBlockIntoView(e,t){let n,a=this.getWorkspace();if(e instanceof o.default?(this.setEditingTarget(e.targetId),n=a.getBlockById(e.id)):n=e&&e.id?e:a.getBlockById(e),!n)return;let r=n.getRootBlock(),i=this.getTopOfStackFor(n).getRelativeToSurfaceXY(),c=r.getRelativeToSurfaceXY(),l=a.scale,d=c.x*l,u=i.y*l,p=n.width+d,h=n.height+u,g=a.getMetrics();if(d<g.viewLeft+this.offsetX-4||p>g.viewLeft+g.viewWidth||u<g.viewTop+this.offsetY-4||h>g.viewTop+g.viewHeight){let e=d-g.contentLeft-this.offsetX,t=u-g.contentTop-this.offsetY;this.navigationHistory.storeView(this.navigationHistory.peek(),64),a.scrollbar.set(e,t),this.navigationHistory.storeView({left:e,top:t},64)}s.default.flash(n)}getTopOfStackFor(e){let t=e;for(;t.getOutputShape()&&t.getSurroundParent();)t=t.getSurroundParent();return t}}class r{constructor(e){this.utils=e,this.views=[],this.forward=[]}storeView(e,t){this.forward=[];let n=this.utils.getWorkspace().getMetrics(),o={left:n.viewLeft,top:n.viewTop};(!e||i(o,e)>t)&&this.views.push(o)}peek(){return this.views.length>0?this.views[this.views.length-1]:null}goBack(){const e=this.utils.getWorkspace(),t=e.getMetrics();let n={left:t.viewLeft,top:t.viewTop},o=this.peek();if(!o)return;if(i(n,o)<64&&this.views.length>1&&(this.views.pop(),this.forward.push(o)),o=this.peek(),!o)return;let s=o.left-t.contentLeft,a=o.top-t.contentTop;e.scrollbar.set(s,a)}goForward(){let e=this.forward.pop();if(!e)return;this.views.push(e);let t=this.utils.getWorkspace(),n=t.getMetrics(),o=e.left-n.contentLeft,s=e.top-n.contentTop;t.scrollbar.set(o,s)}}function i(e,t){return Math.sqrt(Math.pow(e.left-t.left,2)+Math.pow(e.top-t.top,2))}},1917:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));class o{static flash(e){s.timerID>0&&(clearTimeout(s.timerID),s.block.svgPath_&&(s.block.svgPath_.style.fill=""));let t=4,n=!0;s.block=e,function e(){s.block.svgPath_&&(s.block.svgPath_.style.fill=n?"#ffff80":""),n=!n,t--,t>0?s.timerID=setTimeout(e,200):(s.timerID=0,s.block=null)}()}}const s={block:null,timerID:null}},1918:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));class o{constructor(e){this.addon=e,this.vm=e.tab.traps.vm,this.events=[]}triggerDragAndDrop(e,t,n){let o=function(e,t,n,o){let s=document.createEvent("MouseEvents");s.initMouseEvent(e,!0,!0,window,1,1,1,n,o,!1,!1,!1,!1,0,t),t.dispatchEvent(s)},s=e,a=t;if(!s)return!1;let r=s.getBoundingClientRect(),i=Math.floor((r.left+r.right)/2),c=Math.floor((r.top+r.bottom)/2);if(o("mouseover",s,i,c),o("mousedown",s,i,c),o("dragstart",s,i,c),o("drag",s,i,c),o("mousemove",s,i,c),!a){if(n){let e=n.x,t=n.y;o("drag",s,e,t),o("mousemove",s,e,t)}return!1}r=a.getBoundingClientRect();let l=Math.floor((r.left+r.right)/2),d=Math.floor((r.top+r.bottom)/2);return o("drag",s,l,d),o("mousemove",a,l,d),o("mouseenter",a,l,d),o("dragenter",a,l,d),o("mouseover",a,l,d),o("dragover",a,l,d),o("drop",a,l,d),o("dragend",s,l,d),o("mouseup",s,l,d),!0}bindOnce(e,t,n,o){o=!!o,e.removeEventListener(t,n,o),e.addEventListener(t,n,o),this.events.push(new s(e,t,n,o))}unbindAllEvents(){for(const e of this.events)e.dom.removeEventListener(e.event,e.func,e.capture);this.events=[]}}class s{constructor(e,t,n,o){this.dom=e,this.event=t,this.func=n,this.capture=o}}},1919:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));class o{constructor(){this.xmlDoc=document.implementation.createDocument(null,"xml")}newXml(e,t,n){let o=this.xmlDoc.createElement(t);return e.appendChild(o),this.setAttr(o,n)}setAttr(e,t){if(t)for(const n of Object.keys(t))"text"===n?e.appendChild(this.xmlDoc.createTextNode(t[n])):e.setAttribute(n,t[n]);return e}}},1920:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));class o{static startUndoGroup(e){const t=e.undoStack_;t.length&&(t[t.length-1]._devtoolsLastUndo=!0)}static endUndoGroup(e){const t=e.undoStack_;setTimeout(()=>{const e=function(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!#$%()*+,-./:;=?@[]^_`{|}~";let t="";for(let n=0;n<20;n++)t+=e[Math.floor(Math.random()*e.length)];return t}();for(let n=t.length-1;n>=0&&!t[n]._devtoolsLastUndo;n--)t[n].group=e},0)}}},1921:function(e,t,n){"use strict";n.r(t);let o=window.console;const s=[{type:"key",high:"ArrowRight",low:"ArrowLeft",deadZone:.5},{type:"key",high:"ArrowDown",low:"ArrowUp",deadZone:.5}],a=[{type:"key",high:"d",low:"a",deadZone:.5},{type:"key",high:"s",low:"w",deadZone:.5}],r=[{type:"virtual_cursor",high:"+x",low:"-x",sensitivity:.6,deadZone:.2},{type:"virtual_cursor",high:"-y",low:"+y",sensitivity:.6,deadZone:.2}],i=e=>{if("object"!=typeof e||!e)return o.warn("invalid mapping",e),{type:"key",high:null,low:null};const t=Object.assign({},e);if("key"===t.type)void 0===t.deadZone&&(t.deadZone=.5),void 0===t.high&&(t.high=""),void 0===t.low&&(t.low="");else if("mousedown"===t.type)void 0===t.deadZone&&(t.deadZone=.5);else{if("virtual_cursor"!==t.type)return o.warn("unknown mapping type",t.type),{type:"key",high:null,low:null};void 0===t.high&&(t.high=""),void 0===t.low&&(t.low=""),void 0===t.sensitivity&&(t.sensitivity=10),void 0===t.deadZone&&(t.deadZone=.5)}return t},c=e=>Object.assign({},e),l=c,d=e=>{const t=c(e);return delete t.deadZone,delete t.low,t},u=(e,t)=>{for(;e.length<t;)e.push({type:"key",high:null,low:null});return e.length=t,e},p=e=>({usesArrows:e.has("ArrowUp")||e.has("ArrowDown")||e.has("ArrowRight")||e.has("ArrowLeft"),usesWASD:e.has("w")&&e.has("s")||e.has("a")&&e.has("d")}),h=e=>"".concat(e.id," (").concat(e.index,")");class g{constructor(e,t){this.gamepad=e,this.gamepadLib=t,this.buttonMappings=this.getDefaultButtonMappings().map(i),this.axesMappings=this.getDefaultAxisMappings().map(i)}getDefaultButtonMappings(){let e;if(this.gamepadLib.hints.importedSettings)e=this.gamepadLib.hints.importedSettings.buttons;else{const t=this.gamepadLib.hints.usedKeys,n=new Set,{usesArrows:o,usesWASD:s}=p(t);s&&(n.add("w"),n.add("a"),n.add("s"),n.add("d"));const a=["p","q","r"],r=[" ","Enter","e","f","z","x","c",...Array.from(t).filter(e=>1===e.length&&!a.includes(e))],i=e=>{for(const o of e)if(t.has(o)&&!n.has(o))return n.add(o),o;return null},c=()=>i(r),l=()=>i(a),d=()=>o||!s?"ArrowUp":"w",u=()=>o||!s?"ArrowDown":"s",h=()=>o||!s?"ArrowRight":"d",g=()=>o||!s?"ArrowLeft":"a",m=(()=>o&&t.has("ArrowUp")?"ArrowUp":s&&t.has("w")?"w":i(r))();let f=c(),b=c(),v=c();!m||f||b||v||(f=m,b=m,v=m),m&&f&&!b&&!v&&(b=m,v=f),e=[],e[0]={type:"key",high:m},e[1]={type:"key",high:f},e[2]={type:"key",high:b},e[3]={type:"key",high:v},e[4]={type:"mousedown"},e[5]={type:"mousedown"},e[6]={type:"mousedown"},e[7]={type:"mousedown"},e[9]={type:"key",high:l()},e[8]={type:"key",high:l()},e[10]={type:"key",high:null,low:null},e[11]={type:"key",high:null,low:null},e[12]={type:"key",high:d()},e[13]={type:"key",high:u()},e[14]={type:"key",high:g()},e[15]={type:"key",high:h()}}return u(e,this.gamepad.buttons.length)}getDefaultAxisMappings(){let e=[];if(this.gamepadLib.hints.importedSettings)e=this.gamepadLib.hints.importedSettings.axes;else if(4===this.gamepad.axes.length){const t=this.gamepadLib.hints.usedKeys,{usesArrows:n,usesWASD:o}=p(t);o?(e.push(a[0]),e.push(a[1])):n?(e.push(s[0]),e.push(s[1])):(e.push(r[0]),e.push(r[1])),e.push(r[0]),e.push(r[1])}return u(e,this.gamepad.axes.length)}}class m extends EventTarget{constructor(){super(),this.gamepads=new Map,this.handleConnect=this.handleConnect.bind(this),this.handleDisconnect=this.handleDisconnect.bind(this),this.update=this.update.bind(this),this.animationFrame=null,this.currentTime=null,this.deltaTime=0,this.virtualCursor={x:0,y:0,maxX:1/0,minX:-1/0,maxY:1/0,minY:-1/0,modified:!1},this._editor=null,this.connectCallbacks=[],this.hints={usedKeys:new Set,importedSettings:null,generated:!1},this.keysPressedThisFrame=new Set,this.oldKeysPressed=new Set,this.mouseDownThisFrame=!1,this.oldMouseDown=!1,this.addEventHandlers()}addEventHandlers(){window.addEventListener("gamepadconnected",this.handleConnect),window.addEventListener("gamepaddisconnected",this.handleDisconnect)}removeEventHandlers(){window.removeEventListener("gamepadconnected",this.handleConnect),window.removeEventListener("gamepaddisconnected",this.handleDisconnect)}gamepadConnected(){return this.gamepads.size>0?Promise.resolve():new Promise(e=>{this.connectCallbacks.push(e)})}ensureHintsGenerated(){this.hints.generated||(this.getHintsLazily&&Object.assign(this.hints,this.getHintsLazily()),this.hints.generated=!0)}handleConnect(e){this.ensureHintsGenerated();for(const e of this.connectCallbacks)e();this.connectCallbacks=[];const t=e.gamepad,n=h(t);o.log("connected",t);const s=new g(t,this);this.gamepads.set(n,s),null===this.animationFrame&&(this.animationFrame=requestAnimationFrame(this.update)),this.dispatchEvent(new CustomEvent("gamepadconnected",{detail:s}))}handleDisconnect(e){const t=e.gamepad,n=h(t);o.log("disconnected",t);const s=this.gamepads.get(n);this.gamepads.delete(n),this.dispatchEvent(new CustomEvent("gamepaddisconnected",{detail:s})),0===this.gamepads.size&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=null,this.currentTime=null)}dispatchKey(e,t){t?this.dispatchEvent(new CustomEvent("keydown",{detail:e})):this.dispatchEvent(new CustomEvent("keyup",{detail:e}))}dispatchMouseDown(e){e?this.dispatchEvent(new CustomEvent("mousedown")):this.dispatchEvent(new CustomEvent("mouseup"))}dispatchMouseMove(e,t){this.dispatchEvent(new CustomEvent("mousemove",{detail:{x:e,y:t}}))}updateButton(e,t){if("key"===t.type)e>=t.deadZone?t.high&&this.keysPressedThisFrame.add(t.high):e<=-t.deadZone&&t.low&&this.keysPressedThisFrame.add(t.low);else if("mousedown"===t.type){Math.abs(e)>=t.deadZone&&(this.mouseDownThisFrame=!0)}else if("virtual_cursor"===t.type){const n=t.deadZone;let o;if(e>=n&&(o=t.high),e<=-n&&(o=t.low),o){const s=(Math.abs(e)-n)/(1-n),a=s*s*t.sensitivity*this.deltaTime;"+x"===o?this.virtualCursor.x+=a:"-x"===o?this.virtualCursor.x-=a:"+y"===o?this.virtualCursor.y+=a:"-y"===o&&(this.virtualCursor.y-=a),this.virtualCursor.modified=!0}}}update(e){this.oldKeysPressed=this.keysPressedThisFrame,this.oldMouseDown=this.mouseDownThisFrame,this.keysPressedThisFrame=new Set,this.mouseDownThisFrame=!1,null===this.currentTime?this.deltaTime=0:this.deltaTime=e-this.currentTime,this.deltaTime=Math.max(Math.min(this.deltaTime,1e3),0),this.currentTime=e,this.animationFrame=requestAnimationFrame(this.update);const t=navigator.getGamepads();for(const e of t){if(null===e)continue;const t=h(e),n=this.gamepads.get(t);for(let t=0;t<e.buttons.length;t++){const o=e.buttons[t].value,s=n.buttonMappings[t];this.updateButton(o,s)}for(let t=0;t<e.axes.length;t++){const o=e.axes[t],s=n.axesMappings[t];this.updateButton(o,s)}}this._editor&&this._editor.update(t);for(const e of this.keysPressedThisFrame)this.oldKeysPressed.has(e)||this.dispatchKey(e,!0);for(const e of this.oldKeysPressed)this.keysPressedThisFrame.has(e)||this.dispatchKey(e,!1);this.mouseDownThisFrame&&!this.oldMouseDown?this.dispatchMouseDown(!0):!this.mouseDownThisFrame&&this.oldMouseDown&&this.dispatchMouseDown(!1),this.virtualCursor.modified&&(this.virtualCursor.modified=!1,this.virtualCursor.x>this.virtualCursor.maxX&&(this.virtualCursor.x=this.virtualCursor.maxX),this.virtualCursor.x<this.virtualCursor.minX&&(this.virtualCursor.x=this.virtualCursor.minX),this.virtualCursor.y>this.virtualCursor.maxY&&(this.virtualCursor.y=this.virtualCursor.maxY),this.virtualCursor.y<this.virtualCursor.minY&&(this.virtualCursor.y=this.virtualCursor.minY),this.dispatchMouseMove(this.virtualCursor.x,this.virtualCursor.y))}editor(){return this._editor||(this._editor=new v(this)),this._editor}}m.browserHasBrokenGamepadAPI=()=>!navigator.getGamepads||(!(!navigator.userAgent.includes("Firefox")||!navigator.userAgent.includes("Linux"))||!(!navigator.userAgent.includes("Firefox")||!navigator.userAgent.includes("Mac OS"))),m.setConsole=e=>o=e;const f=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)},b=e=>"gamepadlib-axis-".concat(e);class v extends EventTarget{constructor(e){super(),this.gamepadLib=e,this.root=Object.assign(document.createElement("div"),{className:"gamepadlib-root"}),this.selector=Object.assign(document.createElement("select"),{className:"gamepadlib-selector"}),this.content=Object.assign(document.createElement("div"),{className:"gamepadlib-content"}),this.root.appendChild(this.selector),this.root.appendChild(this.content),this.onSelectorChange=this.onSelectorChange.bind(this),this.onGamepadsChange=this.onGamepadsChange.bind(this),this.selector.onchange=this.onSelectorChange,this.gamepadLib.addEventListener("gamepadconnected",this.onGamepadsChange),this.gamepadLib.addEventListener("gamepaddisconnected",this.onGamepadsChange),this.buttonIdToElement=new Map,this.axisIdToElement=new Map,this.hidden=!1,this.msg=(e,t)=>e}onSelectorChange(){this.updateContent(),this.dispatchEvent(new CustomEvent("gamepad-changed"))}onGamepadsChange(){this.updateAllContent(),this.dispatchEvent(new CustomEvent("gamepad-changed"))}updateAllContent(){this.updateDropdown(),this.updateContent(),this.focus()}updateDropdown(){f(this.selector);const e=Array.from(this.gamepadLib.gamepads.entries());if(0!==e.length){this.selector.hidden=!1;for(const[t,n]of e){const e=document.createElement("option");e.textContent=t,e.value=t,this.selector.appendChild(e)}}else this.selector.hidden=!0}keyToString(e){return" "===e?this.msg("key-space"):"ArrowUp"===e?this.msg("key-up"):"ArrowDown"===e?this.msg("key-down"):"ArrowLeft"===e?this.msg("key-left"):"ArrowRight"===e?this.msg("key-right"):"Enter"===e?this.msg("key-enter"):e.toUpperCase()}createButtonMapping(e,t,{property:n="high",allowClick:o=!0}={}){const s=document.createElement("input");s.readOnly=!0,s.className="gamepadlib-keyinput",s.title=this.msg("keyinput-title"),s.dataset.index=t;const a=()=>{const o=e[t];s.dataset.empty=!1,"key"===o.type?null===o[n]?(s.value=this.msg("key-none"),s.dataset.empty=!0):s.value=this.keyToString(o[n]):"mousedown"===o.type?s.value=this.msg("key-click"):s.value="??? ".concat(o.type)},r=()=>{e[t]=i(e[t]),c=!1,s.blur(),a(),s.dispatchEvent(new CustomEvent("mapping-changed")),this.changed()};let c=!1;const l=()=>{s.dataset.acceptingInput=!1,c&&(c=!1,a())};return s.addEventListener("click",n=>{if(n.preventDefault(),c)if(o){e[t].type="mousedown",r()}else l();else s.value="...",s.dataset.acceptingInput=!0,c=!0}),s.addEventListener("keydown",o=>{if(c){o.preventDefault();const s=o.key;if(["Alt","Shift","Control"].includes(s))return;const a=e[t];1===s.length||["ArrowUp","ArrowDown","ArrowRight","ArrowLeft","Enter"].includes(s)?(a.type="key",a[n]=s):"Escape"!==s&&(a.type="key",a[n]=null),r()}else"Enter"===o.key&&(o.preventDefault(),o.target.click())}),s.addEventListener("blur",l),a(),s}createAxisMapping(e,t){const n=document.createElement("select");n.className="gamepadlib-axis-mapping",n.id=b(t),n.appendChild(Object.assign(document.createElement("option"),{textContent:this.msg("axis-none"),value:"none"})),n.appendChild(Object.assign(document.createElement("option"),{textContent:this.msg("axis-cursor"),value:"cursor"})),n.appendChild(Object.assign(document.createElement("option"),{textContent:"WASD",value:"wasd"})),n.appendChild(Object.assign(document.createElement("option"),{textContent:this.msg("axis-arrows"),value:"arrows"})),n.appendChild(Object.assign(document.createElement("option"),{textContent:this.msg("axis-custom"),value:"custom"}));const o=()=>{"key"===e[t].type||"mousedown"===e[t].type?null===e[t].high&&null===e[t].low&&null===e[t+1].high&&null===e[t+1].low?n.value="none":e[t].high===a[0].high&&e[t].low===a[0].low&&e[t+1].high===a[1].high&&e[t+1].low===a[1].low?n.value="wasd":e[t].high===s[0].high&&e[t].low===s[0].low&&e[t+1].high===s[1].high&&e[t+1].low===s[1].low?n.value="arrows":n.value="custom":"virtual_cursor"===e[t].type?n.value="cursor":n.value="none"};o();const c=document.createElement("div");c.className="gamepadlib-axis-circle-overlay";const l=()=>{if(f(c),"key"===e[t].type){const n=[this.createButtonMapping(e,t+1,{property:"low",allowClick:!1}),this.createButtonMapping(e,t,{property:"low",allowClick:!1}),this.createButtonMapping(e,t,{property:"high",allowClick:!1}),this.createButtonMapping(e,t+1,{property:"high",allowClick:!1})];for(const e of n)e.classList.add("gamepadlib-axis-mapper"),e.addEventListener("mapping-changed",o),c.appendChild(e)}};return l(),n.addEventListener("change",()=>{"custom"===n.value?"key"!==e[t].type&&(e[t]=i(s[0]),e[t+1]=i(s[1])):"arrows"===n.value?(e[t]=i(s[0]),e[t+1]=i(s[1])):"wasd"===n.value?(e[t]=i(a[0]),e[t+1]=i(a[1])):"cursor"===n.value?(e[t]=i(r[0]),e[t+1]=i(r[1])):(e[t]=i({type:"key",high:null,low:null}),e[t+1]=i({type:"key",high:null,low:null})),l(),this.changed()}),{circleOverlay:c,selector:n}}hasControllerSelected(){return!!this.selector.value}updateContent(){if(f(this.content),this.hidden)return;const e=this.selector.value;if(!e){const e=document.createElement("div");return e.textContent=this.msg("no-controllers"),void this.content.appendChild(e)}const t=this.gamepadLib.gamepads.get(e);if(!t){const t=document.createElement("div");return t.textContent="Cannot find controller: ".concat(e),void this.content.appendChild(t)}this.buttonIdToElement.clear(),this.axisIdToElement.clear();const n=document.createElement("div");n.className="gamepadlib-content-buttons";const o=t.buttonMappings;for(let e=0;e<o.length;e++){const t=document.createElement("div");t.className="gamepadlib-mapping",t.dataset.id=e;const s=document.createElement("label");s.className="gamepadlib-mapping-label",s.textContent=this.msg("button-n",{n:e});const a="gamepadlib-button-".concat(e);s.htmlFor=a;const r=document.createElement("div");r.className="gamepadlib-mapping-options";const i=this.createButtonMapping(o,e);i.id=a,r.appendChild(i),t.appendChild(s),t.appendChild(r),n.appendChild(t),this.buttonIdToElement.set(e,t)}const s=document.createElement("div");s.className="gamepadlib-content-axes";const a=t.axesMappings;for(let e=0;e<a.length;e+=2){const t=document.createElement("div");t.className="gamepadlib-axis";const n=document.createElement("label");n.textContent=this.msg("axes-a-b",{a:e,b:e+1}),n.htmlFor=b(e);const o=document.createElement("div");o.className="gamepadlib-axis-circle";const{circleOverlay:r,selector:i}=this.createAxisMapping(a,e);o.appendChild(r);const c=document.createElement("div");c.className="gamepadlib-axis-dot",o.appendChild(c),t.appendChild(n),t.appendChild(o),t.appendChild(i),s.appendChild(t),this.axisIdToElement.set(e,c)}this.content.appendChild(n),this.content.appendChild(s)}update(e){if(this.hidden)return;if(!this.selector.value)return;const t=Array.from(e).find(e=>e&&h(e)===this.selector.value);if(t){for(let e=0;e<t.buttons.length;e++){const n=this.buttonIdToElement.get(e);if(n){const o=t.buttons[e].value.toString();o!==n.dataset.value&&(n.dataset.value=o)}}for(let e=0;e<t.axes.length;e+=2){const n=this.axisIdToElement.get(e);if(n){const o=t.axes[e],s=t.axes[e+1]||0,a=75;n.style.transform="translate(-50%, -50%) translate(".concat(o*a,"px, ").concat(s*a,"px)")}}}}export(){const e=this.selector.value;if(!e)return null;const t=this.gamepadLib.gamepads.get(e);return t?{axes:t.axesMappings.map(l),buttons:t.buttonMappings.map(d)}:null}changed(){this.dispatchEvent(new CustomEvent("mapping-changed"))}hide(){this.hidden=!0,this.updateContent()}focus(){this.selector.value&&this.selector.focus()}generateEditor(){return this.hidden=!1,this.updateAllContent(),this.root}}t.default=m},1922:function(e,t,n){e.exports=n.p+"static/assets/dc05dad5bd29cfb425a6315c61be3193.svg"},1923:function(e,t,n){e.exports=n.p+"static/assets/1821649bb254ff5d93bb397ad646a23f.svg"},1924:function(e,t,n){"use strict";n.r(t);var o=n(1908);t.default=async e=>{Object(o.default)(e)}},1925:function(e,t,n){"use strict";n.r(t),t.default=async({addon:e,console:t})=>{if(!e.tab.redux.state)return t.warn("Redux is not available!");e.tab.redux.initialize(),e.tab.redux.addEventListener("statechanged",({detail:n})=>{const o=n;if(!o.action||"scratch-paint/clipboard/SET"!==o.action.type)return;const s=o.next.scratchPaint.clipboard.items;if(1!==s.length)return;const a=s[0];if(!Array.isArray(a)||"Raster"!==a[0])return t.log("copied element is vector");const r=a[1].source;e.tab.copyImage(r).then(()=>t.log("Image successfully copied")).catch(e=>t.error("Image could not be copied: ".concat(e)))})}},1926:function(e,t,n){"use strict";n.r(t);var o=n(1912);t.default=async function({addon:e,global:t,console:n,msg:s}){await e.tab.traps.getBlockly();const a={},r={opcode:"noop"};e.settings.get("motion")&&(a.motion_turnright=[r,{opcode:"motion_turnleft"}],a.motion_turnleft=[{opcode:"motion_turnright"},r],a.motion_setx=[r,{opcode:"motion_changexby",remap:{X:"DX"}},{opcode:"motion_sety",remap:{X:"Y"}},{opcode:"motion_changeyby",remap:{X:"DY"}}],a.motion_changexby=[{opcode:"motion_setx",remap:{DX:"X"}},r,{opcode:"motion_sety",remap:{DX:"Y"}},{opcode:"motion_changeyby",remap:{DX:"DY"}}],a.motion_sety=[{opcode:"motion_setx",remap:{Y:"X"}},{opcode:"motion_changexby",remap:{Y:"DX"}},r,{opcode:"motion_changeyby",remap:{Y:"DY"}}],a.motion_changeyby=[{opcode:"motion_setx",remap:{DY:"X"}},{opcode:"motion_changexby",remap:{DY:"DX"}},{opcode:"motion_sety",remap:{DY:"Y"}},r],a.motion_xposition=[r,{opcode:"motion_yposition"}],a.motion_yposition=[{opcode:"motion_xposition"},r]),e.settings.get("looks")&&(a.looks_seteffectto=[r,{opcode:"looks_changeeffectby",remap:{VALUE:"CHANGE"}}],a.looks_changeeffectby=[{opcode:"looks_seteffectto",remap:{CHANGE:"VALUE"}},r],a.looks_setsizeto=[r,{opcode:"looks_changesizeby",remap:{SIZE:"CHANGE"}}],a.looks_changesizeby=[{opcode:"looks_setsizeto",remap:{CHANGE:"SIZE"}},r],a.looks_costumenumbername=[r,{opcode:"looks_backdropnumbername"}],a.looks_backdropnumbername=[{opcode:"looks_costumenumbername"},r],a.looks_show=[r,{opcode:"looks_hide"}],a.looks_hide=[{opcode:"looks_show"},r],a.looks_nextcostume=[r,{opcode:"looks_nextbackdrop"}],a.looks_nextbackdrop=[{opcode:"looks_nextcostume"},r],a.looks_think=[r,{opcode:"looks_say"}],a.looks_say=[{opcode:"looks_think"},r],a.looks_thinkforsecs=[r,{opcode:"looks_sayforsecs"}],a.looks_sayforsecs=[{opcode:"looks_thinkforsecs"},r],a.looks_switchbackdropto=[r,{opcode:"looks_switchbackdroptoandwait"}],a.looks_switchbackdroptoandwait=[{opcode:"looks_switchbackdropto"},r]),e.settings.get("sound")&&(a.sound_play=[r,{opcode:"sound_playuntildone"}],a.sound_playuntildone=[{opcode:"sound_play"},r],a.sound_seteffectto=[r,{opcode:"sound_changeeffectby"}],a.sound_changeeffectby=[{opcode:"sound_seteffectto"},r],a.sound_setvolumeto=[r,{opcode:"sound_changevolumeby"}],a.sound_changevolumeby=[{opcode:"sound_setvolumeto"},r]),e.settings.get("event")&&(a.event_broadcast=[r,{opcode:"event_broadcastandwait"}],a.event_broadcastandwait=[{opcode:"event_broadcast"},r]),e.settings.get("control")&&(a.control_if=[r,{opcode:"control_if_else"}],a.control_if_else=[{opcode:"control_if",remap:{SUBSTACK2:"split"}},r],a.control_repeat_until=[r,{opcode:"control_wait_until",remap:{SUBSTACK:"split"}},{opcode:"control_forever",remap:{CONDITION:"split"}}],a.control_forever=[{opcode:"control_repeat_until"},r],a.control_wait_until=[{opcode:"control_repeat_until"},r]),e.settings.get("operator")&&(a.operator_equals=[{opcode:"operator_gt"},r,{opcode:"operator_lt"}],a.operator_gt=[r,{opcode:"operator_equals"},{opcode:"operator_lt"}],a.operator_lt=[{opcode:"operator_gt"},{opcode:"operator_equals"},r],a.operator_add=[r,{opcode:"operator_subtract"},{opcode:"operator_multiply"},{opcode:"operator_divide"},{opcode:"operator_mod"}],a.operator_subtract=[{opcode:"operator_add"},r,{opcode:"operator_multiply"},{opcode:"operator_divide"},{opcode:"operator_mod"}],a.operator_multiply=[{opcode:"operator_add"},{opcode:"operator_subtract"},r,{opcode:"operator_divide"},{opcode:"operator_mod"}],a.operator_divide=[{opcode:"operator_add"},{opcode:"operator_subtract"},{opcode:"operator_multiply"},r,{opcode:"operator_mod"}],a.operator_mod=[{opcode:"operator_add"},{opcode:"operator_subtract"},{opcode:"operator_multiply"},{opcode:"operator_divide"},r],a.operator_and=[r,{opcode:"operator_or"}],a.operator_or=[{opcode:"operator_and"},r]),e.settings.get("sensing")&&(a.sensing_mousex=[r,{opcode:"sensing_mousey"}],a.sensing_mousey=[{opcode:"sensing_mousex"},r]),e.settings.get("data")&&(a.data_setvariableto=[r,{opcode:"data_changevariableby",remapValueType:{VALUE:"math_number"}}],a.data_changevariableby=[{opcode:"data_setvariableto",remapValueType:{VALUE:"text"}},r],a.data_showvariable=[r,{opcode:"data_hidevariable"}],a.data_hidevariable=[{opcode:"data_showvariable"},r],a.data_showlist=[r,{opcode:"data_hidelist"}],a.data_hidelist=[{opcode:"data_showlist"},r],a.data_replaceitemoflist=[r,{opcode:"data_insertatlist"}],a.data_insertatlist=[{opcode:"data_replaceitemoflist"},r]),e.settings.get("extension")&&(a.pen_penDown=[r,{opcode:"pen_penUp"}],a.pen_penUp=[{opcode:"pen_penDown"},r],a.pen_setPenColorParamTo=[r,{opcode:"pen_changePenColorParamBy"}],a.pen_changePenColorParamBy=[{opcode:"pen_setPenColorParamTo"},r],a.pen_setPenHueToNumber=[r,{opcode:"pen_changePenHueBy"}],a.pen_changePenHueBy=[{opcode:"pen_setPenHueToNumber"},r],a.pen_setPenShadeToNumber=[r,{opcode:"pen_changePenShadeBy"}],a.pen_changePenShadeBy=[{opcode:"pen_setPenShadeToNumber"},r],a.pen_setPenSizeTo=[r,{opcode:"pen_changePenSizeBy"}],a.pen_changePenSizeBy=[{opcode:"pen_setPenSizeTo"},r],a.music_setTempo=[r,{opcode:"music_changeTempo"}],a.music_changeTempo=[{opcode:"music_setTempo"},r]),a.data_variable=[],a.data_listcontents=[];let i=-1;const c=(e,t)=>()=>{if("noop"===t.opcode)return;const n=e.workspace,s=Object(o.default)(e);s.setAttribute("type",t.opcode);const a=e.id,r=e.getParent();let i,c;if(r){i=r.getConnections_().find(t=>t.targetConnection&&t.targetConnection.sourceBlock_===e);const t=e.getConnections_().find(e=>e.targetConnection&&e.targetConnection.sourceBlock_===r);c=t.type}const l=[];if(t.remap)for(const e of Array.from(s.children)){const o=e.getAttribute("name"),a=t.remap[o];if(a)if("split"===a){const t=e.firstChild,o=t.id,a=n.getBlockById(o).getRelativeToSurfaceXY();t.setAttribute("x",Math.round(n.RTL?-a.x:a.x)),t.setAttribute("y",Math.round(a.y)),l.push(t),s.removeChild(e)}else e.setAttribute("name",a)}if(t.remapValueType)for(const e of Array.from(s.children)){const n=e.getAttribute("name"),o=t.remapValueType[n];if(o){const t=e.firstChild,n=t.firstChild;t.setAttribute("type",o),n.setAttribute("name","text"===o?"TEXT":"NUM")}}const d=n.undoStack_;d.length&&(d[d.length-1]._blockswitchingLastUndo=!0),e.dispose(),n.paste(s);for(const e of l)n.paste(e);const u=n.getBlockById(a);if(i){u.getConnections_().find(e=>e.type===c).connect(i)}setTimeout(()=>{const e=(()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!#$%()*+,-./:;=?@[]^_`{|}~";let t="";for(let n=0;n<20;n++)t+=e[Math.floor(Math.random()*e.length)];return t})();for(let t=d.length-1;t>=0&&!d[t]._blockswitchingLastUndo;t--)d[t].group=e},0)},l=function(t){if(e.self.disabled)return;e.settings.get("border")&&(i=t.length),this._originalCustomContextMenu&&this._originalCustomContextMenu.call(this,t);const n=a[this.type];for(const o of n){const n="noop"===o.opcode;if(n&&!e.settings.get("noop"))continue;const a=n?this.type:o.opcode,r=s(a);t.push({enabled:!0,text:r,callback:c(this,o)})}},d=e=>{const t=e.type;Object.prototype.hasOwnProperty.call(a,t)&&(e._customContextMenuInjected||(e._customContextMenuInjected=!0,e.customContextMenu&&(e._originalCustomContextMenu=e.customContextMenu),e.customContextMenu=l))},u=e=>{if("create"===e.type)for(const t of e.ids){const e=Blockly.getMainWorkspace().getBlockById(t);e&&d(e)}},p=()=>{const e=Blockly.getMainWorkspace();if(e._blockswitchingInjected)return;h.observe(document.querySelector(".blocklyWidgetDiv"),{childList:!0}),e._blockswitchingInjected=!0,e.getAllBlocks().forEach(d),e.addChangeListener(u);const t=document.querySelector('[class^="language-selector_language-select"]');t&&t.addEventListener("change",()=>{setTimeout(p)})},h=new MutationObserver(t=>{if(!e.self.disabled)for(const e of t)for(const t of e.addedNodes)if(t.classList.contains("blocklyContextMenu")){if(-1===i)continue;const e=t.children[i];e&&(e.style.paddingTop="2px",e.style.borderTop="1px solid hsla(0, 0%, 0%, 0.15)"),i=-1}});if("editor"===e.tab.editorMode){const e=setInterval(()=>{Blockly.getMainWorkspace()&&(p(),clearInterval(e))},100)}e.tab.addEventListener("urlChange",()=>"editor"===e.tab.editorMode&&p())}},1927:function(e,t,n){"use strict";n.r(t),t.default=async function({addon:e,global:t,console:n,msg:o}){const s=[o("export_selected_to_SVG"),o("export_all_to_SVG"),o("export_selected_to_PNG"),o("export_all_to_PNG")];function a(t){if(2===t.button){let n=t.target.closest("[data-id]"),a=!n&&t.target.closest("svg.blocklySvg");if(n||a){(n&&n.getAttribute("data-id")||a)&&setTimeout(async()=>{let t=document.querySelector("div.blocklyWidgetDiv");if(!t)return;let n=t.querySelector("div.blocklyContextMenu");n&&(a&&s.forEach((t,s)=>{const a=document.createElement("div");a.id="blocks2imgCommand".concat(s+1),a.classList.add("goog-menuitem","blocks2img"),"rtl"===e.tab.direction&&a.classList.add("goog-menuitem-rtl"),a.onmouseenter=()=>a.classList.add("goog-menuitem-highlight"),a.onmouseleave=()=>a.classList.remove("goog-menuitem-highlight"),a.style.userSelect="none",0===s&&(a.style.borderTop="1px solid hsla(0, 0%, 0%, 0.15)",a.style.borderBottom="none",a.style.paddingTop="4px",a.style.paddingBottom="3px");const r=document.createElement("div");r.classList.add("goog-menuitem-content"),r.style.userSelect="user-select: none",r.textContent=t,a.append(r),a.onclick=()=>{!function(){const e=Blockly.getMainWorkspace().getToolbox().HtmlDiv;e.dispatchEvent(new MouseEvent("mousedown",{relatedTarget:e,bubbles:!0})),e.dispatchEvent(new MouseEvent("mouseup",{relatedTarget:e,bubbles:!0}))}(),function(e,t,n){let s="export3"===e.command||"export4"===e.command,a=new Map;a.set("repeat.svg","data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIxLjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9InJlcGVhdCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiCgkgdmlld0JveD0iMCAwIDI0IDI0IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyNCAyNDsiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPgoJLnN0MHtmaWxsOiNDRjhCMTc7fQoJLnN0MXtmaWxsOiNGRkZGRkY7fQo8L3N0eWxlPgo8dGl0bGU+cmVwZWF0PC90aXRsZT4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTIzLjMsMTFjLTAuMywwLjYtMC45LDEtMS41LDFoLTEuNmMtMC4xLDEuMy0wLjUsMi41LTEuMSwzLjZjLTAuOSwxLjctMi4zLDMuMi00LjEsNC4xCgljLTEuNywwLjktMy42LDEuMi01LjUsMC45Yy0xLjgtMC4zLTMuNS0xLjEtNC45LTIuM2MtMC43LTAuNy0wLjctMS45LDAtMi42YzAuNi0wLjYsMS42LTAuNywyLjMtMC4ySDdjMC45LDAuNiwxLjksMC45LDIuOSwwLjkKCXMxLjktMC4zLDIuNy0wLjljMS4xLTAuOCwxLjgtMi4xLDEuOC0zLjVoLTEuNWMtMC45LDAtMS43LTAuNy0xLjctMS43YzAtMC40LDAuMi0wLjksMC41LTEuMmw0LjQtNC40YzAuNy0wLjYsMS43LTAuNiwyLjQsMEwyMyw5LjIKCUMyMy41LDkuNywyMy42LDEwLjQsMjMuMywxMXoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTIxLjgsMTFoLTIuNmMwLDEuNS0wLjMsMi45LTEsNC4yYy0wLjgsMS42LTIuMSwyLjgtMy43LDMuNmMtMS41LDAuOC0zLjMsMS4xLTQuOSwwLjhjLTEuNi0wLjItMy4yLTEtNC40LTIuMQoJYy0wLjQtMC4zLTAuNC0wLjktMC4xLTEuMmMwLjMtMC40LDAuOS0wLjQsMS4yLTAuMWwwLDBjMSwwLjcsMi4yLDEuMSwzLjQsMS4xczIuMy0wLjMsMy4zLTFjMC45LTAuNiwxLjYtMS41LDItMi42CgljMC4zLTAuOSwwLjQtMS44LDAuMi0yLjhoLTIuNGMtMC40LDAtMC43LTAuMy0wLjctMC43YzAtMC4yLDAuMS0wLjMsMC4yLTAuNGw0LjQtNC40YzAuMy0wLjMsMC43LTAuMywwLjksMEwyMiw5LjgKCWMwLjMsMC4zLDAuNCwwLjYsMC4zLDAuOVMyMiwxMSwyMS44LDExeiIvPgo8L3N2Zz4K"),a.set("green-flag.svg","data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIxLjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9ImdyZWVuZmxhZyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiCgkgdmlld0JveD0iMCAwIDI0IDI0IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyNCAyNDsiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPgoJLnN0MHtmaWxsOiM0NTk5M0Q7fQoJLnN0MXtmaWxsOiM0Q0JGNTY7fQo8L3N0eWxlPgo8dGl0bGU+Z3JlZW5mbGFnPC90aXRsZT4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTIwLjgsMy43Yy0wLjQtMC4yLTAuOS0wLjEtMS4yLDAuMmMtMiwxLjYtNC44LDEuNi02LjgsMGMtMi4zLTEuOS01LjYtMi4zLTguMy0xVjIuNWMwLTAuNi0wLjUtMS0xLTEKCXMtMSwwLjQtMSwxdjE4LjhjMCwwLjUsMC41LDEsMSwxaDAuMWMwLjUsMCwxLTAuNSwxLTF2LTYuNGMxLTAuNywyLjEtMS4yLDMuNC0xLjNjMS4yLDAsMi40LDAuNCwzLjQsMS4yYzIuOSwyLjMsNywyLjMsOS44LDAKCWMwLjMtMC4yLDAuNC0wLjUsMC40LTAuOVY0LjdDMjEuNiw0LjIsMjEuMywzLjgsMjAuOCwzLjd6IE0yMC41LDEzLjlDMjAuNSwxMy45LDIwLjUsMTMuOSwyMC41LDEzLjlDMTgsMTYsMTQuNCwxNiwxMS45LDE0CgljLTEuMS0wLjktMi41LTEuNC00LTEuNGMtMS4yLDAuMS0yLjMsMC41LTMuNCwxLjFWNEM3LDIuNiwxMCwyLjksMTIuMiw0LjZjMi40LDEuOSw1LjcsMS45LDguMSwwYzAuMSwwLDAuMSwwLDAuMiwwCgljMCwwLDAuMSwwLjEsMC4xLDAuMUwyMC41LDEzLjl6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yMC42LDQuOGwtMC4xLDkuMWMwLDAsMCwwLjEsMCwwLjFjLTIuNSwyLTYuMSwyLTguNiwwYy0xLjEtMC45LTIuNS0xLjQtNC0xLjRjLTEuMiwwLjEtMi4zLDAuNS0zLjQsMS4xVjQKCUM3LDIuNiwxMCwyLjksMTIuMiw0LjZjMi40LDEuOSw1LjcsMS45LDguMSwwYzAuMSwwLDAuMSwwLDAuMiwwQzIwLjUsNC43LDIwLjYsNC43LDIwLjYsNC44eiIvPgo8L3N2Zz4K"),a.set("rotate-left.svg","data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIGlkPSJyb3RhdGUtY2xvY2t3aXNlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHN0eWxlPi5jbHMtMXtmaWxsOiMzZDc5Y2M7fS5jbHMtMntmaWxsOiNmZmY7fTwvc3R5bGU+PHRpdGxlPnJvdGF0ZS1jbG9ja3dpc2U8L3RpdGxlPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTIwLjM0LDE4LjIxYTEwLjI0LDEwLjI0LDAsMCwxLTguMSw0LjIyLDIuMjYsMi4yNiwwLDAsMS0uMTYtNC41MmgwYTUuNTgsNS41OCwwLDAsMCw0LjI1LTIuNTMsNS4wNiw1LjA2LDAsMCwwLC41NC00LjYyQTQuMjUsNC4yNSwwLDAsMCwxNS41NSw5YTQuMzEsNC4zMSwwLDAsMC0yLS44QTQuODIsNC44MiwwLDAsMCwxMC40LDlsMS4xMiwxLjQxQTEuNTksMS41OSwwLDAsMSwxMC4zNiwxM0gyLjY3YTEuNTYsMS41NiwwLDAsMS0xLjI2LS42M0ExLjU0LDEuNTQsMCwwLDEsMS4xMywxMUwyLjg1LDMuNTdBMS41OSwxLjU5LDAsMCwxLDQuMzgsMi40LDEuNTcsMS41NywwLDAsMSw1LjYyLDNMNi43LDQuMzVhMTAuNjYsMTAuNjYsMCwwLDEsNy43Mi0xLjY4QTkuODgsOS44OCwwLDAsMSwxOSw0LjgxLDkuNjEsOS42MSwwLDAsMSwyMS44Myw5LDEwLjA4LDEwLjA4LDAsMCwxLDIwLjM0LDE4LjIxWiIvPjxwYXRoIGNsYXNzPSJjbHMtMiIgZD0iTTE5LjU2LDE3LjY1YTkuMjksOS4yOSwwLDAsMS03LjM1LDMuODMsMS4zMSwxLjMxLDAsMCwxLS4wOC0yLjYyLDYuNTMsNi41MywwLDAsMCw1LTIuOTIsNi4wNSw2LjA1LDAsMCwwLC42Ny01LjUxLDUuMzIsNS4zMiwwLDAsMC0xLjY0LTIuMTYsNS4yMSw1LjIxLDAsMCwwLTIuNDgtMUE1Ljg2LDUuODYsMCwwLDAsOSw4Ljg0TDEwLjc0LDExYS41OS41OSwwLDAsMS0uNDMsMUgyLjdhLjYuNiwwLDAsMS0uNi0uNzVMMy44MSwzLjgzYS41OS41OSwwLDAsMSwxLS4yMWwxLjY3LDIuMWE5LjcxLDkuNzEsMCwwLDEsNy43NS0yLjA3LDguODQsOC44NCwwLDAsMSw0LjEyLDEuOTIsOC42OCw4LjY4LDAsMCwxLDIuNTQsMy43MkE5LjE0LDkuMTQsMCwwLDEsMTkuNTYsMTcuNjVaIi8+PC9zdmc+"),a.set("rotate-right.svg","data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIGlkPSJyb3RhdGUtY291bnRlci1jbG9ja3dpc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDI0IDI0Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzNkNzljYzt9LmNscy0ye2ZpbGw6I2ZmZjt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPnJvdGF0ZS1jb3VudGVyLWNsb2Nrd2lzZTwvdGl0bGU+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNMjIuNjgsMTIuMmExLjYsMS42LDAsMCwxLTEuMjcuNjNIMTMuNzJhMS41OSwxLjU5LDAsMCwxLTEuMTYtMi41OGwxLjEyLTEuNDFhNC44Miw0LjgyLDAsMCwwLTMuMTQtLjc3LDQuMzEsNC4zMSwwLDAsMC0yLC44LDQuMjUsNC4yNSwwLDAsMC0xLjM0LDEuNzMsNS4wNiw1LjA2LDAsMCwwLC41NCw0LjYyQTUuNTgsNS41OCwwLDAsMCwxMiwxNy43NGgwYTIuMjYsMi4yNiwwLDAsMS0uMTYsNC41MkExMC4yNSwxMC4yNSwwLDAsMSwzLjc0LDE4LDEwLjE0LDEwLjE0LDAsMCwxLDIuMjUsOC43OCw5LjcsOS43LDAsMCwxLDUuMDgsNC42NCw5LjkyLDkuOTIsMCwwLDEsOS42NiwyLjVhMTAuNjYsMTAuNjYsMCwwLDEsNy43MiwxLjY4bDEuMDgtMS4zNWExLjU3LDEuNTcsMCwwLDEsMS4yNC0uNiwxLjYsMS42LDAsMCwxLDEuNTQsMS4yMWwxLjcsNy4zN0ExLjU3LDEuNTcsMCwwLDEsMjIuNjgsMTIuMloiLz48cGF0aCBjbGFzcz0iY2xzLTIiIGQ9Ik0yMS4zOCwxMS44M0gxMy43N2EuNTkuNTksMCwwLDEtLjQzLTFsMS43NS0yLjE5YTUuOSw1LjksMCwwLDAtNC43LTEuNTgsNS4wNyw1LjA3LDAsMCwwLTQuMTEsMy4xN0E2LDYsMCwwLDAsNywxNS43N2E2LjUxLDYuNTEsMCwwLDAsNSwyLjkyLDEuMzEsMS4zMSwwLDAsMS0uMDgsMi42Miw5LjMsOS4zLDAsMCwxLTcuMzUtMy44MkE5LjE2LDkuMTYsMCwwLDEsMy4xNyw5LjEyLDguNTEsOC41MSwwLDAsMSw1LjcxLDUuNCw4Ljc2LDguNzYsMCwwLDEsOS44MiwzLjQ4YTkuNzEsOS43MSwwLDAsMSw3Ljc1LDIuMDdsMS42Ny0yLjFhLjU5LjU5LDAsMCwxLDEsLjIxTDIyLDExLjA4QS41OS41OSwwLDAsMSwyMS4zOCwxMS44M1oiLz48L3N2Zz4="),a.set("dropdown-arrow.svg","data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=");let r=document.createElement("svg");r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.setAttribute("xmlns:html","http://www.w3.org/1999/xhtml"),r.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),r.setAttribute("version","1.1");let i=document.createElement("style");i.textContent='\n    .blocklyText {\n        fill: #fff;\n        font-family: "Helvetica Neue", Helvetica, sans-serif;\n        font-size: 12pt;\n        font-weight: 500;\n    }\n    .blocklyNonEditableText>text, .blocklyEditableText>text {\n        fill: #575E75;\n    }\n    .blocklyDropdownText {\n        fill: #fff !important;\n    }\n    ',r="export1"===e.command||"export3"===e.command?function(e,t,n){let s=document.querySelector("svg.blocklySvg g.blocklySelected");if(!s)throw alert(o("error_blocks_unselected")),new Error("Can not found selected blocks");s=s.cloneNode(!0);let a=s.getAttribute("data-shapes");return s.setAttribute("transform","translate(0,".concat("hat"===a?"18":"0",") ").concat(n?"scale(2)":"")),e.append(t),e.append(s),e}(r,i,s):function(e,t,n){var s,a;let r=document.querySelector("svg.blocklySvg g.blocklyBlockCanvas");r=r.cloneNode(!0);let i=[],c=[];if(null===(s=r)||void 0===s||null===(a=s.childNodes)||void 0===a||!a.length)throw alert(o("error_blocks_not_added")),new Error("Workspace is empty");return r.childNodes.forEach(e=>{let t=e.getAttribute("transform").match(/translate\((.*?),(.*?)\)/)[1]||0,o=e.getAttribute("transform").match(/translate\((.*?),(.*?)\)/)[2]||0;i.push(t*(n?2:1)),c.push(o*(n?2:1)),e.style.display=""}),r.setAttribute("transform","translate(".concat(-Math.min(...i),",").concat(-Math.min(...c)+18*(n?2:1),") ").concat(n?"scale(2)":"")),e.append(t),e.append(r),e}(r,i,s);Array.from(r.getElementsByTagName("text")).forEach(e=>{e.innerHTML=e.innerHTML.replace(/&nbsp;/g," ")});let c=Array.from(r.getElementsByTagName("image")),l=window.location.origin;c.forEach(e=>{let t=a.get(e.getAttribute("xlink:href").substring(e.getAttribute("xlink:href").lastIndexOf("/")+1));t?e.setAttribute("xlink:href",t):0===e.getAttribute("xlink:href").indexOf("/static/")?e.setAttribute("xlink:href",l+e.getAttribute("xlink:href").slice(0)):0===e.getAttribute("xlink:href").indexOf("./static/")?e.setAttribute("xlink:href",l+e.getAttribute("xlink:href").slice(1)):0===e.getAttribute("xlink:href").indexOf("static/")&&e.setAttribute("xlink:href",l+"/"+e.getAttribute("xlink:href"))});let d=document.createElement("div");d.appendChild(r),"export1"===e.command||"export2"===e.command?function(e){const t=document.createElement("a");document.body.appendChild(t);const n=new Blob([e],{type:"text"}),o=window.URL.createObjectURL(n);t.href=o;const s=new Date,a="".concat(s.toLocaleDateString(),"-").concat(s.toLocaleTimeString());t.download="block_".concat(a,".svg"),t.click(),window.URL.revokeObjectURL(o),document.body.removeChild(t)}(d.innerHTML):function(e){const t=document.createElement("div");t.appendChild(e);const n=document.createElement("iframe");document.body.append(n),n.contentDocument.write(t.innerHTML);let{width:o,height:s}=n.contentDocument.body.querySelector("svg g").getBoundingClientRect();s+=40,e.setAttribute("width",o+"px"),e.setAttribute("height",s+"px");let a=document.createElement("canvas"),r=a.getContext("2d"),i=document.createElement("img");i.setAttribute("src","data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.innerHTML)))),i.onload=function(){a.height=i.height,a.width=i.width,r.drawImage(i,0,0,i.width,i.height);let e=a.toDataURL("image/png"),t=document.createElement("a");const o=new Date,s="".concat(o.toLocaleDateString(),"-").concat(o.toLocaleTimeString());t.download="block_".concat(s,".png"),t.href=e,t.click(),n.remove()}}(r)}({command:"export"+(s+1)})},n.append(a)}),n.children.length<15&&(n.style.maxHeight="none",t.style.height=n.getBoundingClientRect().height+12+"px",n.style.maxHeight=""))},1)}}}document.addEventListener("mousedown",e=>{e.target.closest("g.blocklyWorkspace")&&a(e)},!0)}},1928:function(e,t,n){"use strict";n.r(t),t.default=async function({addon:e,global:t,console:n}){const o=await e.tab.traps.getBlockly(),s=e.settings.get("watch");o.BlockSvg.START_HAT_HEIGHT=31,o.BlockSvg.START_HAT_PATH="c2.6,-2.3 5.5,-4.3 8.5,-6.2c-1,-12.5 5.3,-23.3 8.4,-24.8c3.7,-1.8 16.5,13.1 18.4,15.4c8.4,-1.3 17,-1.3 25.4,0c1.9,-2.3 14.7,-17.2 18.4,-15.4c3.1,1.5 9.4,12.3 8.4,24.8c3,1.8 5.9,3.9 8.5,6.1",o.BlockSvg.TOP_LEFT_CORNER_DEFINE_HAT="c0,-7.1 3.7,-13.3 9.3,-16.9c1.7,-7.5 5.4,-13.2 7.6,-14.2c2.6,-1.3 10,6 14.6,11.1h33c4.6,-5.1 11.9,-12.4 14.6,-11.1c1.9,0.9 4.9,5.2 6.8,11.1c2.6,0,5.2,0,7.8,0",o.BlockSvg.prototype.renderCatFace_=function(){this.catPath_.svgFace.setAttribute("fill","#000000");var e=o.utils.createSvgElement("path",{},this.svgFace_);e.setAttribute("d","M25.2-1.1c0.1,0,0.2,0,0.2,0l8.3-2.1l-7-4.8c-0.5-0.3-1.1-0.2-1.4,0.3s-0.2,1.1,0.3,1.4L29-4.1l-4,1c-0.5,0.1-0.9,0.7-0.7,1.2C24.3-1.4,24.7-1.1,25.2-1.1z"),e.setAttribute("fill-opacity","0"),this.catPath_.svgFace.closedEye=e;var t=o.utils.createSvgElement("path",{},this.svgFace_);t.setAttribute("d","M62.4-1.1c-0.1,0-0.2,0-0.2,0l-8.3-2.1l7-4.8c0.5-0.3,1.1-0.2,1.4,0.3s0.2,1.1-0.3,1.4l-3.4,2.3l4,1c0.5,0.1,0.9,0.7,0.7,1.2C63.2-1.4,62.8-1.1,62.4-1.1z"),t.setAttribute("fill-opacity","0"),this.catPath_.svgFace.closedEye2=t;var n=o.utils.createSvgElement("circle",{},this.svgFace_);n.setAttribute("cx","59.2"),n.setAttribute("cy","-3.3"),n.setAttribute("r","3.4"),n.setAttribute("fill-opacity","0.6"),this.catPath_.svgFace.eye=n;var s=o.utils.createSvgElement("circle",{},this.svgFace_);s.setAttribute("cx","29.1"),s.setAttribute("cy","-3.3"),s.setAttribute("r","3.4"),s.setAttribute("fill-opacity","0.6"),this.catPath_.svgFace.eye2=s;var a=o.utils.createSvgElement("path",{},this.svgFace_);a.setAttribute("d","M45.6,0.1c-0.9,0-1.7-0.3-2.3-0.9c-0.6,0.6-1.3,0.9-2.2,0.9c-0.9,0-1.8-0.3-2.3-0.9c-1-1.1-1.1-2.6-1.1-2.8c0-0.5,0.5-1,1-1l0,0c0.6,0,1,0.5,1,1c0,0.4,0.1,1.7,1.4,1.7c0.5,0,0.7-0.2,0.8-0.3c0.3-0.3,0.4-1,0.4-1.3c0-0.1,0-0.1,0-0.2c0-0.5,0.5-1,1-1l0,0c0.5,0,1,0.4,1,1c0,0,0,0.1,0,0.2c0,0.3,0.1,0.9,0.4,1.2C44.8-2.2,45-2,45.5-2s0.7-0.2,0.8-0.3c0.3-0.4,0.4-1.1,0.3-1.3c0-0.5,0.4-1,0.9-1.1c0.5,0,1,0.4,1.1,0.9c0,0.2,0.1,1.8-0.8,2.8C47.5-0.4,46.8,0.1,45.6,0.1z"),a.setAttribute("fill-opacity","0.6"),this.catPath_.ear.setAttribute("d","M73.1-15.6c1.7-4.2,4.5-9.1,5.8-8.5c1.6,0.8,5.4,7.9,5,15.4c0,0.6-0.7,0.7-1.1,0.5c-3-1.6-6.4-2.8-8.6-3.6C72.8-12.3,72.4-13.7,73.1-15.6z"),this.catPath_.ear.setAttribute("fill","#FFD5E6"),this.catPath_.ear2.setAttribute("d","M22.4-15.6c-1.7-4.2-4.5-9.1-5.8-8.5c-1.6,0.8-5.4,7.9-5,15.4c0,0.6,0.7,0.7,1.1,0.5c3-1.6,6.4-2.8,8.6-3.6C22.8-12.3,23.2-13.7,22.4-15.6z"),this.catPath_.ear2.setAttribute("fill","#FFD5E6")},o.BlockSvg.prototype.initCatStuff=function(){if(!this.hasInitCatStuff){this.hasInitCatStuff=!0;var e="c-1,-12.5 5.3,-23.3 8.4,-24.8c3.7,-1.8 16.5,13.1 18.4,15.4",t="c-5.8,-4.8 -8,-18 -4.9,-19.5c3.7,-1.8 24.5,11.1 31.7,10.1",n="c1.9,-2.3 14.7,-17.2 18.4,-15.4c3.1,1.5 9.4,12.3 8.4,24.8",s="c7.2,1 28,-11.9 31.7,-10.1c3.1,1.5 0.9,14.7 -4.9,19.5",a="c0,-7.1 3.7,-13.3 9.3,-16.9c1.7,-7.5 5.4,-13.2 7.6,-14.2c2.6,-1.3 10,6 14.6,11.1",r="h33c4.6,-5.1 11.9,-12.4 14.6,-11.1c1.9,0.9 4.9,5.2 6.8,11.1c2.6,0,5.2,0,7.8,0",i="c0,-4.6 1.6,-8.9 4.3,-12.3c-2.4,-5.6 -2.9,-12.4 -0.7,-13.4c2.1,-1 9.6,2.6 17,5.8c2.6,0 6.2,0 10.9,0",c="c0,0 25.6,0 44,0c7.4,-3.2 14.8,-6.8 16.9,-5.8c1.2,0.6 1.6,2.9 1.3,5.8",l=this;this.catPath_.ear=o.utils.createSvgElement("path",{},this.catPath_),this.catPath_.ear2=o.utils.createSvgElement("path",{},this.catPath_),this.RTL&&(this.catPath_.ear.setAttribute("transform","scale(-1 1)"),this.catPath_.ear2.setAttribute("transform","scale(-1 1)")),this.catPath_.addEventListener("mouseenter",(function(e){clearTimeout(l.blinkFn),e.target.svgFace.eye&&(e.target.svgFace.eye.setAttribute("fill-opacity","0"),e.target.svgFace.eye2.setAttribute("fill-opacity","0"),e.target.svgFace.closedEye.setAttribute("fill-opacity","0.6"),e.target.svgFace.closedEye2.setAttribute("fill-opacity","0.6")),l.blinkFn=setTimeout((function(){e.target.svgFace.eye&&(e.target.svgFace.eye.setAttribute("fill-opacity","0.6"),e.target.svgFace.eye2.setAttribute("fill-opacity","0.6"),e.target.svgFace.closedEye.setAttribute("fill-opacity","0"),e.target.svgFace.closedEye2.setAttribute("fill-opacity","0"))}),100)})),this.catPath_.ear.addEventListener("mouseenter",(function(){clearTimeout(l.earFn),clearTimeout(l.ear2Fn),l.catPath_.ear.setAttribute("fill-opacity","0"),l.catPath_.ear2.setAttribute("fill-opacity","");var o=l.catPath_.svgBody.getAttribute("d");o=(o=(o=(o=o.replace(n,s)).replace(r,c)).replace(t,e)).replace(i,a),l.catPath_.svgBody.setAttribute("d",o),l.earFn=setTimeout((function(){l.catPath_.ear.setAttribute("fill-opacity","");var e=l.catPath_.svgBody.getAttribute("d");e=(e=e.replace(s,n)).replace(c,r),l.catPath_.svgBody.setAttribute("d",e)}),50)})),this.catPath_.ear2.addEventListener("mouseenter",(function(){clearTimeout(l.earFn),clearTimeout(l.ear2Fn),l.catPath_.ear2.setAttribute("fill-opacity","0"),l.catPath_.ear.setAttribute("fill-opacity","");var o=l.catPath_.svgBody.getAttribute("d");o=(o=(o=(o=o.replace(e,t)).replace(a,i)).replace(s,n)).replace(c,r),l.catPath_.svgBody.setAttribute("d",o),l.ear2Fn=setTimeout((function(){l.catPath_.ear2.setAttribute("fill-opacity","");var n=l.catPath_.svgBody.getAttribute("d");n=(n=n.replace(t,e)).replace(i,a),l.catPath_.svgBody.setAttribute("d",n)}),50)})),this.RTL&&(this.svgFace_.style.transform="translate(-87px, 0px)"),this.shouldWatchMouse()&&(this.windowListener=function(e){var t=Date.now();if(!(t<l.lastCallTime+l.CALL_FREQUENCY_MS)&&(l.lastCallTime=t,l.shouldWatchMouse()&&l.workspace)){var n=l.getCatFacePosition(),o={x:e.x/l.workspace.scale,y:e.y/l.workspace.scale},s=o.x-n.x,a=o.y-n.y,r=Math.atan2(s,a),i=Math.sqrt(s*s+a*a),c=i/(i+1),d=10/Math.sqrt(Math.pow(5*Math.cos(r),2)+Math.pow(2*Math.sin(r),2));s=d*c*Math.sin(r),a=d*c*Math.cos(r),l.RTL&&(s-=87),l.svgFace_.style.transform="translate("+s+"px, "+a+"px)"}},document.addEventListener("mousemove",this.windowListener))}};let a=null;o.BlockSvg.prototype.getCatFacePosition=function(){a||(a=this.workspace.getParentSvg().getBoundingClientRect());var e={x:a.x,y:a.y};!this.isInFlyout&&this.workspace.getFlyout()&&(e.x+=this.workspace.getFlyout().getWidth()),e.x+=this.workspace.scrollX,e.y+=this.workspace.scrollY;var t=this.getRelativeToSurfaceXY(this.svgGroup_);return this.RTL&&(t.x=this.workspace.getWidth()-t.x-this.width),t.x+=e.x/this.workspace.scale,t.y+=e.y/this.workspace.scale,t.x-=43.5,t.y-=4,t.x+=60,this.RTL&&(t.x=screen.width-t.x),t},o.BlockSvg.prototype.shouldWatchMouse=function(){if(!s)return!1;var e=this.getCatFacePosition();var t=e.x>-50&&e.x-50<screen.width/this.workspace.scale,n=e.y>-50&&e.y-50<screen.height/this.workspace.scale;return this.startHat_&&!this.isGlowingStack_&&t&&n};const r=o.BlockSvg.prototype.renderDraw_;o.BlockSvg.prototype.renderDraw_=function(...e){this.svgFace_||this.sa_catBlockConstructor();const t=r.call(this,...e);return this.outputConnection||this.previousConnection||this.initCatStuff(),this.startHat_&&!this.svgFace_.firstChild&&this.renderCatFace_(),t};const i=o.BlockSvg.prototype.dispose;o.BlockSvg.prototype.dispose=function(...e){return clearTimeout(this.blinkFn),clearTimeout(this.earFn),clearTimeout(this.ear2Fn),this.windowListener&&document.removeEventListener("mousemove",this.windowListener),i.call(this,...e)};const c=o.BlockSvg.prototype.setGlowStack;o.BlockSvg.prototype.setGlowStack=function(e){return this.windowListener&&(e?(document.removeEventListener("mousemove",this.windowListener),this.workspace&&this.svgFace_.style&&(this.RTL?this.svgFace_.style.transform="translate(-87px, 0px)":this.svgFace_.style.transform="")):document.addEventListener("mousemove",this.windowListener)),c.call(this,e)},o.BlockSvg.prototype.sa_catBlockConstructor=function(){this.catPath_=o.utils.createSvgElement("g",{},this.svgGroup_),this.svgFace_=o.utils.createSvgElement("g",{},this.catPath_),this.catPath_.svgFace=this.svgFace_,this.catPath_.svgBody=this.svgPath_,this.lastCallTime=0,this.CALL_FREQUENCY_MS=60};const l=o.getMainWorkspace();if(l){const t=e.tab.traps.vm;t.editingTarget&&t.emitWorkspaceUpdate();const n=l.getFlyout();if(n){const e=n.getWorkspace();o.Xml.clearWorkspaceAndLoadFromXml(o.Xml.workspaceToDom(e),e),l.getToolbox().refreshSelection(),l.toolboxRefreshEnabled_=!0}}}},1929:function(e,t,n){"use strict";n.r(t),t.default=async function({addon:e,global:t,console:n,msg:o}){const s=e.tab.traps.vm;e.tab.redux.state&&"small"===e.tab.redux.state.scratchGui.stageSize.stageSize&&document.body.classList.add("sa-clones-small"),document.addEventListener("click",e=>{e.target.closest("[class*='stage-header_stage-button-first']")?document.body.classList.add("sa-clones-small"):e.target.closest("[class*='stage-header_stage-button-last']")&&document.body.classList.remove("sa-clones-small")},{capture:!0});let a=document.createElement("div");e.tab.displayNoneWhileDisabled(a);let r=document.createElement("div"),i=document.createElement("span"),c=document.createElement("span");a.className="clone-container-container",r.className="clone-container",i.className="clone-count",c.className="clone-icon",a.appendChild(c),a.appendChild(r),r.appendChild(i);let l=0;const d=Array(301).fill().map((e,t)=>o("clones",{cloneCount:t}));s.runtime.on("targetWasRemoved",e=>{e.isOriginal&&s.runtime.changeCloneCounter(1)});const u=s.runtime.constructor.prototype._step;for(s.runtime.constructor.prototype._step=function(...e){const t=u.call(this,...e);return function(){const e=s.runtime._cloneCounter;e!==l&&(a.dataset.count=l=e,i.dataset.str=d[e]||o("clones",{cloneCount:e}),a.style.display=0===e?"none":"flex")}(),t};;){let t=await e.tab.waitForElement('[class*="controls_controls-container"]',{markAsSeen:!0,reduxEvents:["scratch-gui/mode/SET_PLAYER","fontsLoaded/SET_FONTS_LOADED","scratch-gui/locales/SELECT_LOCALE"]});"editor"===e.tab.editorMode&&t.appendChild(a)}}},1930:function(e,t,n){"use strict";n.r(t);var o=n(1909),s=n(1910),a=n(1911);t.default=async({addon:e,console:t,msg:n})=>{let r;const i=new s.a(250),c=t=>{let n;const o=e.tab.redux.state;if(o.scratchPaint.modals.fillColor)n="fill";else{if(!o.scratchPaint.modals.strokeColor)return;n="stroke"}const s=["primary","secondary"][o.scratchPaint.fillMode.colorIndex],r=o.scratchPaint.color["".concat(n,"Color")][s];if(null!==r&&"scratch-paint/style-path/mixed"!==r)return Object(a.a)(r).toHexString()},l=(t,n)=>{if(t=Object(o.b)(t),!e.tab.redux.state||!e.tab.redux.state.scratchPaint)return;const s=({detail:n})=>{"scratch-paint/eye-dropper/ACTIVATE_COLOR_PICKER"===n.action.type&&(e.tab.redux.removeEventListener("statechanged",s),setTimeout(()=>{const n=e.tab.redux.state.scratchPaint.color.eyeDropper.previousTool;n&&n.activate(),e.tab.redux.state.scratchPaint.color.eyeDropper.callback(t),e.tab.redux.dispatch({type:"scratch-paint/eye-dropper/DEACTIVATE_COLOR_PICKER"})},50))};e.tab.redux.addEventListener("statechanged",s),n.children[1].children[0].click()};for(;;){const t=await e.tab.waitForElement('div[class*="color-picker_swatch-row"]',{markAsSeen:!0,reduxCondition:e=>1===e.scratchGui.editorTab.activeTabIndex&&!e.scratchGui.mode.isPlayerOnly});if(i.abort(!1),e.tab.redux.initialize(),e.tab.redux&&"function"==typeof r&&(e.tab.redux.removeEventListener("statechanged",r),r=null),"editor"!==e.tab.editorMode)continue;const s=c(),a=Object.assign(document.createElement("div"),{className:"sa-color-picker sa-color-picker-paint"}),d=Object.assign(document.createElement("input"),{className:"sa-color-picker-color sa-color-picker-paint-color",type:"color",value:s||"#000000"}),u=document.querySelector('[class*="fixed-tools_costume-input"]').className.split(" ")[0],p=Object.assign(document.createElement("input"),{className:"sa-color-picker-text sa-color-picker-paint-text ".concat(u),type:"text",pattern:"^#[0-9a-fA-F]{3,8}$",placeholder:n("hex"),value:s||""});d.addEventListener("input",()=>i.limit(()=>l(p.value=d.value,t))),p.addEventListener("change",()=>{const{value:e}=p;Object(o.a)().test(e)&&l(d.value=Object(o.b)(e),t)}),r=({detail:e})=>{"scratch-paint/color-index/CHANGE_COLOR_INDEX"===e.action.type&&setTimeout(()=>{const e=c();d.value=e||"#000000",p.value=e||""},100)},e.tab.redux.addEventListener("statechanged",r),a.appendChild(d),a.appendChild(p),t.parentElement.insertBefore(a,t)}}},1931:function(e,t,n){"use strict";n.r(t);var o=n(1913);t.default=async e=>{Object(o.default)(e)}},1932:function(e,t,n){"use strict";n.r(t),t.default=async function({addon:e,global:t,console:n}){var o=await e.tab.traps.getBlockly();!function(t){const n=o.BlockSvg;var s=e.tab.traps.vm;const{GRID_UNIT:a}=n;var r,i,c;function l(){!function(){r=e.settings.get("paddingSize")/100,i=e.settings.get("cornerSize")/100,c=e.settings.get("notchSize")/100,n.SEP_SPACE_Y=2*a*r,n.MIN_BLOCK_X=16*a*r,n.MIN_BLOCK_X_OUTPUT=12*a*r,n.MIN_BLOCK_X_SHADOW_OUTPUT=10*a*r,n.MIN_BLOCK_Y=12*a*r,n.EXTRA_STATEMENT_ROW_Y=8*a*r,n.MIN_BLOCK_X_WITH_STATEMENT=40*a*r,n.MIN_BLOCK_Y_SINGLE_FIELD_OUTPUT=8*a*r,n.MIN_BLOCK_Y_REPORTER=10*a*r,n.MIN_STATEMENT_INPUT_HEIGHT=6*a*r,n.NOTCH_WIDTH=8*a*r,n.NOTCH_HEIGHT=2*a*r*c,n.NOTCH_START_PADDING=3*a,n.ICON_SEPARATOR_HEIGHT=10*a*r,n.NOTCH_PATH_LEFT="c 2,0 3,"+1*c+" 4,"+2*c+" l "+4*r*c+","+4*r*c+" c 1,"+1*c+" 2,"+2*c+" 4,"+2*c+" h "+24*(r-.5)+" c 2,0 3,-"+1*c+" 4,-"+2*c+" l "+4*r*c+","+-4*r*c+"c 1,-"+1*c+" 2,-"+2*c+" 4,-"+2*c,n.NOTCH_PATH_RIGHT="h "+(-4*(i-1)-5*(1-c))+"c -2,0 -3,"+1*c+" -4,"+2*c+" l "+-4*r*c+","+4*r*c+" c -1,"+1*c+" -2,"+2*c+" -4,"+2*c+" h "+-24*(r-.5)+" c -2,0 -3,-"+1*c+" -4,-"+2*c+" l "+-4*r*c+","+-4*r*c+"c -1,-"+1*c+" -2,-"+2*c+" -4,-"+2*c,n.INPUT_SHAPE_HEXAGONAL="M "+4*a*r+",0  h "+4*a+" l "+4*a*r+","+4*a*r+" l "+-4*a*r+","+4*a*r+" h "+-4*a+" l "+-4*a*r+","+-4*a*r+" l "+4*a*r+","+-4*a*r+" z",n.INPUT_SHAPE_HEXAGONAL_WIDTH=12*a*r,n.INPUT_SHAPE_ROUND="M "+4*a+",0 h "+4*a+" a "+4*a+" "+4*a+" 0 0 1 0 "+8*a+" h "+-4*a+" a "+4*a+" "+4*a+" 0 0 1 0 -"+8*a+" z",n.INPUT_SHAPE_ROUND_WIDTH=12*a*r,n.INPUT_SHAPE_HEIGHT=8*a*r,n.FIELD_HEIGHT=8*a*r,n.FIELD_WIDTH=6*a*Math.min(r,1)+10*a*Math.max(r-1,0),n.FIELD_DEFAULT_CORNER_RADIUS=4*a*r,n.EDITABLE_FIELD_PADDING=1.5*a*r,n.BOX_FIELD_PADDING=2*a*r,n.DROPDOWN_ARROW_PADDING=2*a*r,n.FIELD_WIDTH_MIN_EDIT=8*a*r,n.INPUT_AND_FIELD_MIN_X=12*a*r,n.INLINE_PADDING_Y=1*a*r,n.SHAPE_IN_SHAPE_PADDING[1][0]=5*a*r,n.SHAPE_IN_SHAPE_PADDING[1][2]=5*a*r,n.SHAPE_IN_SHAPE_PADDING[1][3]=5*a*r;var t=o.FieldDropdown.prototype.positionArrow;o.FieldDropdown.prototype.positionArrow=function(e){return this.arrowY_=11*r,t.call(this,e)},n.CORNER_RADIUS=1*a*e.settings.get("cornerSize")/100,n.TOP_LEFT_CORNER_START="m 0,"+n.CORNER_RADIUS,n.TOP_LEFT_CORNER="A "+n.CORNER_RADIUS+","+n.CORNER_RADIUS+" 0 0,1 "+n.CORNER_RADIUS+",0",n.TOP_RIGHT_CORNER="a "+n.CORNER_RADIUS+","+n.CORNER_RADIUS+" 0 0,1 "+n.CORNER_RADIUS+","+n.CORNER_RADIUS,n.BOTTOM_RIGHT_CORNER=" a "+n.CORNER_RADIUS+","+n.CORNER_RADIUS+" 0 0,1 -"+n.CORNER_RADIUS+","+n.CORNER_RADIUS,n.BOTTOM_LEFT_CORNER="a "+n.CORNER_RADIUS+","+n.CORNER_RADIUS+" 0 0,1 -"+n.CORNER_RADIUS+",-"+n.CORNER_RADIUS,n.INNER_TOP_LEFT_CORNER=" a "+n.CORNER_RADIUS+","+n.CORNER_RADIUS+" 0 0,0 -"+n.CORNER_RADIUS+","+n.CORNER_RADIUS,n.INNER_BOTTOM_LEFT_CORNER="a "+n.CORNER_RADIUS+","+n.CORNER_RADIUS+" 0 0,0 "+n.CORNER_RADIUS+","+n.CORNER_RADIUS,n.TOP_RIGHT_CORNER_DEFINE_HAT="a "+n.DEFINE_HAT_CORNER_RADIUS+","+n.DEFINE_HAT_CORNER_RADIUS+" 0 0,1 "+n.DEFINE_HAT_CORNER_RADIUS+","+n.DEFINE_HAT_CORNER_RADIUS+" v "+(1*a-n.CORNER_RADIUS),n.STATEMENT_INPUT_INNER_SPACE=2.8*a-.9*a*i}(),function(){const e=t.getMainWorkspace();if(e){s.editingTarget&&s.emitWorkspaceUpdate();const n=e.getFlyout();if(n){const o=n.getWorkspace();t.Xml.clearWorkspaceAndLoadFromXml(t.Xml.workspaceToDom(o),o),e.getToolbox().refreshSelection(),e.toolboxRefreshEnabled_=!0}}}()}e.settings.addEventListener("change",(function(){l()})),l()}(window.Blockly)}},1933:function(e,t,n){"use strict";n.r(t),t.default=async function({addon:e,global:t,console:n}){let o;await e.tab.traps.getBlockly();let s=!1;const a={none:"0s",short:"0.25s",default:"0.5s",long:"1s"},r=document.createElement("div");function i(){if(document.removeEventListener("mousemove",l),"editor"!==e.tab.editorMode)return;Blockly.getMainWorkspace().options.zoomOptions.maxScale=e.settings.get("maxZoom")/100,Blockly.getMainWorkspace().options.zoomOptions.minScale=e.settings.get("minZoom")/100,Blockly.getMainWorkspace().options.zoomOptions.startScale=e.settings.get("startZoom")/100,Blockly.getMainWorkspace().options.zoomOptions.scaleSpeed=1+e.settings.get("zoomSpeed")/100*.2;const t=c(),n=e.settings.get("autohide");if(t&&t.classList.toggle("sa-custom-zoom-hidden",n),n){document.querySelector(".injectionDiv").appendChild(r),d(),document.addEventListener("mousemove",l)}}function c(){const e=Blockly.getMainWorkspace().zoomControls_;return e?e.svgGroup_:null}function l(t){const n=t.x>o.left&&t.x<o.right&&t.y>o.top&&t.y<o.bottom;if(n!==s){s=n;const t=c();t&&(t.style.setProperty("--sa-custom-zoom-speed",a[e.settings.get("speed")]),t.classList.toggle("sa-custom-zoom-hidden",!n))}}function d(){o=r.getBoundingClientRect()}r.className="sa-custom-zoom-area",await e.tab.waitForElement(".blocklyZoom"),document.querySelector('[class^="backpack_backpack-container"]')&&window.dispatchEvent(new Event("resize")),i(),e.tab.addEventListener("urlChange",i),e.settings.addEventListener("change",i),window.addEventListener("resize",(function(){"editor"===e.tab.editorMode&&e.settings.get("autohide")&&d()}))}},1934:function(e,t,n){"use strict";n.r(t),t.default=async function({addon:e,global:t,console:n,msg:o,safeMsg:s}){const a=await e.tab.traps.getBlockly(),r=e.tab.traps.vm;let i=!1;const c=e=>{const t=e.findIndex(e=>"CREATE_LIST"===e.getAttribute("callbackkey")||"data_addtolist"===e.getAttribute("type"));return{variables:e.slice(0,t),lists:e.slice(t,e.length)}},l=a.DataCategory;let d,u;const p=t=>{let n=l(t);if(e.settings.get("moveReportersDown")&&(n=(e=>{const{variables:t,lists:n}=c(e),o=e=>{const t=[],n=[];for(const o of e)o.hasAttribute("id")||"BUTTON"===o.tagName?t.push(o):n.push(o);return n.length&&n[n.length-1].setAttribute("gap",24),n.concat(t)};return o(t).concat(o(n))})(n)),e.settings.get("separateLocalVariables")&&(n=((e,t)=>{const{variables:n,lists:s}=c(t),a=e=>{const t=document.createElement("label");return t.setAttribute("text",o(e)),t},r=e=>{if(e.length>0){for(var t=0;t<e.length-1;t++)e[t].setAttribute("gap",8);e[t].setAttribute("gap",24)}},i=t=>{const n=[],o=[],s=[],i=[];for(const a of t)if(a.hasAttribute("id")){const t=a.getAttribute("id"),n=e.getVariableById(t);n&&n.isLocal?s.push(a):o.push(a)}else o.length||s.length?i.push(a):n.push(a);const c=n;return o.length&&(c.push(a("for-all-sprites")),r(o),c.push(...o)),s.length&&(c.push(a("for-this-sprite-only")),r(s),c.push(...s)),c.concat(i)};return i(n).concat(i(s))})(t,n)),!i)return n;const{variables:s,lists:a}=c(n);return d=s,u=a,d},h=()=>u,g=a.Flyout.prototype.show;a.Flyout.prototype.show=function(e){return this.workspace_.registerToolboxCategoryCallback("VARIABLE",p),this.workspace_.registerToolboxCategoryCallback("LIST",h),g.call(this,e)};const m=r.runtime.getBlocksXML;r.runtime.getBlocksXML=function(t){const n=m.call(this,t);return i=e.settings.get("separateListCategory"),i&&n.push({id:"data",xml:'\n        <category\n          name="%{BKY_CATEGORY_VARIABLES}"\n          id="variables"\n          colour="#FF8C1A"\n          secondaryColour="#DB6E00"\n          custom="VARIABLE">\n        </category>\n        <category\n          name="'.concat(s("list-category"),'"\n          id="lists"\n          colour="#FF661A"\n          secondaryColour="#FF5500"\n          custom="LIST">\n        </category>')}),n},r.editingTarget&&r.emitWorkspaceUpdate(),e.settings.addEventListener("change",t=>{if(e.settings.get("separateListCategory")!==i)r.editingTarget&&r.emitWorkspaceUpdate();else{const e=Blockly.getMainWorkspace();e&&e.refreshToolboxSelection_()}})}},1935:function(e,t,n){"use strict";n.r(t);var o=n(2e3),s=n.n(o),a=n(2001),r=n.n(a),i=n(2002),c=n.n(i),l=n(2003),d=n.n(l),u=n(2004),p=n.n(u),h=n(2005),g=n.n(h),m=n(2006),f=n.n(m),b=n(2007),v=n.n(b),y=n(1936),w=n(1906);const k=e=>{if("/add.svg"===e)return s.a;if("/debug-unread.svg"===e)return r.a;if("/debug.svg"===e)return c.a;if("/delete.svg"===e)return d.a;if("/download-white.svg"===e)return p.a;if("/error.svg"===e)return g.a;if("/play.svg"===e)return f.a;if("/warning.svg"===e)return v.a;throw new Error("Unknown asset: ".concat(e))};t.default=async function({addon:e,global:t,console:n,msg:o}){let s,a;const r=e.tab.traps.vm,i=document.createElement("div");i.className="sa-debugger-container";const c=document.createElement("div");c.className=e.tab.scratchClass("button_outlined-button","stage-header_stage-button");const l=document.createElement("div");l.className=e.tab.scratchClass("button_content");const d=document.createElement("img");d.className=e.tab.scratchClass("stage-header_stage-button-icon"),d.draggable=!1,d.src=k("/debug.svg"),l.appendChild(d),c.appendChild(l),i.appendChild(c),c.addEventListener("click",()=>V(!0));e.tab.addBlock("​​breakpoint​​",[],()=>{Object(w.setPaused)(!w.paused);const e=document.querySelector(".pause-btn");e&&"none"!==getComputedStyle(e).display||V(!0)}),e.tab.addBlock("​​log​​ %s",["content"],({content:e},t)=>{W(e,t,"log")}),e.tab.addBlock("​​warn​​ %s",["content"],({content:e},t)=>{W(e,t,"warn")}),e.tab.addBlock("​​error​​ %s",["content"],({content:e},t)=>{W(e,t,"error")});const u=Object.assign(document.createElement("div"),{className:e.tab.scratchClass("card_card",{others:"debug"})}),p=Object.assign(document.createElement("div"),{className:e.tab.scratchClass("card_header-buttons")}),h=Object.assign(document.createElement("h1"),{innerText:o("console")}),g=Object.assign(document.createElement("div"),{className:"extra-log-container"}),m=(t,n)=>{const o=Blockly.getMainWorkspace();if(t!==r.editingTarget.id)return void(r.runtime.getTargetById(t)&&(r.setEditingTarget(t),setTimeout(()=>m(t,n),300)));const s=o.getBlockById(n);if(!s)return;if(s.workspace.isFlyout)return;0!==e.tab.redux.state.scratchGui.editorTab.activeTabIndex&&e.tab.redux.dispatch({type:"scratch-gui/navigation/ACTIVATE_TAB",activeTabIndex:0});let a=s.getRootBlock(),i=s;for(;i.getOutputShape()&&i.getSurroundParent();)i=i.getSurroundParent();let c=i.getRelativeToSurfaceXY(),l=a.getRelativeToSurfaceXY(),d=o.scale,u=l.x*d,p=c.y*d,h=s.width+u,g=s.height+p,f=o.getMetrics();if(u<f.viewLeft+32-4||h>f.viewLeft+f.viewWidth||p<f.viewTop+32-4||g>f.viewTop+f.viewHeight){let e=u-f.contentLeft-32,t=p-f.contentTop-32;o.scrollbar.set(e,t)}const b={block:null,timerID:null,colour:null};b.timerID>0&&(clearTimeout(b.timerID),b.block.setColour(b.colour));let v=4,y=!0;b.colour=s.getColour(),b.block=s,function e(){if(!b.block.svgPath_)return b.timerID=v=0,void(y=!0);b.block.svgPath_.style.fill=y?"#ffff80":b.colour,y=!y,v--,b.timerID=v>0?setTimeout(e,200):0}()};g.addEventListener("click",e=>{const t=e.target;if(t.classList.contains("deletedTarget"))return;const n=t.dataset.targetId,o=t.dataset.blockId;n&&o&&m(n,o)});const f=Object.assign(document.createElement("div"),{className:"logs"}),b=Object.assign(document.createElement("div"),{className:e.tab.scratchClass("card_header-buttons-right")}),v=Object.assign(document.createElement("div"),{className:e.tab.scratchClass("card_shrink-expand-button",{others:"sa-debugger-unpause"}),draggable:!1}),x=Object.assign(document.createElement("img"),{src:k("/play.svg")}),C=Object.assign(document.createElement("span"),{innerText:o("unpause")}),E=Object.assign(document.createElement("div"),{className:e.tab.scratchClass("card_shrink-expand-button"),title:o("export-desc"),draggable:!1}),_=Object.assign(document.createElement("img"),{src:k("/download-white.svg")}),L=Object.assign(document.createElement("span"),{innerText:o("export")}),T=Object.assign(document.createElement("div"),{className:e.tab.scratchClass("card_shrink-expand-button"),draggable:!1}),D=Object.assign(document.createElement("img"),{src:k("/delete.svg")}),M=Object.assign(document.createElement("span"),{innerText:o("clear")}),S=Object.assign(document.createElement("div"),{className:e.tab.scratchClass("card_remove-button"),draggable:!1}),I=Object.assign(document.createElement("img"),{className:e.tab.scratchClass("close-button_close-icon"),src:k("/add.svg")}),A=Object.assign(document.createElement("span"),{innerText:o("close")});p.append(h,b),b.append(v,E,T,S),T.append(D,M),S.append(I,A),E.append(_,L),v.append(x,C),g.append(f),u.append(p,g),document.body.append(u),p.addEventListener("mousedown",(function(e){e.preventDefault(),j=e.clientX-u.offsetLeft,B=e.clientY-u.offsetTop,P=e.clientX,R=e.clientY,document.addEventListener("mouseup",H),document.addEventListener("mousemove",z)}));let N=!0;g.addEventListener("wheel",e=>{e.deltaY<0&&(N=!1)},{passive:!0}),g.addEventListener("scroll",()=>{N=g.scrollTop+5>=g.scrollHeight-g.clientHeight},{passive:!0});const O=(e,t=null)=>{if(t&&t[e])return t[e];const n=r.runtime.getTargetById(e);let s;return s=n?{name:n.getName(),isDeleted:!1}:{name:o("deleted-sprite"),isDeleted:!0},t&&(t[e]=s),s};let j=0,B=0,P=0,R=0;function F(e,t){P=e,R=t;const n=document.documentElement.clientWidth||document.body.clientWidth,o=document.documentElement.clientHeight||document.body.clientHeight,s=Math.max(0,Math.min(e-j,n-u.offsetWidth)),a=Math.max(0,Math.min(t-B,o-u.offsetHeight));u.style.left=s+"px",u.style.top=a+"px"}function z(e){e.preventDefault(),F(e.clientX,e.clientY)}function H(){document.removeEventListener("mouseup",H),document.removeEventListener("mousemove",z)}window.addEventListener("resize",()=>{F(P,R)}),T.addEventListener("click",()=>{document.querySelectorAll(".log").forEach((e,t)=>e.remove()),H(),U=[],N=!0}),T.addEventListener("mouseup",()=>{H()}),S.addEventListener("click",()=>V(!1)),S.addEventListener("mouseup",()=>H());v.addEventListener("click",()=>Object(w.setPaused)(!1)),w.paused||(v.style.display="none"),Object(w.onPauseChanged)(e=>v.style.display=e?"":"none"),E.addEventListener("click",e=>{const t=e.shiftKey?prompt(o("enter-format"),"{sprite}: {content} ({type})"):"{sprite}: {content} ({type})";if(!t)return;H();const n=Object.create(null);let s=U.map(({targetId:e,type:o,content:s})=>t.replace(/\{(sprite|type|content)\}/g,(t,a)=>({sprite:O(e,n).name,type:o,content:s}[a]))).join("\n");var a,r;a="logs.txt",r=s,Object(y.a)(a,new Blob([r],{type:"text/plain"}))});let U=[],Y=!1;const W=(e,t,n)=>{const r=document.createElement("div"),i=t.target,c=i.isOriginal?i:i.sprite.clones[0],l=c.id;if(r.className="log",r.classList.add(n),f.append(r),"log"!==n){const e=k("error"===n?"/error.svg":"/warning.svg"),t=document.createElement("img");t.src=e,t.alt=t.title=o("icon-"+n),t.className="logIcon",r.appendChild(t)}const u=t.peekStack(),p=i.blocks.getBlock(u);if(p&&a){var h;const e=null===(h=Object.values(p.inputs)[0])||void 0===h?void 0:h.block,t=i.blocks.getBlock(e);if(t&&"text"!==t.opcode){let e,n;if("data_variable"===t.opcode||"data_listcontents"===t.opcode)e=Object.values(t.fields)[0].value,n="data_variable"===t.opcode?"data":"list";else{let o;const s={jsonInit(e){o=e}},r=a.Blocks[t.opcode];if(r)try{r.init.call(s)}catch(e){}o&&o.message0&&!o.args0&&(e=o.message0,n=o.category)}if(e&&n){const t=document.createElement("span");t.textContent=e,t.className="console-variable",t.dataset.category="list"===n?"data-lists":n,t.style.backgroundColor=a.Colours["list"===n?"data_lists":n].primary,r.append(t)}}}U.push({targetId:l,type:n,content:e}),r.append(((e,t="")=>{let n=document.createElement("span");return n.innerText=e,n.className=t,n})(e));let g=document.createElement("a");if(g.textContent=i.isOriginal?i.getName():o("clone-of",{spriteName:c.getName()}),g.className="logLink",g.dataset.blockId=u,g.dataset.targetId=l,i.isOriginal||(g.dataset.isClone="true"),r.appendChild(g),!Y&&N&&(Y=!0,queueMicrotask(G)),!s){const e=k("/debug-unread.svg");d.src!==e&&(d.src=e)}},G=()=>{Y=!1,g.scrollTop=g.scrollHeight},V=(e=!s)=>{if(s=e,u.style.display=e?"flex":"",e){d.src=k("/debug.svg");const e=Object.create(null);for(const t of document.getElementsByClassName("logLink")){const n=t.dataset.targetId;if(!n)return;const s=O(n,e);t.textContent=s.name,s.isDeleted?t.classList.add("deletedTarget"):t.dataset.isClone&&(t.textContent=o("clone-of",{spriteName:s.name}))}N&&G()}};for(;;){const t=await e.tab.waitForElement('[class*="stage-header_stage-size-row"]',{markAsSeen:!0,reduxEvents:["scratch-gui/mode/SET_PLAYER","scratch-gui/mode/SET_FULL_SCREEN","fontsLoaded/SET_FONTS_LOADED","scratch-gui/locales/SELECT_LOCALE"]});"editor"===e.tab.editorMode?(a=await e.tab.traps.getBlockly(),t.insertBefore(i,t.firstChild)):V(!1)}}},1936:function(e,t,n){"use strict";t.a=(e,t)=>{const n=document.createElement("a");if(document.body.appendChild(n),navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(t,e);else if("download"in HTMLAnchorElement.prototype){const o=window.URL.createObjectURL(t);n.href=o,n.download=e,n.type=t.type,n.click(),window.setTimeout(()=>{document.body.removeChild(n),window.URL.revokeObjectURL(o)},1e3)}else{let e=window.open("","_blank");const n=new FileReader;n.onloadend=function(){e.location.href=n.result,e=null},n.readAsDataURL(t)}}},1937:function(e,t,n){"use strict";n.r(t),t.default=async function({addon:e,global:t,console:n}){const o=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;document.addEventListener("dragover",e=>{if(!e.dataTransfer.types.includes("Files"))return;let t,s;if((t=e.target.closest('div[class*="sprite-selector_sprite-selector"]'))||(t=e.target.closest('div[class*="stage-selector_stage-selector"]'))||(t=e.target.closest('div[class*="selector_wrapper"]'))?s=e=>{const n=t.querySelector('input[class*="action-menu_file-input"]');n.files=e,n.dispatchEvent(new Event("change",{bubbles:!0}))}:(t=e.target.closest('div[class*="monitor_list-monitor"]'))?s=e=>{const o=document.querySelector("body > .react-contextmenu.react-contextmenu--visible");t.dispatchEvent(new MouseEvent("contextmenu",{bubbles:!0}));const s=document.querySelector("body > .react-contextmenu.react-contextmenu--visible"),a=null===s?o:s;a.style.display="none";const r=document.body.appendChild;document.body.appendChild=t=>{if(document.body.appendChild=r,!(t instanceof HTMLInputElement))return n.error('File input was not immediately given to appendChild upon clicking "Import"!'),r(t);document.body.appendChild(t),t.click=()=>{},t.files=e,t.dispatchEvent(new Event("change")),window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{a.style.display=null,a.style.opacity=0,a.style.pointerEvents="none"})})},a.children[0].click()}:(t=e.target.closest('div[class*="question_question-input"] > input[class*="input_input-form_l9eYg"]'))&&(s=async e=>{const n=(await Promise.all(Array.from(e,e=>e.text()))).join("").replace(/[\r\n]+$/,"").replace(/\r?\n|\r/g," "),s=t.selectionStart;((e,t)=>{o.call(e,t),e.dispatchEvent(new Event("change",{bubbles:!0}))})(t,t.value.slice(0,s)+n+t.value.slice(t.selectionEnd)),t.setSelectionRange(s,s+n.length)}),!t)return;if(e.preventDefault(),t.classList.contains("sa-dragged-over"))return;t.classList.add("sa-dragged-over");const a=e=>{e.preventDefault(),c(),e.dataTransfer.types.includes("Files")&&e.dataTransfer.files.length>0&&s(e.dataTransfer.files)},r=e=>{e.preventDefault()},i=e=>{e.preventDefault(),c()},c=()=>{t.classList.remove("sa-dragged-over"),t.removeEventListener("dragover",r),t.removeEventListener("dragleave",i),t.removeEventListener("drop",a)};t.addEventListener("dragover",r),t.addEventListener("dragleave",i),t.addEventListener("drop",a)},!0)}},1938:function(e,t,n){"use strict";function o(e){if(2!==e.button)return;const t=document.querySelector(".blocklyWidgetDiv");if(!t)return;let n=e.target;if(n.closest(".blocklyMainBackground")||n.closest(".blocklyBubbleCanvas"))return void t.classList.remove("u-contextmenu-colored");let o=n.closest("[data-id]");if(!o&&("rect"===n.tagName&&(n=n.nextSibling,o=n&&n.closest("[data-id]")),!o))return;let s=Blockly.getMainWorkspace().getBlockById(o.dataset.id);for(;s&&s.isShadow();)s=s.getParent();if(!s)return;const a=s.svgPath_;if(!a)return;const r=window.getComputedStyle(a).getPropertyValue("fill");if(!r)return;const i=r.substr(1),c=function(e){const t=(e>>16&255)/255,n=(e>>8&255)/255,o=(255&e)/255,s=Math.min(t,n,o),a=Math.max(t,n,o);if(s===a)return[0,0,100*t];const r=a-s,i=(s+a)/2,c=r/(1-Math.abs(2*i-1));var l;switch(a){case t:l=((n-o)/r+6)%6;break;case n:l=(o-t)/r+2;break;case o:l=(t-n)/r+4}return[l*=60,100*c,100*i]}(parseInt(i,16));c[2]=Math.max(c[2]-15,0);const l="hsl("+c[0]+", "+c[1]+"%, "+c[2]+"%)";t.classList.add("u-contextmenu-colored"),t.style.setProperty("--u-contextmenu-bg",r),t.style.setProperty("--u-contextmenu-border",l)}n.r(t),t.default=async function({addon:e,global:t,console:n}){document.body.addEventListener("mousedown",o,!0)}},1939:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));class o{constructor(e){this.addon=e,this.vm=this.addon.tab.traps.vm,this.highlights={timeoutId:0,callback:()=>{}}}showSenders(e){this.highlightTargets(this.getTargetsWithSenders(e))}getTargetsWithSenders(e){const t=[];for(const n of this.vm.runtime.targets){if(!n.isOriginal)return;for(const o of Object.keys(n.blocks._blocks)){const s=n.blocks.getBlock(o);if(s.inputs.BROADCAST_INPUT){const o=s.inputs.BROADCAST_INPUT;if(o.block===o.shadow&&n.blocks.getBlock(o.shadow).fields.BROADCAST_OPTION.id===e){t.push(n);break}}}}return t}showReceivers(e){this.highlightTargets(this.getTargetsWithReceivers(e))}getTargetsWithReceivers(e){const t=[];for(const n of this.vm.runtime.targets){if(!n.isOriginal)return;for(const o of Object.keys(n.blocks._blocks)){const s=n.blocks.getBlock(o);if("event_whenbroadcastreceived"===s.opcode&&s.fields.BROADCAST_OPTION.id===e){t.push(n);break}}}return t}highlightTargets(e){this.highlights.timeoutId&&(this.highlights.callback(),clearTimeout(this.highlights.timeoutId),this.highlights={timeoutId:0,callback:()=>{}});const t=[];for(const n of e){let e=null;if(n.isStage)e=document.querySelector('div[class*="stage-selector_header"]');else if(n.isOriginal){const t=document.querySelectorAll('div[class*="sprite-selector-item_sprite-name"]'),o=Array.prototype.find.call(t,e=>e.textContent===n.getName());if(!o)continue;e=o.parentElement}e.dataset.highlighted="true",t.push(e)}const n=(o=t,()=>{for(const e of o)e.isConnected&&(e.dataset.highlighted="false")});var o;this.highlights={callback:n,timeoutId:setTimeout(n,2e3)}}getAssociatedBroadcastId(e){const t=this.vm.editingTarget,n=t.blocks.getBlock(e);if("event_whenbroadcastreceived"===n.opcode)return n.fields.BROADCAST_OPTION.id;{const e=n.inputs.BROADCAST_INPUT;return t.blocks.getBlock(e.shadow).fields.BROADCAST_OPTION.id}}}},1940:function(e,t,n){"use strict";n.r(t);var o=n(2008),s=n.n(o),a=n(1915);t.default=async function({addon:e,global:t,console:n,msg:o,safeMsg:r}){await(()=>{if("editor"!==e.tab.editorMode)return new Promise((t,n)=>{const o=()=>{"editor"===e.tab.editorMode&&(t(),e.tab.removeEventListener("urlChange",o))};e.tab.addEventListener("urlChange",o)})})();const i=e.tab.direction,c='\n<div id="s3devHelpPop" class="'.concat(e.tab.scratchClass("modal_modal-overlay"),'" dir="').concat(i,'">\n<div class="').concat(e.tab.scratchClass("modal_modal-content"),'">\n<div class="').concat(e.tab.scratchClass("modal_header"),'">\n  <div class="').concat(e.tab.scratchClass("modal_header-item","modal_header-item-title"),'">').concat(r("help-title"),'</div>\n  <div class="').concat(e.tab.scratchClass("modal_header-item","modal_header-item-close"),'">\n    <div class="').concat(e.tab.scratchClass("close-button_close-button","close-button_large",{others:"close-button"}),'">\n\t  <img class="').concat(e.tab.scratchClass("close-button_close-icon"),'" src="').concat((e=>{if("/icon--close.svg"===e)return s.a;throw new Error("Unknown asset: ".concat(e))})("/icon--close.svg"),'">\n\t</div>\n  </div>\n</div>\n<div id="s3devHelpContent">\n\x3c!-- tw: we don\'t put this in because including "Scratch Addons" would probably violate BE/US policy :(\n<p>').concat(r("help-title")," ").concat(r("help-by",{ndash:"&ndash;",url:'<a target="_blank" rel="noreferrer noopener" href="https://www.youtube.com/griffpatch">Griffpatch</a>'}),"</p>\n<hr />\n--\x3e\n<h2><strong>").concat(r("code-tab-features"),'</strong></h2>\n<p dir="auto"><strong>').concat(r("interactive-find-bar"),"</strong> &ndash; ").concat(r("interactive-find-bar-desc"),'</p>\n<p dir="auto"><strong>').concat(r("improved-tidy-up"),"</strong> &ndash; ").concat(r("improved-tidy-up-desc"),'</p>\n<p dir="auto"><strong>').concat(r("help-make-space")," ").concat(r("help-new"),"</strong> &ndash; ").concat(r("help-make-space-desc"),'</p>\n<p dir="auto"><strong>').concat(r("copy-to-clipboard"),"</strong> &ndash; ").concat(r("copy-to-clipboard-desc"),'</p>\n<p dir="auto"><strong>').concat(r("paste-from-clipboard"),"</strong> &ndash; ").concat(r("paste-from-clipboard-desc"),'</p>\n<p dir="auto"><strong>').concat(r("swap-variable"),"</strong> &ndash; ").concat(r("swap-variable-desc"),'</p>\n<p dir="auto"><strong>').concat(r("middleclick"),"</strong> &ndash; ").concat(r("middleclick-desc"),'</p>\n<p dir="auto"><strong>').concat(r("ctrl-lr"),"</strong> &ndash; ").concat(r("ctrl-lr-desc"),'</p>\n<p dir="auto"><strong>').concat(r("ctrl-space"),"</strong> &ndash; ").concat(r("ctrl-space-desc"),"</p>\n<hr />\n<h2><strong>").concat(r("costume-tab-features"),'</strong></h2>\n<p dir="auto"><strong>').concat(r("find-bar"),"</strong> &ndash; ").concat(r("find-bar-costume-desc"),'</p>\n<p dir="auto"><strong>').concat(r("ctrl-lr"),"</strong> &ndash; ").concat(r("ctrl-lr-costume-desc"),'</p>\n<p dir="auto"><strong>').concat(r("send-top-bottom"),"</strong> &ndash; ").concat(r("send-top-bottom-desc"),"</p>\n<hr />\n<p>").concat(r("youtube"),' -&nbsp;<a target="_blank" href="https://www.youtube.com/griffpatch" rel="noopener noreferrer">https://www.youtube.com/user/griffpatch</a></p>\n</div>\n</div>\n</div>\n');new a.default(e,o,r,c).init()}},1941:function(e,t,n){"use strict";n.r(t),t.default=async function({addon:e,global:t,console:n}){let o=null,s=null,a=null;function r(t){a=t,a.focus=()=>{},s.style.width=getComputedStyle(s).width;const n=document.createElement("input");e.tab.displayNoneWhileDisabled(n),n.type="text",n.addEventListener("input",l),n.addEventListener("keydown",d),n.classList.add("u-dropdown-searchbar"),a.insertBefore(n,a.firstChild),s.style.height=getComputedStyle(s).height;if(!(s.scrollHeight>s.clientHeight)){const e=o.querySelector(".blocklyDropDownArrow");if(e.classList.contains("arrowBottom")){const t=n.offsetHeight;o.style.transform+=" translateY(-".concat(t,"px)"),e.style.transform="translateY(".concat(t,"px) ").concat(e.style.transform)}}n.focus()}function i(){document.querySelector(".blocklyToolboxDiv").dispatchEvent(new MouseEvent("mousedown"))}function c(e,t){e.dispatchEvent(new MouseEvent("mousedown",{relatedTarget:e,bubbles:!0})),t&&e.dispatchEvent(new MouseEvent("mouseup",{relatedTarget:e,bubbles:!0}));const n=e.offsetTop,o=n+e.offsetHeight,a=s.scrollTop,r=s.offsetHeight,i=a+r;a>n?s.scrollTop=n:o>i&&(s.scrollTop=o-r)}function l(e){const t=e.target.value.toLowerCase();for(const e of u()){const n=!e.textContent.toLowerCase().includes(t);e.hidden=n}}function d(e){if("Enter"===e.key){e.stopPropagation(),e.preventDefault();const t=a.querySelector(".goog-menuitem-highlight");if(t&&!t.hidden)return void c(t,!0);const n=function(){const e=document.querySelector(".blocklySelected");return e?Blockly.getMainWorkspace().getBlockById(e.dataset.id):null}(),o=u();if(""===e.target.value&&n&&("event_broadcast"===n.type||"event_broadcastandwait"===n.type||"event_whenbroadcastreceived"===n.type))return void i();for(const e of o)if(!e.hidden){c(e,!0);break}}else if("Escape"===e.key)i();else if("ArrowDown"===e.key||"ArrowUp"===e.key){e.preventDefault(),e.stopPropagation();const t=u().filter(e=>!e.hidden);if(0===t.length)return;let n=-1;for(let e=0;e<t.length;e++)if(t[e].classList.contains("goog-menuitem-highlight")){n=e;break}const o=t.length-1;let s=0;s="ArrowDown"===e.key?-1===n||n===o?0:n+1:-1===n||0===n?o:n-1,c(t[s],!1)}}function u(){return a?Array.from(a.children).filter(e=>"INPUT"!==e.tagName):[]}o=await e.tab.waitForElement(".blocklyDropDownDiv",{reduxCondition:e=>0===e.scratchGui.editorTab.activeTabIndex&&!e.scratchGui.mode.isPlayerOnly}),s=o.querySelector(".blocklyDropDownContent");new MutationObserver(e=>{for(const t of e)if("childList"===t.type){for(const e of t.addedNodes)if(e.classList&&e.classList.contains("blocklyDropdownMenu")){r(e);break}for(const e of t.removedNodes)if(e.classList&&e.classList.contains("blocklyDropdownMenu")){a=null,s.style.width="",s.style.height="";break}}}).observe(s,{childList:!0})}},1942:function(e,t,n){"use strict";n.r(t),t.default=async function({addon:e,global:t,console:n}){const o=await e.tab.traps.getBlockly(),s=Blockly.getMainWorkspace(),a=s.options.pathToMedia;o.inject.loadSounds_(a,s);const r=o.init_;o.init_=function(...e){return e[0].options.hasSounds=!0,r.call(this,...e)}}},1943:function(e,t,n){"use strict";n.r(t),t.default=async function({addon:e,global:t,console:n}){let o,s;await e.tab.traps.getBlockly(),window.dispatchEvent(new Event("resize")),e.self.addEventListener("disabled",()=>{clearInterval(o),Blockly.getMainWorkspace().recordCachedAreas()}),e.self.addEventListener("reenabled",()=>{s||r(),Blockly.getMainWorkspace().recordCachedAreas()});const a=t=>{s=!0;const n=t.toolbox_.getClientRect;t.toolbox_.getClientRect=function(){const t=n.call(this);return!t||e.self.disabled||t.left>0||(t.left+=1e9,t.width-=1e9),t}};function r(){"editor"===e.tab.editorMode&&(o=setInterval(()=>{Blockly.getMainWorkspace()&&(a(Blockly.getMainWorkspace()),clearInterval(o))},100)),e.tab.addEventListener("urlChange",()=>{"editor"===e.tab.editorMode&&a(Blockly.getMainWorkspace())})}r()}},1944:function(e,t,n){"use strict";n.r(t);var o=n(2009),s=n.n(o);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=async function({addon:e,global:t,console:n,msg:o}){const a="http://www.w3.org/2000/svg";let i,c,l,d,u,p;const h=e=>{const t=e.indexOf("//");return-1===t||0===t?null:e.substr(0,t)},g=e=>{const t=e.indexOf("//");return-1===t||0===t?e:e.substr(t+"//".length)},m=(e,t)=>{const n=g(e);return t?"".concat(t).concat("//").concat(n):n},f=e=>!e.includes("//")&&!e.endsWith("/"),b=["_mouse_","_stage_","_edge_","_myself_","_random_"],v=e=>""===e?"2":b.includes(e)?"".concat(e,"2"):e,y=e=>{const t=e.closest("[class*='sprite-selector_sprite-selector']");if(t)return t[c].child.sibling.child.stateNode;const n=e.closest('[class*="asset-panel_wrapper"]');if(n)return n[c].child.child.stateNode;throw new Error("cannot find SortableHOC")},w=(e,t,n)=>Math.min(Math.max(e,t),n),k=e=>e&&e.name&&"object"==typeof e.name?e.name:null,x={assetId:"&__sa_folders_folder",encodeDataURI:()=>(e=>{if("/folder.svg"===e)return s.a;throw new Error("Unknown asset: ".concat(e))})("/folder.svg")},C="data:image/svg+xml;base64,".concat(btoa('<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100px" height="100px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g id="Sound" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M12.4785058,12.6666667 C12.3144947,12.6666667 12.1458852,12.6272044 11.9926038,12.5440517 C11.537358,12.2960031 11.3856094,11.7562156 11.6553847,11.3376335 C12.1688774,10.5371131 12.1688774,9.54491867 11.6553847,8.74580756 C11.3856094,8.32581618 11.537358,7.78602861 11.9926038,7.53798001 C12.452448,7.29275014 13.0379829,7.43086811 13.3046926,7.84804076 C14.1737981,9.20103311 14.1737981,10.8809986 13.3046926,12.233991 C13.1268862,12.5130457 12.806528,12.6666667 12.4785058,12.6666667 Z M15.3806784,13.8333333 C15.2408902,13.8333333 15.0958763,13.796281 14.9665396,13.7182064 C14.5785295,13.485306 14.4491928,12.9784829 14.6791247,12.5854634 C15.5949331,11.0160321 15.5949331,9.065491 14.6791247,7.49738299 C14.4491928,7.10436352 14.5785295,6.59621712 14.9665396,6.36331669 C15.3558562,6.13438616 15.8549129,6.26274605 16.0848448,6.65444223 C17.3050517,8.74260632 17.3050517,11.3389168 16.0848448,13.4270809 C15.9319924,13.6890939 15.6602547,13.8333333 15.3806784,13.8333333 Z M10.3043478,5.62501557 L10.3043478,13.873675 C10.3043478,14.850934 9.10969849,15.3625101 8.36478311,14.7038052 L6.7566013,13.2797607 C6.18712394,12.7762834 5.44499329,12.4968737 4.67362297,12.4968737 L4.3923652,12.4968737 C3.62377961,12.4968737 3,11.8935108 3,11.1470686 L3,8.36646989 C3,7.62137743 3.62377961,7.01666471 4.3923652,7.01666471 L4.65830695,7.01666471 C5.42967727,7.01666471 6.17180792,6.73725504 6.74128529,6.23377771 L8.36478311,4.79623519 C9.10969849,4.13753026 10.3043478,4.64910643 10.3043478,5.62501557 Z" id="Combined-Shape" fill="#575E75"></path>\n    </g>\n</svg>'));let E=null;const _=Object.create(null),L=e=>{const t=e=>{const t=(e=>{let t=0;for(let n=0;n<e.length;n++)t=31*t+e.charCodeAt(n),t|=0;return t})(e),n=(o=t,function(){var e=o+=1831565813;return e=Math.imul(e^e>>>15,1|e),(((e^=e+Math.imul(e^e>>>7,61|e))^e>>>14)>>>0)/4294967296});var o;return n(),n(),n(),n(),n()};if(!_[e]){E||(E=document.createElement("style"),document.head.appendChild(E));const n=360*t(e),o="hsla(".concat(n,"deg, 100%, 85%, 0.5)"),s=Object.keys(_).length,a="sa-folders-color-".concat(s);_[e]=a,E.textContent+=".".concat(a,"{background-color:").concat(o," !important;}"),E.textContent+=".".concat(a,'[class*="sprite-selector_raised"]:not([class*="sa-folders-folder"]){background-color:hsla(').concat(n,"deg, 100%, 77%, 1) !important;}")}return _[e]},T=e=>{const t=Object.create(null),n=[];for(const o of e){const e=o.getName?o.getName():o.name,s=h(e);"string"==typeof s?(t[s]||(t[s]=[],n.push(t[s])),t[s].push(o)):n.push(o)}const o=n.flat();for(let t=0;t<e.length;t++)if(n[t]!==e[t])return{items:o,changed:!0};return{items:o,changed:!1}},D=()=>{const{items:e,changed:t}=T(i.runtime.targets);t&&(i.runtime.targets=e,i.emitTargetsUpdate())},M=(e=i.editingTarget)=>{const{items:t,changed:n}=T(e.sprite.costumes);n&&(e.sprite.costumes=t,i.emitTargetsUpdate())},S=(e=i.editingTarget)=>{const{items:t,changed:n}=T(e.sprite.sounds);n&&(e.sprite.sounds=t,i.emitTargetsUpdate())},I=e=>{const t=e.constructor;if(!Array.isArray(e.props.items)||"string"!=typeof e.props.selectedId&&"number"!=typeof e.props.selectedItemIndex||void 0===e.containerBox||void 0!==t.prototype.componentDidMount||void 0!==t.prototype.componentDidUpdate||"function"!=typeof t.prototype.handleAddSortable||"function"!=typeof t.prototype.handleRemoveSortable||"function"!=typeof t.prototype.setRef)throw new Error("Can not comprehend SortableHOC")};class A{constructor(){this.map=new Map,this.used=[]}has(e){return this.map.has(e)}get(e){return this.used.push(e),this.map.get(e)}set(e,t){this.used.push(e),this.map.set(e,t)}start(){this.used=[]}end(){for(const e of Array.from(this.map.keys()))this.used.includes(e)||this.map.delete(e)}clear(){this.start(),this.map.clear()}}const N=(e,t)=>{const n=new A,o=new A,s=new A,i=[[0,0],[40,0],[0,40],[40,40]],c=e=>{const t=document.createElementNS(a,"svg");t.setAttribute("width",80),t.setAttribute("height",80);for(let n=0;n<Math.min(i.length,e.length);n++){const o=e[n],s=document.createElementNS(a,"image");s.setAttribute("width",40),s.setAttribute("height",40),s.setAttribute("x",i[n][0]),s.setAttribute("y",i[n][1]),o.asset?s.setAttribute("href",o.asset.encodeDataURI()):o.costume&&o.costume.asset?s.setAttribute("href",o.costume.asset.encodeDataURI()):o.url&&s.setAttribute("href",C),t.appendChild(s)}return"data:image/svg+xml;,"+(new XMLSerializer).serializeToString(t)},g=e=>{let t="sa_folder&&";for(let n=0;n<Math.min(i.length,e.length);n++){const o=e[n];o.asset?t+=o.asset.assetId:o.costume&&o.costume.asset?t+=o.costume.asset.assetId:o.url&&(t+=o.url),t+="&&"}return t},m=e=>{if(1===t){return e.props.items.find(t=>t.id===e.props.selectedId)}if(2===t){return e.props.items[e.props.selectedItemIndex]}return null};e.prototype.saInitialSetup=function(){n.clear(),o.clear(),s.clear();const e=[],a=m(this);if(a&&!a.isStage){const n=h(a.name);e.push(n),1===t?l=n:2===t&&(d=n)}this.setState({folders:e})},e.prototype.componentDidMount=function(){const e=m(this);if(e){const n=h(e.name);1===t?l=n:2===t&&(d=n)}this.saInitialSetup()},e.prototype.componentDidUpdate=function(e,n){const o=m(this);if(o){const n=h(o.name),s=this.state.folders.includes(n)?n:null;let a;1===t?l=s:2===t&&(d=s),a=this.props.selectedId?this.props.selectedId!==e.selectedId:this.props.items[this.props.selectedItemIndex]&&e.items[e.selectedItemIndex]&&this.props.items[this.props.selectedItemIndex].name!==e.items[e.selectedItemIndex].name,a&&(o.isStage||"string"!=typeof n||this.state.folders.includes(n)||this.setState(e=>({folders:[...e.folders,n]})))}};const f=e.prototype.render;e.prototype.render=function(){const e=this.props;this.props=r(r({},this.props),((e,a)=>{const r=e=>{const t=e.name;let o,s;n.has(t)?(o=n.get(t),s=o.name):(s={toString:()=>"_".concat(e.name)},o={},n.set(t,o));const a=h(e.name);return Object.assign(o,e),s.realName=e.name,s.realIndex=u,s.inFolder=a,o.name=s,{newItem:o,itemData:s}};n.start(),o.start(),s.start();const i=new Map,l=[],d={items:l};let u=0;for(;u<a.items.length;){const n=a.items[u],p=h(n.name);if(null===p){if(l.push(r(n).newItem),2===t){a.selectedItemIndex===u&&(d.selectedItemIndex=l.length-1)}}else{const n=-1!==e.indexOf(p),m=[];for(;u<a.items.length;){const e=a.items[u],o=r(e);if(h(e.name)!==p)break;if(m.push(o.newItem),2===t){a.selectedItemIndex===u&&(d.selectedItemIndex=n?l.length+m.length:-1)}u++}u--;const f=i.get(p)||0;i.set(p,f+1);const b=g(m),v="".concat(n,"&").concat(f,"&").concat(p,"&").concat(b,"&"),y="&__".concat(f,"_").concat(p),w=b;let k,C,E;if(o.has(v)?(k=o.get(v),C=k.name):(k={id:{toString:()=>y}},C={toString:()=>y},o.set(v,k)),C.folder=p,C.folderOpen=n,k.items=m,k.name=C,n?E=x:s.has(w)?E=s.get(w):(E={assetId:w,encodeDataURI:()=>c(m)},s.set(w,E)),1===t?(k.costume||(k.costume={}),k.costume.asset=E,k.id||(k.id={}),k.id.sa_folder_items=m,k.id.toString=()=>y):(k.asset=E,k.dragPayload||(k.dragPayload={}),k.dragPayload.sa_folder_items=m),l.push(k),n)for(const e of m)l.push(e)}u++}return n.end(),o.end(),s.end(),d})(this.state&&this.state.folders||[],this.props)),1===t?u=this.props.items:2===t&&(p=this.props.items);const a=f.call(this);return this.props=e,a}},O=t=>{const n=(t,n,o)=>{const s=document.createElement("div");return s.className=e.tab.scratchClass("context-menu_menu-item",o?"context-menu_menu-item-bordered":null,{others:["react-contextmenu-item","sa-folders-contextmenu-item"]}),s.setAttribute("role","menuitem"),s.setAttribute("tabindex","-1"),s.setAttribute("aria-disabled","false"),s.textContent=t,s.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),document.body.dispatchEvent(new MouseEvent("mousedown",{relatedTarget:document.body,bubbles:!0})),n()},!0),s},s=e=>{const t=k(e.props);if(!t)return;const s=e.ref.querySelector("nav[role=menu]");if(!s)return;const r=s.querySelector(".sa-folders-contextmenu-container");r&&r.remove();const l=document.createElement("div");if(l.className="sa-folders-contextmenu-container",s.appendChild(l),"string"==typeof t.folder){s.setAttribute("sa-folders-context-type","folder");const r=n=>{const o=a(e,t.folder);if(c(e,t.folder,!1),o&&"string"==typeof n&&c(e,n,!0),"SPRITE"===e.props.dragType){for(const e of i.runtime.targets)e.isOriginal&&h(e.getName())===t.folder&&i.renameSprite(e.id,v(m(e.getName(),n)));i.emitWorkspaceUpdate(),D()}else if("COSTUME"===e.props.dragType){for(let e=0;e<i.editingTarget.sprite.costumes.length;e++){const o=i.editingTarget.sprite.costumes[e];h(o.name)===t.folder&&i.renameCostume(e,m(o.name,n))}M()}else if("SOUND"===e.props.dragType){for(let e=0;e<i.editingTarget.sprite.sounds.length;e++){const o=i.editingTarget.sprite.sounds[e];h(o.name)===t.folder&&i.renameSound(e,m(o.name,n))}S()}},d=()=>{let e=prompt(o("rename-folder-prompt"),t.folder);null!==e&&(f(e)?(e||(e=null),r(e)):alert(o("name-not-allowed")))},u=()=>{r(null)};l.appendChild(n(o("rename-folder"),d)),l.appendChild(n(o("remove-folder"),u))}else{s.setAttribute("sa-folders-context-type","asset");const a=t=>{if("SPRITE"===e.props.dragType){const n=i.runtime.getTargetById(e.props.id);i.renameSprite(e.props.id,v(m(n.getName(),t))),D(),i.emitWorkspaceUpdate()}else if("COSTUME"===e.props.dragType){const n=k(e.props).realIndex,o=i.editingTarget.sprite.costumes[n];i.renameCostume(i.editingTarget.sprite.costumes.indexOf(o),m(o.name,t)),M()}else if("SOUND"===e.props.dragType){const n=k(e.props).realIndex,o=i.editingTarget.sprite.sounds[n];i.renameSound(i.editingTarget.sprite.sounds.indexOf(o),m(o.name,t)),S()}},r=()=>{const e=prompt(o("name-prompt"),g(t.realName));null!==e&&(f(e)?a(e):alert(o("name-not-allowed")))};l.appendChild(n(o("create-folder"),r,!0));const c=t.inFolder;"string"==typeof c&&l.appendChild(n(o("remove-from-folder"),()=>a(null)));for(const t of(e=>{const t=new Set;let n;n="SPRITE"===e.props.dragType?u:p;for(const e of n){const n=k(e);"string"==typeof n.folder&&t.add(n.folder)}return Array.from(t)})(e))t!==c&&l.appendChild(n(o("add-to-folder",{folder:t}),()=>a(t)))}},a=(e,t)=>{const n=y(e.ref);return(n.state&&n.state.folders||[]).includes(t)},c=(e,t,n)=>{y(e.ref).setState(e=>{let o=e&&e.folders||[];return o=o.filter(e=>e!==t),n?{folders:[...o,t]}:{folders:o}})};for(const e of["handleDelete","handleDuplicate","handleExport"]){const n=t.prototype[e];t.prototype[e]=function(...e){if("number"==typeof this.props.id){const t=k(this.props);if(t){const o=this.props;this.props=r(r({},o),{},{id:t.realIndex});const s=n.call(this,...e);return this.props=o,s}}return n.call(this,...e)}}const l=t.prototype.handleDragEnd;t.prototype.handleDragEnd=function(...t){const n=k(this.props);if(n&&"number"==typeof n.realIndex&&this.props.dragging){const t=this.props.index,o=n.realIndex;if(t!==o){const n=e.tab.redux.state.scratchGui.assetDrag.currentOffset,s=y(this.ref);n&&s&&null===s.getMouseOverIndex()&&(this.props.index=o,this.handleDrag(n),this.props.index=t)}}return l.call(this,...t)};const d=t.prototype.handleClick;t.prototype.handleClick=function(...e){const t=e[0];if(t&&!this.noClick){const e=k(this.props);if(e){if("string"==typeof e.folder)return t.preventDefault(),void c(this,e.folder,!a(this,e.folder));if("number"==typeof this.props.number&&"number"==typeof e.realIndex)return t.preventDefault(),void(this.props.onClick&&this.props.onClick(e.realIndex))}}return d.call(this,...e)};const b=t.prototype.setRef;t.prototype.setRef=function(e){b.call(this,e),e&&e.elem.addEventListener("contextmenu",e=>{s(this)})};const w=t.prototype.render;t.prototype.render=function(){const e=k(this.props);if(e){const t=this.props;this.props=r({},this.props),"string"==typeof e.realName&&(this.props.name=g(e.realName)),"number"==typeof this.props.number&&"number"==typeof e.realIndex&&(this.props.number=e.realIndex+1),"string"==typeof e.folder&&(this.props.name=e.folder,e.folderOpen?this.props.details=o("open-folder"):this.props.details=o("closed-folder"),this.props.selected=!1,this.props.number=null,this.props.className+=" ".concat(L(e.folder)," sa-folders-folder")),"string"==typeof e.inFolder&&(this.props.className+=" ".concat(L(e.inFolder)));const n=w.call(this);return this.props=t,n}return w.call(this)}},j=()=>{const e=i.runtime.targets[0].constructor,t=i.installTargets;i.installTargets=function(...e){if(null!==l){const t=e[0],n=e[2];if(Array.isArray(t)&&!n)for(const e of t)e.sprite&&(e.sprite.name=m(e.sprite.name,l))}return t.call(this,...e).then(e=>(D(),e))};const o=e.prototype.addCostume;e.prototype.addCostume=function(...e){if(null!==d){const t=e[0];t&&"string"!=typeof h(t.name)&&(t.name=m(t.name,d))}const t=o.call(this,...e);return M(this),t};const s=e.prototype.addSound;e.prototype.addSound=function(...e){if(null!==d){const t=e[0];t&&"string"!=typeof h(t.name)&&(t.name=m(t.name,d))}const t=s.call(this,...e);return S(this),t};const a=({guiItems:e,getAll:t,set:o,rename:s,getVMItemFromGUIItem:a,zeroIndexed:r,onFolderChanged:i},c,l)=>{if((c=w(c,0,e.length))===(l=w(l,0,e.length)))return!1;let d=t();const u=t(),p=e[c-(r?0:1)],h=e[l-(r?0:1)],g=k(p),f=k(h);if(!g||!f)return n.warn("should never happen"),!1;const b=("string"==typeof g.folder?p.items:[p]).map(e=>a(e,d)).filter(e=>e);if("number"==typeof f.realIndex){const e=a(h,d);if(!e||b.includes(e))return!1}let v,y=null;if(d=d.filter(e=>!b.includes(e)),l===(r?0:1))v=r?0:1;else if(l===e.length-(r?1:0))v=d.length;else if("number"==typeof f.realIndex){y="string"==typeof f.inFolder?f.inFolder:null;let e=a(h,d);if(!e)return n.warn("should never happen"),!1;v=d.indexOf(e),l>c&&v++}else{if("string"!=typeof f.folder)return n.warn("should never happen"),!1;{let e,t=0;l<c?e=h.items[0]:f.folderOpen?(e=h.items[0],y=f.folder):(e=h.items[h.items.length-1],t=1);let o=a(e,d);if(o)v=d.indexOf(o)+t;else{if(o=a(e,u),!o)return n.warn("should never happen"),!1;v=u.indexOf(o)+t}}}if("string"!=typeof g.folder||null===y){if(v<(r?0:1)||v>d.length)return n.warn("should never happen"),!1;if(d.splice(v,0,...b),o(d),"string"!=typeof g.folder&&g.inFolder!==y){for(const e of b){const t=e.getName?e.getName():e.name;s(e,m(t,y))}i&&i()}return!0}};i.constructor.prototype.reorderTarget=function(e,t){return a({getAll:()=>this.runtime.targets,set:e=>{this.runtime.targets=e,this.emitTargetsUpdate()},rename:(e,t)=>{this.renameSprite(e.id,v(t))},getVMItemFromGUIItem:(e,t)=>t.find(t=>t.id===e.id),onFolderChanged:()=>{this.emitWorkspaceUpdate()},guiItems:u,zeroIndexed:!1},e,t)},e.prototype.reorderCostume=function(e,t){return a({getAll:()=>this.sprite.costumes,set:e=>{this.sprite.costumes=e},rename:(e,t)=>{this.renameCostume(this.sprite.costumes.indexOf(e),t)},getVMItemFromGUIItem:(e,t)=>{const n=k(e);return t.find(e=>e.name===n.realName)},guiItems:p,zeroIndexed:!0},e,t)},e.prototype.reorderSound=function(e,t){return a({getAll:()=>this.sprite.sounds,set:e=>{this.sprite.sounds=e},rename:(e,t)=>{this.renameSound(this.sprite.sounds.indexOf(e),t)},getVMItemFromGUIItem:(e,t)=>{const n=k(e);return t.find(e=>e.name===n.realName)},guiItems:p,zeroIndexed:!0},e,t)}},B=e=>{const t=e.constructor;t.prototype.sa_loadNextItem=function(){if(!this.sa_queuedItems)return;const e=this.sa_queuedItems.pop();if(e){let t,o;e.dragPayload?(o=e.url?"SOUND":"COSTUME",t=e.dragPayload):e.id&&(o="SPRITE",t=e.id),o&&t&&n.call(this,{dragType:o,payload:t})}},t.prototype.componentDidUpdate=function(e,t){this.state.loading||!t.loading||this.state.error||this.sa_loadNextItem()};const n=t.prototype.handleDrop;t.prototype.handleDrop=function(...e){const t=e[0],s=t&&t.payload&&t.payload.sa_folder_items;if(!Array.isArray(s))return n.call(this,...e);confirm(o("confirm-backpack-folder"))&&(this.sa_queuedItems=s,this.sa_loadNextItem())},e.handleDrop=t.prototype.handleDrop.bind(e)};await(()=>{if("editor"!==e.tab.editorMode)return new Promise((t,n)=>{const o=()=>{"editor"===e.tab.editorMode&&(t(),e.tab.removeEventListener("urlChange",o))};e.tab.addEventListener("urlChange",o)})})();{const e=t=>{t.target.closest('[class*="backpack_backpack-header_"]')&&setTimeout(()=>{const t=document.querySelector("[class^='backpack_backpack-list_']");if(!t)return;document.removeEventListener("click",e);const n=(e=>{const t=e.closest('[class*="gui_editor-wrapper"]');if(!t)throw new Error("cannot find Backpack");return t[c].child.sibling.child.child.stateNode})(t);(e=>{const t=e.constructor;if("function"!=typeof t.prototype.handleDrop||void 0!==t.prototype.componentDidUpdate)throw new Error("Can not comprehend Backpack")})(n),B(n)})};document.addEventListener("click",e,!0)}{const t=await e.tab.waitForElement("[class^='sprite-selector_sprite-wrapper']",{reduxCondition:e=>!e.scratchGui.mode.isPlayerOnly});i=e.tab.traps.vm,c=Object.keys(t).find(e=>e.startsWith("__reactInternalInstance$"));const n=y(t),o=t[c].child.child.child.stateNode;I(n),(e=>{const t=e.constructor;if("object"!=typeof e.props.asset||"string"!=typeof e.props.name||"string"!=typeof e.props.dragType||"function"!=typeof t.prototype.handleClick||"function"!=typeof t.prototype.setRef||"function"!=typeof t.prototype.handleDrag||"function"!=typeof t.prototype.handleDragEnd||"function"!=typeof t.prototype.handleDelete||"function"!=typeof t.prototype.handleDuplicate||"function"!=typeof t.prototype.handleExport)throw new Error("Can not comprehend SpriteSelectorItem")})(o),(e=>{const t=e.runtime.targets[0];if("function"!=typeof e.installTargets||"function"!=typeof e.reorderTarget||"function"!=typeof t.reorderCostume||"function"!=typeof t.reorderSound||"function"!=typeof t.addCostume||"function"!=typeof t.addSound)throw new Error("Can not comprehend VM")})(i),N(n.constructor,1),O(o.constructor),n.saInitialSetup(),j()}{const t=await e.tab.waitForElement("[class*='selector_list-item']",{reduxCondition:e=>0!==e.scratchGui.editorTab.activeTabIndex&&!e.scratchGui.mode.isPlayerOnly}),n=y(t);I(n),N(n.constructor,2),n.saInitialSetup()}}},1945:function(e,t,n){"use strict";n.r(t);var o=n(2010),s=n.n(o),a=n(2011),r=n.n(a),i=n(2012),c=n.n(i),l=n(1922),d=n.n(l),u=n(2013),p=n.n(u),h=n(1921);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const b=e=>{if("/active.png"===e)return s.a;if("/close.svg"===e)return r.a;if("/cursor.png"===e)return c.a;if("/dot.svg"===e)return d.a;if("/gamepad.svg"===e)return p.a;throw new Error("Unknown asset: ".concat(e))};t.default=async function({addon:e,global:t,console:n,msg:o}){const s=e.tab.traps.vm;await new Promise(e=>{if(s.editingTarget)return e();s.runtime.once("PROJECT_LOADED",e)});const a=()=>null!==s.runtime._steppingInterval,r=e=>{switch(e){case"right arrow":return"ArrowRight";case"up arrow":return"ArrowUp";case"left arrow":return"ArrowLeft";case"down arrow":return"ArrowDown";case"enter":return"Enter";case"space":return" "}return e.toLowerCase().charAt(0)},i=()=>{const e=[s.runtime.getTargetForStage(),...s.runtime.targets].filter(e=>e.isOriginal).map(e=>e.blocks),t=new Set;for(const n of e)for(const e of Object.values(n._blocks))if("event_whenkeypressed"===e.opcode||"sensing_keyoptions"===e.opcode){if("sensing_keyoptions"===e.opcode&&!e.parent)continue;const n=e.fields.KEY_OPTION.value;t.add(r(n))}return t},c=()=>{const e=s.runtime.getTargetForStage().comments;for(const t of Object.values(e))if(t.text.includes(" // _gamepad_"))return t;return null};h.default.setConsole(n);const l=new h.default,d=(()=>{const e=c();if(!e)return null;const t=e.text.split("\n").find(e=>e.endsWith(" // _gamepad_"));if(!t)return n.warn("Gamepad comment does not contain valid line"),null;const o=t.substr(0,t.length-" // _gamepad_".length);let s;try{if(s=JSON.parse(o),!s||"object"!=typeof s||!Array.isArray(s.buttons)||!Array.isArray(s.axes))throw new Error("Invalid data")}catch(e){return n.warn("Gamepad comment has invalid JSON",e),null}return s})();l.getHintsLazily=()=>d?{importedSettings:d}:{usedKeys:i()},e.settings.get("hide")&&await new Promise(t=>{const n=()=>{e.settings.removeEventListener("change",o),t()},o=()=>{e.settings.get("hide")||n()};l.gamepadConnected().then(n),e.settings.addEventListener("change",o)});const u=s.runtime.renderer,p=u._xRight-u._xLeft,g=u._yTop-u._yBottom,f=u.canvas,v=document.createElement("div");v.className="sa-gamepad-container",e.tab.displayNoneWhileDisabled(v,{display:"flex"});const y=document.createElement("span");y.className=e.tab.scratchClass("button_outlined-button","stage-header_stage-button");const w=document.createElement("div");w.className=e.tab.scratchClass("button_content");const k=document.createElement("img");k.className=e.tab.scratchClass("stage-header_stage-button-icon"),k.draggable=!1,k.src=b("/gamepad.svg"),w.appendChild(k),y.appendChild(w),v.appendChild(y);const x=document.createElement("div");let C;x.className="sa-gamepad-spacer";let E=!1;const _=()=>{s.runtime.emitProjectChanged(),s.editingTarget===s.runtime.getTargetForStage()&&s.emitWorkspaceUpdate()},L=()=>{const e=C.export();if(!e)return void n.warn("Could not export gamepad settings");const t="".concat(o("config-header"),"\n").concat(JSON.stringify(e)).concat(" // _gamepad_"),a=c();if(a)a.text=t;else{s.runtime.getTargetForStage().createComment(Math.random()+"",null,t,50,50,350,150,!1)}_()},T=()=>{E&&L()},D=e=>{E=!!e.target.checked,E?L():(()=>{const e=c();if(e){delete s.runtime.getTargetForStage().comments[e.id],_()}})()},M=()=>{document.body.classList.toggle("sa-gamepad-has-controller",C.hasControllerSelected()),T()};y.addEventListener("click",()=>{C||(C=l.editor(),C.msg=o,C.addEventListener("mapping-changed",T),C.addEventListener("gamepad-changed",M));const t=C.generateEditor();M();const n=()=>{r.remove(),document.body.removeEventListener("click",s,!0),window.removeEventListener("keydown",a),e.self.removeEventListener("disabled",n),C.hide()},s=e=>{i.contains(e.target)||n()},a=e=>{"Escape"!==e.key||e.target.closest("[data-accepting-input]")||n()};document.body.addEventListener("click",s,!0),window.addEventListener("keydown",a),e.self.addEventListener("disabled",n);const r=document.createElement("div");r.className=e.tab.scratchClass("modal_modal-overlay",{others:"sa-gamepad-popup-outer"});const i=document.createElement("div");i.className=e.tab.scratchClass("modal_modal-content",{others:"sa-gamepad-popup"});const c=document.createElement("div");c.className=e.tab.scratchClass("modal_header");const d=document.createElement("div");d.className=e.tab.scratchClass("modal_header-item","modal_header-item-title"),d.textContent=o("settings"),c.appendChild(d);const u=document.createElement("div");u.className=e.tab.scratchClass("modal_header-item","modal_header-item-close");const p=document.createElement("div");p.className=e.tab.scratchClass("close-button_close-button","close-button_large"),p.tabIndex="0",p.setAttribute("role","button");const g=document.createElement("img");g.className=e.tab.scratchClass("close-button_close-icon"),g.src=b("/close.svg"),p.appendChild(g),u.appendChild(p),c.appendChild(u),p.addEventListener("click",n);const m=document.createElement("div");if(m.className="sa-gamepad-popup-content",h.default.browserHasBrokenGamepadAPI()){const e=document.createElement("div");e.textContent=o("browser-support"),e.className="sa-gamepad-browser-support-warning",m.appendChild(e)}m.appendChild(t);const f=document.createElement("label");f.className="sa-gamepad-store-settings",f.textContent=o("store-in-project");const v=document.createElement("input");v.type="checkbox",v.checked=E,v.addEventListener("change",D),f.prepend(v),m.appendChild(f),i.appendChild(c),i.appendChild(m),r.appendChild(i),document.body.appendChild(r),C.focus()}),e.tab.redux.state&&"small"===e.tab.redux.state.scratchGui.stageSize.stageSize&&document.body.classList.add("sa-gamepad-small"),document.addEventListener("click",e=>{e.target.closest("[class*='stage-header_stage-button-first']")?document.body.classList.add("sa-gamepad-small"):e.target.closest("[class*='stage-header_stage-button-last']")&&document.body.classList.remove("sa-gamepad-small")},{capture:!0});const S=document.createElement("img");let I;S.hidden=!0,S.className="sa-gamepad-cursor",S.src=b("/cursor.png"),e.self.addEventListener("disabled",()=>{S.hidden=!0});const A=e=>{S.hidden=!e,clearTimeout(I),e&&(document.body.classList.add("sa-gamepad-hide-cursor"),I=setTimeout(N,8e3))},N=()=>{A(!1)},O=e=>{A(!0),S.classList.toggle("sa-gamepad-cursor-down",e)};let j;if(document.addEventListener("mousemove",()=>{A(!1),document.body.classList.remove("sa-gamepad-hide-cursor")}),window.ResizeObserver){let e=p,t=g;new ResizeObserver(n=>{for(const o of n)e=o.contentRect.width,t=o.contentRect.height}).observe(f),j=()=>[e,t]}else j=()=>{const e=f.getBoundingClientRect();return[e.width,e.height]};let B=0,P=0;const R=t=>{if(e.self.disabled||!a())return;const[n,o]=j();s.postIOData("mouse",m(m({},t),{},{canvasWidth:n,canvasHeight:o,x:(B+p/2)*(n/p),y:o/g*(g/2-P)}))},F=(t,n)=>{!e.self.disabled&&a()&&s.postIOData("keyboard",{key:t,isDown:n})};for(l.virtualCursor.maxX=u._xRight,l.virtualCursor.minX=u._xLeft,l.virtualCursor.maxY=u._yTop,l.virtualCursor.minY=u._yBottom,l.addEventListener("keydown",e=>F(e.detail,!0)),l.addEventListener("keyup",e=>F(e.detail,!1)),l.addEventListener("mousedown",()=>{O(!0),R({isDown:!0})}),l.addEventListener("mouseup",()=>{O(!1),R({isDown:!1})}),l.addEventListener("mousemove",e=>{B=e.detail.x,P=e.detail.y,((e,t)=>{A(!0);const n=p/2+e-3,o=g/2-t-3;S.style.transform="translate(".concat(n,"px, ").concat(o,"px)")})(B,P),R({})});;){const t=await e.tab.waitForElement('[class^="stage-header_stage-size-row"], [class^="stage-header_stage-menu-wrapper"] > [class^="button_outlined-button"]',{markAsSeen:!0,reduxEvents:["scratch-gui/mode/SET_PLAYER","scratch-gui/mode/SET_FULL_SCREEN","fontsLoaded/SET_FONTS_LOADED","scratch-gui/locales/SELECT_LOCALE"]});v.dataset.editorMode=e.tab.editorMode,t.className.includes("stage-size-row")?(t.insertBefore(v,t.firstChild),x.remove()):(x.appendChild(v),t.parentElement.insertBefore(x,t));document.querySelector("[class^='monitor-list_monitor-list-scaler']").appendChild(S)}}},1946:function(e,t,n){"use strict";n.r(t);var o=n(2014),s=n.n(o),a=n(2015),r=n.n(a);const i=e=>{if("/lock.svg"===e)return s.a;if("/unlock.svg"===e)return r.a;throw new Error("Unknown asset: ".concat(e))};t.default=async function({addon:e,global:t,console:n}){let o=null,s=null,a=null,r=null,c=!0,l=null,d=e.settings.get("toggle"),u=!1;function p(){return{none:"0",short:"0.25",default:"0.5",long:"1"}[e.settings.get("speed")]}function h(e={}){e="object"==typeof e?p():e,a.classList.remove("sa-flyoutClose"),a.style.transitionDuration="".concat(e,"s"),r.classList.remove("sa-flyoutClose"),r.style.transitionDuration="".concat(e,"s"),s.classList.remove("sa-flyoutClose"),s.style.transitionDuration="".concat(e,"s"),setTimeout(()=>Blockly.getMainWorkspace().recordCachedAreas(),1e3*e)}function g(e,t=p()){"cathover"!==d&&e&&e.clientX<=r.getBoundingClientRect().left||u||(a.classList.add("sa-flyoutClose"),a.style.transitionDuration="".concat(t,"s"),r.classList.add("sa-flyoutClose"),r.style.transitionDuration="".concat(t,"s"),s.classList.add("sa-flyoutClose"),s.style.transitionDuration="".concat(t,"s"),setTimeout(()=>Blockly.getMainWorkspace().recordCachedAreas(),1e3*t))}let m=!1;for(;;){a=await e.tab.waitForElement(".blocklyFlyout",{markAsSeen:!0,reduxEvents:["scratch-gui/mode/SET_PLAYER","fontsLoaded/SET_FONTS_LOADED","scratch-gui/locales/SELECT_LOCALE"],reduxCondition:e=>!e.scratchGui.mode.isPlayerOnly});let t=document.querySelector(".blocklySvg");r=document.querySelector(".blocklyFlyoutScrollbar");const n=document.querySelector('[class^="gui_tabs"]');o&&o.remove(),o=document.createElement("div"),"hover"===d&&n.appendChild(o),o.className="sa-flyout-placeHolder",s&&s.remove(),s=document.createElement("img"),s.src=i("/".concat(u?"":"un","lock.svg")),s.className="sa-lock-image",s.onclick=()=>{u=!u,s.src=i("/".concat(u?"":"un","lock.svg"))},"hover"===d&&n.appendChild(s),"hover"===d&&(o.onmouseenter=h,t.onmouseenter=g),"cathover"===d&&g(null,0),m||(m=!0,e.tab.redux.initialize(),e.tab.redux.addEventListener("statechanged",e=>{switch(e.detail.action.type){case"scratch-gui/navigation/ACTIVATE_TAB":s.style.display=0===e.detail.action.activeTabIndex?"block":"none",o.style.display=0===e.detail.action.activeTabIndex?"block":"none",0===e.detail.action.activeTabIndex&&(h(0),c=!0);break;case"scratch-gui/mode/SET_PLAYER":s.style.display=e.detail.action.isPlayerOnly?"none":"block",o.style.display=0===e.detail.action.activeTabIndex?"block":"none"}}),"category"!==d&&"cathover"!==d||(async()=>{for(;;){let t=await e.tab.waitForElement(".scratchCategoryMenuItem",{markAsSeen:!0,condition:()=>!e.tab.redux.state.scratchGui.mode.isPlayerOnly});t.onclick=()=>{if(c&&l===t&&"category"===d)g(),l=t;else{if(c)return void(l=t);h(),l=t}"category"===d&&(c=!c)},"cathover"===d&&(t.onmouseover=h,a.onmouseleave=g)}})())}}},1947:function(e,t,n){"use strict";n.r(t),t.default=async function({addon:e}){let t=e.tab.traps.vm,n=t.constructor.prototype.addSprite;t.constructor.prototype.addSprite=function(t){var o,s;let a,r=!0;return"object"==typeof t?[a,r]=[t,!1]:a=JSON.parse(t),!("cd21514d0531fdffb22204e0ec5ed84a.svg"===(null===(o=a.costumes)||void 0===o||null===(s=o[0])||void 0===s?void 0:s.baseLayerMD5))&&a.tags&&e.settings.get("library")||(a.scratchX&&(a.scratchX=e.settings.get("x"),a.scratchY=e.settings.get("y")),a.x&&(a.x=e.settings.get("x"),a.y=e.settings.get("y"))),n.call(this,r?JSON.stringify(a):a)}}},1948:function(e,t,n){"use strict";n.r(t),t.default=async function({addon:e,global:t,console:n}){const o=["music","pen","text2speech","translate"];for(let t of o)e.settings.get(t)&&!e.tab.traps.vm.extensionManager.isExtensionLoaded(t)&&e.tab.traps.vm.extensionManager.loadExtensionIdSync(t)}},1949:function(e,t,n){"use strict";n.r(t);var o=n(1936);t.default=async({addon:e,console:t,msg:n})=>{const s=["video/webm","video/mp4"].find(e=>MediaRecorder.isTypeSupported(e));if(!s)throw new Error("no video types supported");let a,r,i,c=!1,l=!1,d=null,u=null,p=null,h=[];for(;;){const g=await e.tab.waitForElement('div[class*="menu-bar_file-group"] > div:last-child:not(.sa-record)',{markAsSeen:!0,reduxEvents:["scratch-gui/mode/SET_PLAYER","fontsLoaded/SET_FONTS_LOADED","scratch-gui/locales/SELECT_LOCALE"]}),m=()=>{const t=Object.assign(document.createElement("div"),{className:e.tab.scratchClass("modal_modal-overlay")}),o=Object.assign(document.createElement("div"),{className:e.tab.scratchClass("modal_modal-content",{others:"mediaRecorderPopup"}),dir:e.tab.direction}),a=Object.assign(document.createElement("div"),{className:e.tab.scratchClass("modal_header")});a.appendChild(Object.assign(document.createElement("div"),{className:e.tab.scratchClass("modal_header-item","modal_header-item-title"),textContent:n("option-title")})),o.appendChild(a);const r=Object.assign(document.createElement("div"),{className:"mediaRecorderPopupContent"});r.appendChild(Object.assign(document.createElement("p"),{textContent:"video/webm"===s?n("record-description"):n("record-description").replace("WebM","MP4"),className:"recordOptionDescription"}));const i=document.createElement("p"),c=Object.assign(document.createElement("input"),{type:"number",min:1,max:300,defaultValue:30,id:"recordOptionSecondsInput",className:e.tab.scratchClass("prompt_variable-name-text-input")}),l=Object.assign(document.createElement("label"),{htmlFor:"recordOptionSecondsInput",textContent:n("record-duration")});i.appendChild(l),i.appendChild(c),r.appendChild(i);const d=document.createElement("p"),u=Object.assign(document.createElement("input"),{type:"checkbox",defaultChecked:!0,id:"recordOptionAudioInput"}),p=Object.assign(document.createElement("label"),{htmlFor:"recordOptionAudioInput",textContent:n("record-audio"),title:n("record-audio-description")});d.appendChild(u),d.appendChild(p),r.appendChild(d);const h=document.createElement("p"),g=Object.assign(document.createElement("input"),{type:"checkbox",defaultChecked:!1,id:"recordOptionMicInput"}),m=Object.assign(document.createElement("label"),{htmlFor:"recordOptionMicInput",textContent:n("record-mic")});h.appendChild(g),h.appendChild(m),r.appendChild(h);const f=document.createElement("p"),b=Object.assign(document.createElement("input"),{type:"checkbox",defaultChecked:!0,id:"recordOptionFlagInput"}),v=Object.assign(document.createElement("label"),{htmlFor:"recordOptionFlagInput",textContent:n("record-after-flag")});f.appendChild(b),f.appendChild(v),r.appendChild(f);const y=document.createElement("p"),w=Object.assign(document.createElement("input"),{type:"checkbox",defaultChecked:!0,id:"recordOptionStopInput"}),k=Object.assign(document.createElement("label"),{htmlFor:"recordOptionStopInput",textContent:n("record-until-stop")});b.addEventListener("change",()=>{(w.disabled=!b.checked)&&(k.title=n("record-until-stop-disabled",{afterFlagOption:n("record-after-flag")}))}),y.appendChild(w),y.appendChild(k),r.appendChild(y);let x=null;const C=new Promise(e=>{x=e});let E=null;const _=e=>{o.contains(e.target)||E(null)};document.body.addEventListener("click",_,{capture:!0}),E=e=>{x(e),document.body.removeEventListener("click",_,{capture:!0}),t.remove()};const L=Object.assign(document.createElement("div"),{className:e.tab.scratchClass("prompt_button-row",{others:"mediaRecorderPopupButtons"})}),T=Object.assign(document.createElement("button"),{textContent:n("cancel")});T.addEventListener("click",()=>E(null),{once:!0}),L.appendChild(T);const D=Object.assign(document.createElement("button"),{textContent:n("start"),className:e.tab.scratchClass("prompt_ok-button")});return D.addEventListener("click",()=>E({secs:Number(c.value),audioEnabled:u.checked,micEnabled:g.checked,waitUntilFlag:b.checked,useStopSign:!w.disabled&&w.checked}),{once:!0}),L.appendChild(D),r.appendChild(L),o.appendChild(r),t.appendChild(o),document.body.appendChild(t),C},f=()=>{c=!1,a.textContent=n("record"),a.title="",r=null,h=[],clearTimeout(i),i=0,p&&(e.tab.traps.vm.runtime.off("PROJECT_STOP_ALL",p),p=null)},b=t=>{if(l)return e.tab.traps.vm.runtime.off("PROJECT_START",d),l=!1,d=null,u.abort(),u=null,void f();c&&r&&"inactive"!==r.state&&(t?f():(r.onstop=()=>{const e=new Blob(h,{type:s});Object(o.a)("video."+s.split("/")[1],e),f()},r.stop()))},v=async o=>{const g=Math.min(300,Math.max(1,o.secs));h=[],c=!0;const m=e.tab.traps.vm;let f;if(o.micEnabled)try{f=await navigator.mediaDevices.getUserMedia({audio:!0})}catch(e){if("NotAllowedError"!==e.name&&"NotFoundError"!==e.name)throw e;o.micEnabled=!1}if(o.waitUntilFlag){l=!0,Object.assign(a,{textContent:n("click-flag"),title:n("click-flag-description")}),u=new AbortController;try{await Promise.race([new Promise(e=>{d=()=>e(),m.runtime.once("PROJECT_START",d)}),new Promise((e,t)=>{u.signal.addEventListener("abort",()=>t("aborted"),{once:!0})})])}catch(e){if("aborted"===e.message)return;throw e}}a.textContent=n("stop"),l=!1,d=u=null;const v=new MediaStream,y=m.runtime.renderer.canvas.captureStream();v.addTrack(y.getVideoTracks()[0]);const w=new(window.AudioContext||window.webkitAudioContext),k=w.createMediaStreamDestination();if(o.audioEnabled){const e=m.runtime.audioEngine.audioContext.createMediaStreamDestination();m.runtime.audioEngine.inputNode.connect(e);w.createMediaStreamSource(e.stream).connect(k)}if(o.micEnabled){w.createMediaStreamSource(f).connect(k)}(o.audioEnabled||o.micEnabled)&&v.addTrack(k.stream.getAudioTracks()[0]),r=new MediaRecorder(v,{mimeType:s}),r.ondataavailable=e=>{h.push(e.data)},r.onerror=e=>{t.warn("Recorder error:",e.error),b(!0)},i=setTimeout(()=>b(!1),1e3*g),o.useStopSign&&(p=()=>b(),m.runtime.once("PROJECT_STOP_ALL",p)),r.start(1e3)};a||(a=Object.assign(document.createElement("div"),{className:"sa-record "+g.className,textContent:n("record")}),a.addEventListener("click",async()=>{if(c)b();else{const e=await m();if(!e)return void t.log("Canceled");v(e)}})),g.parentElement.appendChild(a)}}},1950:function(e,t,n){"use strict";n.r(t),t.default=async function({addon:e,global:t,console:n}){var o=document.createElement("div");e.tab.displayNoneWhileDisabled(o,{display:"flex"});var s=document.createElement("div"),a=document.createElement("span");o.className="pos-container-container",s.className="pos-container",o.appendChild(s),s.appendChild(a);const r=e.tab.traps.vm;r.runtime.ioDevices.mouse.__scratchX=r.runtime.ioDevices.mouse._scratchX,r.runtime.ioDevices.mouse.__scratchY=r.runtime.ioDevices.mouse._scratchY;var i=r.runtime.ioDevices.mouse.__scratchX?r.runtime.ioDevices.mouse.__scratchX:0,c=r.runtime.ioDevices.mouse.__scratchY?r.runtime.ioDevices.mouse.__scratchY:0;const l=()=>a.setAttribute("data-content","".concat(i,", ").concat(c));for(Object.defineProperty(r.runtime.ioDevices.mouse,"_scratchX",{get:function(){return this.__scratchX},set:function(e){i=e,l(),this.__scratchX=e}}),Object.defineProperty(r.runtime.ioDevices.mouse,"_scratchY",{get:function(){return this.__scratchY},set:function(e){c=e,l(),this.__scratchY=e}}),e.tab.redux.state&&"small"===e.tab.redux.state.scratchGui.stageSize.stageSize&&document.body.classList.add("sa-mouse-pos-small"),document.addEventListener("click",e=>{e.target.closest("[class*='stage-header_stage-button-first']")?document.body.classList.add("sa-mouse-pos-small"):e.target.closest("[class*='stage-header_stage-button-last']")&&document.body.classList.remove("sa-mouse-pos-small")},{capture:!0});;){let t=await e.tab.waitForElement('[class*="controls_controls-container"]',{markAsSeen:!0,reduxEvents:["scratch-gui/mode/SET_PLAYER","fontsLoaded/SET_FONTS_LOADED","scratch-gui/locales/SELECT_LOCALE"]});"editor"===e.tab.editorMode&&t.appendChild(o)}}},1951:function(e,t,n){"use strict";n.r(t);var o=n(2016),s=n.n(o);t.default=async function({addon:e,global:t,console:n}){const o=e.tab.traps.vm;let a=!1,r=document.createElement("img");r.loading="lazy",r.src=(e=>{if("/icon--mute.svg"===e)return s.a;throw new Error("Unknown asset: ".concat(e))})("/icon--mute.svg"),r.style.display="none";const i=e=>{if(e.ctrlKey){if(e.cancelBubble=!0,e.preventDefault(),"contextmenu"===e.type&&window.safari)return;a=!a,a?(o.runtime.audioEngine.inputNode.gain.value=0,r.style.display="block"):(o.runtime.audioEngine.inputNode.gain.value=1,r.style.display="none")}};for(;;){let t=await e.tab.waitForElement("[class^='green-flag_green-flag']",{markAsSeen:!0,reduxEvents:["scratch-gui/mode/SET_PLAYER","fontsLoaded/SET_FONTS_LOADED","scratch-gui/locales/SELECT_LOCALE"]});t.parentElement.appendChild(r),t.addEventListener("click",i),t.addEventListener("contextmenu",i)}}},1952:function(e,t,n){"use strict";n.r(t);var o=n(2017),s=n.n(o),a=n(2018),r=n.n(a),i=n(2019),c=n.n(i),l=n(2020),d=n.n(l);t.default=async function({addon:e,global:t,console:n,msg:o}){let a,i=null;const l=[],u=e=>{const t=e.substr(1),n=parseInt(t,16);return[n>>16&255,n>>8&255,255&n]},p={enabled:e.settings.get("default"),previous:+e.settings.get("previous"),next:+e.settings.get("next"),opacity:+e.settings.get("opacity"),opacityStep:+e.settings.get("opacityStep"),layering:e.settings.get("layering"),mode:e.settings.get("mode"),beforeTint:u(e.settings.get("beforeTint")),afterTint:u(e.settings.get("afterTint"))},h=()=>i&&i.project,g=e=>{i=e;const t=i.project.layers.find(e=>e.data.isBackgroundGuideLayer);a=t.children[0].position;const n=i.Project.prototype.addLayer;i.Project.prototype.addLayer=function(e){const t=n.call(this,e);if(e.data.isBackgroundGuideLayer){let e;for(;e=l.shift();)n.call(this,e);v()}return t};const o=i.Project.prototype.importJSON;i.Project.prototype.importJSON=function(e){const t=o.call(this,e);return p.enabled&&_(),t};const s=i.Layer.prototype.remove;i.Layer.prototype.remove=function(){if(this.data.isBackgroundGuideLayer){for(const e of i.project.layers)e.data.sa_isOnionLayer&&l.push(e);for(const e of l)e.remove()}return s.call(this)}},m=e=>{let t=!1;const n=e.constructor,o=n.prototype.importImage;n.prototype.importImage=function(...e){return t=!0,b(),o.call(this,...e)};const s=n.prototype.recalibrateSize;n.prototype.recalibrateSize=function(e){return s.call(this,()=>{e&&e(),t&&(t=!1,p.enabled&&_())})},e.recalibrateSize=n.prototype.recalibrateSize.bind(e),e.importImage=n.prototype.importImage.bind(e)},f=()=>{const e=new i.Layer;return e.locked=!0,e.guide=!0,e.data.sa_isOnionLayer=!0,e},b=()=>{const e=h();if(!e)return;l.length=0;const t=e.layers;for(let e=t.length-1;e>=0;e--){const n=t[e];n.data.sa_isOnionLayer&&n.remove()}},v=()=>{const e=h();if(!e)return;const t=[];for(const n of e.layers)n.data.sa_isOnionLayer&&t.push(n);if(t.sort((e,t)=>e.data.sa_onionIndex-t.data.sa_onionIndex),"front"===p.layering)for(const n of t)e.addLayer(n);else{if(0===e.layers.find(e=>e.data.isRasterLayer).index)for(const n of t)e.insertLayer(0,n);else for(const n of t)e.insertLayer(1,n)}},y=(e,t)=>{if(e.children)for(const n of e.children)y(n,t);t(e)},w=(e,t,n,o)=>{const s=o?p.beforeTint:p.afterTint,a=(e+t+n)/3/255/1.5+(1-1/1.5);return[s[0]*a,s[1]*a,s[2]*a]},k=(e,t)=>(([e,t,n])=>{const o=Math.round(e).toString(16).padStart(2,"0"),s=Math.round(t).toString(16).padStart(2,"0"),a=Math.round(n).toString(16).padStart(2,"0");return"#".concat(o).concat(s).concat(a)})(w(255*e.red,255*e.green,255*e.blue,t)),x=(e,t)=>{const{width:n,height:o}=e.canvas,s=e.context,a=s.getImageData(0,0,n,o),r=a.data;for(let e=0;e<r.length;e+=4){const n=r[e+0],o=r[e+1],s=r[e+2];if(0===r[e+3])continue;const[a,i,c]=w(n,o,s,t);r[e+0]=a,r[e+1]=i,r[e+2]=c}s.putImageData(a,0,0)},C=(e,t,n,o)=>new Promise((s,r)=>{const{rotationCenterX:c,rotationCenterY:l}=t,d=(n=(n=n.split(/<\s*svg:/).join("<")).split(/<\/\s*svg:/).join("</")).match(/<svg [^>]*>/);d&&-1===d[0].indexOf("xmlns=")&&(n=n.replace("<svg ",'<svg xmlns="http://www.w3.org/2000/svg" '));const u=(new DOMParser).parseFromString(n,"text/xml"),g=u.documentElement.attributes.viewBox?u.documentElement.attributes.viewBox.value.match(/\S+/g):null;if(g)for(let e=0;e<g.length;e++)g[e]=parseFloat(g[e]);h().importSVG(n,{expandShapes:!0,onLoad:t=>{if(t){if(t.remove(),y(t,e=>{"PathItem"===e.className&&(e.clockwise=!0),"PointText"===e.className||e.children||e.strokeWidth&&(e.strokeWidth=2*e.strokeWidth),e.locked=!0,e.guide=!0}),t.scale(2,new i.Point(0,0)),"tint"===p.mode){const e=new Set;y(t,t=>{if(t.strokeColor&&(t.strokeColor=k(t.strokeColor,o)),t.fillColor){const n=t.fillColor.gradient;if(n){if(e.has(n))return;e.add(n);for(const e of n.stops)e.color=k(e.color,o)}else t.fillColor=k(t.fillColor,o)}t.canvas&&x(t,o)})}if(void 0!==c&&void 0!==l){let e=new i.Point(c,l);g&&g.length>=2&&!isNaN(g[0])&&!isNaN(g[1])&&(e=e.subtract(g[0],g[1])),t.translate(a.subtract(e.multiply(2)))}else t.translate(a.subtract(t.bounds.width,t.bounds.height));e.addChild(t),s()}else r(new Error("could not load onion skin"))}})}),E=(e,t,n,o)=>new Promise((s,r)=>{let{rotationCenterX:c,rotationCenterY:l}=t;const d=new Image;d.onload=()=>{const t=Math.min(2*a.x,d.width),n=Math.min(2*a.y,d.height);void 0===c&&(c=t/2),void 0===l&&(l=n/2);const r=new i.Raster(((e,t)=>{const n=document.createElement("canvas");return n.width=e,n.height=t,n.getContext("2d").imageSmoothingEnabled=!1,n})(t,n));r.parent=e,r.guide=!0,r.locked=!0;const u=t/2+(a.x-c),h=n/2+(a.y-l);r.position=new i.Point(u,h),r.drawImage(d,0,0),"tint"===p.mode&&x(r,o),s()},d.onerror=()=>{r(new Error("could not load image"))},d.src=n}),_=async()=>{const t=h();if(!t)return;const o=(()=>{const e=document.querySelector("[class*='selector_list-item'][class*='sprite-selector-item_is-selected']");if(!e)return-1;const t=e.querySelector("[class*='sprite-selector-item_number']");return t?+t.textContent-1:-1})();if(-1===o)return;b();const s=e.tab.traps.vm;if(!s)return;const a=t.activeLayer,r=s.editingTarget.sprite.costumes,i=Math.max(0,o-p.previous),c=Math.min(r.length-1,o+p.next);try{for(let e=i;e<=c;e++){if(e===o)continue;const t=e<o,n=Math.abs(e-o)-1,i=p.opacity-p.opacityStep*n;if(i<=0)continue;const c=f();c.data.sa_onionIndex=e,c.opacity=i/100,v(),a.activate();const l=r[e],d=s.getCostume(e);if("svg"===l.dataFormat)await C(c,l,d,t);else{if("png"!==l.dataFormat&&"jpg"!==l.dataFormat)throw new Error("Unknown data format: ".concat(l.dataFormat));await E(c,l,d,t)}}}catch(e){n.error(e)}a.activate()},L=e=>{p.enabled!==e&&(p.enabled=e,p.enabled?(0===p.next&&0===p.previous&&(p.previous=1,F.previous.value=p.previous),0===p.opacity&&(p.opacity=25,F.opacity.value=p.opacity),_()):b(),O.dataset.enabled=p.enabled)},T=()=>{if(i)return;const e=document.querySelector("[class*='paint-editor_mode-selector']"),t=Object.keys(e).find(e=>e.startsWith("__reactInternalInstance$"));let n,o=e[t].child;for(;!(n=o.child.stateNode.tool);)o=o.sibling;const s=n._scope,a=document.querySelector("[class^='paint-editor_canvas-container']")[t].child.child.child.stateNode;s&&a&&(g(s),m(a))},D=e=>{0===p.previous&&0===p.next||0===p.opacity?L(!1):p.enabled?e?v():_():(p.previous>0||p.next>0)&&L(!0)},M=()=>{const e=document.createElement("div");return e.className="sa-onion-group",e},S=()=>{const e=document.createElement("span");return e.className="sa-onion-button",e.setAttribute("role","button"),e},I=e=>{const t=document.createElement("img");return t.className="sa-onion-image",t.draggable=!1,t.dataset.image=e,t.loading="lazy",t.src=(e=>{if("/decrement.svg"===e)return s.a;if("/increment.svg"===e)return r.a;if("/settings.svg"===e)return c.a;if("/toggle.svg"===e)return d.a;throw new Error("Unknown asset: ".concat(e))})("/"+e+".svg"),t},A=document.createElement("div");A.className="sa-onion-controls-container",A.dir="";const N=M(),O=S();O.dataset.enabled=p.enabled,O.addEventListener("click",()=>L(!p.enabled)),O.title=o("toggle"),O.appendChild(I("toggle")),N.appendChild(O);const j=S();j.addEventListener("click",()=>P(!R())),j.title=o("settings"),j.appendChild(I("settings")),N.appendChild(j),A.appendChild(N);const B=document.createElement("div");B.className="sa-onion-settings";const P=e=>{j.dataset.enabled=e,B.dataset.visible=e},R=()=>"true"===B.dataset.visible,F={};for(const e of["previous","next","opacity","opacityStep"]){const t=document.createElement("div");t.className="sa-onion-settings-line";const n=document.createElement("div");n.className="sa-onion-settings-label",n.textContent=o(e),t.appendChild(n);const s=M(),a=S(),r=document.createElement("div");r.style.width="20px",a.appendChild(r);const i=document.createElement("input");F[e]=i,i.className="sa-onion-settings-input",i.type="number",i.step="1",i.min="0",i.max="100",i.value=p[e],i.addEventListener("input",t=>{if(0===i.value.length)return p[e]=0,void D();let n=+i.value;n>+i.max?n=+i.max:n<0&&(n=0),i.value=n,p[e]=n,D()}),i.addEventListener("blur",()=>{i.value||(i.value="0")}),a.appendChild(i);const c=S();c.appendChild(I("decrement")),c.addEventListener("click",()=>{p[e]>0&&(p[e]--,i.value=p[e],D())});const l=S();l.appendChild(I("increment")),l.addEventListener("click",()=>{p[e]<+i.max&&(p[e]++,i.value=p[e],D())}),s.appendChild(c),s.appendChild(a),s.appendChild(l),t.appendChild(s),B.appendChild(t)}const z=document.createElement("div");z.className="sa-onion-settings-line";const H=document.createElement("div");H.className="sa-onion-settings-label",H.textContent=o("mode");const U=M();z.appendChild(H);const Y=S();Y.appendChild(document.createTextNode(o("merge"))),U.appendChild(Y),Y.addEventListener("click",e=>{p.mode="merge",W.dataset.enabled=!1,Y.dataset.enabled=!0,D()}),Y.dataset.enabled="merge"===p.mode;const W=S();W.appendChild(document.createTextNode(o("tint"))),U.appendChild(W),W.addEventListener("click",e=>{p.mode="tint",W.dataset.enabled=!0,Y.dataset.enabled=!1,D()}),W.dataset.enabled="tint"===p.mode,z.appendChild(U),B.appendChild(z);const G=document.createElement("div");G.className="sa-onion-settings-line";const V=document.createElement("div");V.className="sa-onion-settings-label",V.textContent=o("layering");const X=M();G.appendChild(V);const Z=S();Z.appendChild(document.createTextNode(o("front"))),X.appendChild(Z),Z.addEventListener("click",e=>{p.layering="front",q.dataset.enabled=!1,Z.dataset.enabled=!0,D(!0)}),Z.dataset.enabled="front"===p.layering;const q=S();q.appendChild(document.createTextNode(o("behind"))),X.appendChild(q),q.addEventListener("click",e=>{p.layering="behind",q.dataset.enabled=!0,Z.dataset.enabled=!1,D(!0)}),q.dataset.enabled="behind"===p.layering,G.appendChild(X),B.appendChild(G);const Q="http://www.w3.org/2000/svg",K=document.createElementNS(Q,"svg");K.setAttribute("class","sa-onion-settings-tip"),K.setAttribute("width","14"),K.setAttribute("height","7");const J=document.createElementNS(Q,"polygon");J.setAttribute("class","sa-onion-settings-polygon"),J.setAttribute("points","0,0 7,7, 14,0"),K.appendChild(J),B.appendChild(K);await(()=>{if("editor"!==e.tab.editorMode)return new Promise((t,n)=>{const o=()=>{"editor"===e.tab.editorMode&&(t(),e.tab.removeEventListener("urlChange",o))};e.tab.addEventListener("urlChange",o)})})(),(async()=>{let t=!1;for(;;){const n=await e.tab.waitForElement("[class^='paint-editor_canvas-controls']",{markAsSeen:!0,reduxCondition:e=>1===e.scratchGui.editorTab.activeTabIndex&&!e.scratchGui.mode.isPlayerOnly});T();const o=n.querySelector("[class^='paint-editor_zoom-controls']"),s=document.querySelector("[class^='paint-editor_canvas-container']"),a=A.querySelector("[class^='paint-editor_zoom-controls']");if(a&&a.parentNode.removeChild(a),A.appendChild(o),n.appendChild(A),s.appendChild(B),!t){t=!0;const e=o.firstChild.className,n=o.firstChild.firstChild.className,s=o.firstChild.firstChild.firstChild.className;for(const t of document.querySelectorAll(".sa-onion-group"))t.className+=" "+e;for(const e of document.querySelectorAll(".sa-onion-button"))e.className+=" "+n;for(const e of document.querySelectorAll(".sa-onion-image"))e.className+=" "+s}p.enabled&&_()}})()}},1953:function(e,t,n){"use strict";n.r(t);var o=n(2021),s=n.n(o),a=n(2022),r=n.n(a),i=n(1906);t.default=async function({addon:e,global:t,console:n,msg:o}){const a=document.createElement("img");a.className="pause-btn",a.draggable=!1,a.title=o("pause");const c=()=>a.src=(e=>{if("/pause.svg"===e)return s.a;if("/play.svg"===e)return r.a;throw new Error("Unknown asset: ".concat(e))})(i.paused?"/play.svg":"/pause.svg");for(a.addEventListener("click",()=>Object(i.setPaused)(!i.paused)),e.tab.displayNoneWhileDisabled(a),e.self.addEventListener("disabled",()=>Object(i.setPaused)(!1)),c(),Object(i.onPauseChanged)(c);;){(await e.tab.waitForElement("[class^='green-flag']",{markAsSeen:!0,reduxEvents:["scratch-gui/mode/SET_PLAYER","fontsLoaded/SET_FONTS_LOADED","scratch-gui/locales/SELECT_LOCALE"]})).insertAdjacentElement("afterend",a)}}},1954:function(e,t,n){"use strict";n.r(t),t.default=async({addon:e,console:t,msg:n})=>{if(!e.tab.redux.state)return t.warn("Redux is not available!");const o=e.tab.traps.vm;if(!o)return;const s=o.deleteSprite;o.deleteSprite=function(...t){if(confirm(n("confirm")))return s.apply(this,t);const o=Object.assign({},e.tab.redux.state.scratchGui.restoreDeletion);return setTimeout(()=>e.tab.redux.dispatch({type:"scratch-gui/restore-deletion/RESTORE_UPDATE",state:o}),100),Promise.resolve()}}},1955:function(e,t,n){"use strict";n.r(t),t.default=async function(){window.dispatchEvent(new Event("resize"))}},1956:function(e,t,n){"use strict";n.r(t),t.default=async function({addon:e,console:t,msg:n}){const o=e.tab.traps.vm,s=()=>{let e=0,t=0,n=new Set(o.runtime.targets.map(e=>e.sprite.blocks._blocks));return n.forEach((n,o)=>{t+=Object.values(n).filter(e=>!e.parent).length,e+=Object.values(n).filter(e=>!e.shadow).length}),{blockCount:e,scriptCount:t,spriteCount:n.size-1}},a=async()=>{if(o.editingTarget)for(;;){let t,a=(await e.tab.waitForElement("[class^='menu-bar_main-menu']",{markAsSeen:!0,reduxEvents:["scratch-gui/mode/SET_PLAYER"]})).appendChild(document.createElement("span"));e.tab.displayNoneWhileDisabled(a),a.style.order=1,a.style.padding="9px",a.innerText=n("blocks",{num:s().blockCount}),o.on("PROJECT_CHANGED",()=>{clearTimeout(t),t=setTimeout(()=>{a.innerText=n("blocks",{num:s().blockCount})},1e3)})}else{let e=setTimeout((function(){a(),clearTimeout(e)}),1e3)}};a()}},1957:function(e,t,n){"use strict";n.r(t);var o=n(2023),s=n.n(o),a=n(1923),r=n.n(a);t.default=async function({addon:e,global:t,console:n,msg:o}){const a=e.tab.traps.vm;let i=[],c=[],l=!1;const d=document.createElement("div");d.classList.add(e.tab.scratchClass("asset-panel_wrapper"),"sa-var-manager");const u=document.createElement("input");u.placeholder=o("search"),u.className=e.tab.scratchClass("input_input-form",{others:"sa-var-manager-searchbox"}),u.addEventListener("input",e=>{for(const e of i)e.handleSearch(u.value);for(const e of c)e.handleSearch(u.value);k()}),d.appendChild(u);const p=document.createElement("div"),h=document.createElement("span"),g=document.createElement("table");h.className="sa-var-manager-heading",h.innerText=o("for-this-sprite"),p.appendChild(h),p.appendChild(g);const m=document.createElement("div"),f=document.createElement("span"),b=document.createElement("table");f.className="sa-var-manager-heading",f.innerText=o("for-all-sprites"),m.appendChild(f),m.appendChild(b),d.appendChild(p),d.appendChild(m);const v=document.createElement("li");v.classList.add(e.tab.scratchClass("react-tabs_react-tabs__tab"),e.tab.scratchClass("gui_tab")),v.id="react-tabs-7";const y=document.createElement("img");y.draggable=!1,y.src=(e=>{if("/icon.svg"===e)return s.a;if("/search.svg"===e)return r.a;throw new Error("Unknown asset: ".concat(e))})("/icon.svg");const w=document.createElement("span");function k(){let e=i.filter(e=>"none"!==e.row.style.display),t=c.filter(e=>"none"!==e.row.style.display);h.style.display=0===e.length?"none":"",f.style.display=0===t.length?"none":""}w.innerText=o("variables"),v.appendChild(y),v.appendChild(w);const x=new WeakMap,C=new IntersectionObserver(e=>{for(const t of e){x.get(t.target).setVisible(t.intersectionRatio>0)}},{rootMargin:"100px"});class E{constructor(e,t){this.scratchVariable=e,this.target=t,this.visible=!1,this.buildDOM()}updateValue(e){if(!this.visible&&!e)return;let t;t="list"===this.scratchVariable.type?this.scratchVariable.value.join("\n"):this.scratchVariable.value,t!==this.input.value&&(this.input.value=t)}handleSearch(e){this.scratchVariable.name.toLowerCase().includes(e.toLowerCase())||!e?(this.row.style.display="",this.updateValue(!0)):this.row.style.display="none"}resizeInputIfList(){if("list"===this.scratchVariable.type){this.input.style.height="auto";const e=Math.min(1e3,this.input.scrollHeight);e>0&&(this.input.style.height=e+"px")}}setVisible(e){this.visible!==e&&(this.visible=e,e&&this.updateValue())}buildDOM(){const e="sa-variable-manager-".concat(this.scratchVariable.id),t=document.createElement("tr");this.row=t;const n=document.createElement("td");n.className="sa-var-manager-name";const o=document.createElement("input");o.value=this.scratchVariable.name,o.htmlFor=e;o.addEventListener("keydown",e=>{"Enter"!==e.key||e.shiftKey||e.target.blur()}),o.addEventListener("focusout",e=>{e.preventDefault();const t=Blockly.getMainWorkspace();t.getVariable(o.value,this.scratchVariable.type)?o.value=this.scratchVariable.name:t.renameVariableById(this.scratchVariable.id,o.value),o.blur()}),o.addEventListener("focus",e=>{l=!0,d.classList.add("freeze")}),o.addEventListener("blur",e=>{l=!1,d.classList.remove("freeze")}),n.appendChild(o),x.set(t,this),C.observe(t);const s=document.createElement("td");let r;s.className="sa-var-manager-value",r="list"===this.scratchVariable.type?document.createElement("textarea"):document.createElement("input"),r.id=e,this.input=r,this.updateValue(!0),"list"===this.scratchVariable.type&&this.input.addEventListener("input",()=>this.resizeInputIfList(),!1);r.addEventListener("keydown",e=>{"Enter"!==e.key||e.shiftKey||e.target.blur()}),r.addEventListener("focusout",e=>{e.preventDefault(),"list"===this.scratchVariable.type?a.setVariableValue(this.target.id,this.scratchVariable.id,r.value.split("\n")):a.setVariableValue(this.target.id,this.scratchVariable.id,r.value),r.blur()}),r.addEventListener("focus",e=>{l=!0,d.classList.add("freeze")}),r.addEventListener("blur",e=>{l=!1,d.classList.remove("freeze")}),s.appendChild(r),t.appendChild(n),t.appendChild(s),this.handleSearch(u.value)}}function _(){if(3!==e.tab.redux.state.scratchGui.editorTab.activeTabIndex||l)return;const t=a.runtime.getEditingTarget(),n=a.runtime.getTargetForStage();for(i=t.isStage?[]:Object.values(t.variables).filter(e=>""===e.type||"list"===e.type).map(e=>new E(e,t)),c=Object.values(n.variables).filter(e=>""===e.type||"list"===e.type).map(e=>new E(e,n)),k();g.firstChild;)g.removeChild(g.firstChild);for(;b.firstChild;)b.removeChild(b.firstChild);for(const e of i)g.appendChild(e.row),e.resizeInputIfList();for(const e of c)b.appendChild(e.row),e.resizeInputIfList()}function L(t){if(t){v.classList.add(e.tab.scratchClass("react-tabs_react-tabs__tab--selected"),e.tab.scratchClass("gui_is-selected"));document.querySelector("[class^=gui_tabs]").insertAdjacentElement("beforeend",d),_()}else v.classList.remove(e.tab.scratchClass("react-tabs_react-tabs__tab--selected"),e.tab.scratchClass("gui_is-selected")),d.remove(),i=[],c=[]}v.addEventListener("click",t=>{e.tab.redux.dispatch({type:"scratch-gui/navigation/ACTIVATE_TAB",activeTabIndex:3})}),e.tab.redux.initialize(),e.tab.redux.addEventListener("statechanged",({detail:t})=>{"scratch-gui/navigation/ACTIVATE_TAB"===t.action.type?L(3===t.action.activeTabIndex):"scratch-gui/mode/SET_PLAYER"===t.action.type&&(t.action.isPlayerOnly||3!==e.tab.redux.state.scratchGui.editorTab.activeTabIndex||queueMicrotask(()=>L(!0)))}),a.runtime.on("PROJECT_LOADED",()=>_()),a.runtime.on("TOOLBOX_EXTENSIONS_NEED_UPDATE",()=>_());const T=a.runtime.constructor.prototype._step;for(a.runtime.constructor.prototype._step=function(...t){const n=T.call(this,...t);return function(){if(3===e.tab.redux.state.scratchGui.editorTab.activeTabIndex&&!l){for(const e of i)e.updateValue();for(const e of c)e.updateValue()}}(),n};;){(await e.tab.waitForElement("[class^='react-tabs_react-tabs__tab-list']",{markAsSeen:!0,reduxEvents:["scratch-gui/mode/SET_PLAYER","fontsLoaded/SET_FONTS_LOADED","scratch-gui/locales/SELECT_LOCALE"],reduxCondition:e=>!e.scratchGui.mode.isPlayerOnly})).children[2].insertAdjacentElement("afterend",v)}}},1958:function(e,t,n){"use strict";function o(e){return{r:parseInt(e.substring(1,3),16),g:parseInt(e.substring(3,5),16),b:parseInt(e.substring(5,7),16),a:e.length>=9?parseInt(e.substring(7,9),16)/255:1}}function s(e){return 1===(e=Math.round(e).toString(16)).length?"0".concat(e):e}function a(e){const t=s(e.r),n=s(e.g),o=s(e.b),a=void 0!==e.a?s(255*e.a):"";return"#".concat(t).concat(n).concat(o).concat(a)}function r(e,t){const{r:n,g:s,b:r,a:i}=o(e);return void 0===t.r&&(t.r=1),void 0===t.g&&(t.g=1),void 0===t.b&&(t.b=1),void 0===t.a&&(t.a=1),a({r:t.r*n,g:t.g*s,b:t.b*r,a:t.a*i})}function i(e,t){var n="";const s=e.settings.get("text");"black"===s&&(n+="\n      .blocklyText {\n        fill: #575e75;\n      }\n      .blocklyDropdownText {\n        fill: #575e75 !important;\n      }\n      .blocklyDropDownDiv .goog-menuitem,\n      #s3devIDD > li {\n        color: #575e75;\n      }");var a={motion:{color:"#4C97FF",tertiaryColor:"#3373CC"},looks:{color:"#9966FF",tertiaryColor:"#774DCB"},sounds:{color:"#CF63CF",tertiaryColor:"#BD42BD",alt:"sound"},events:{color:"#DE9E2E",tertiaryColor:"#CC9900"},control:{color:"#FFBF00",tertiaryColor:"#CF8B17"},sensing:{color:"#5CB1D6",tertiaryColor:"#2E8EB8"},operators:{color:"#59C059",tertiaryColor:"#389438"},data:{color:"#FF8C1A",tertiaryColor:"#DB6E00",alt:"variables"},"data-lists":{color:"#FF661A",tertiaryColor:"#E64D00",alt:"lists",var:"dataLists"},custom:{color:"#FF6680",tertiaryColor:"#FF6355",alt:"myBlocks"},Pen:{color:"#0FBD8C",tertiaryColor:"#0B8E69",alt:"pen"},TurboWarp:{color:"#ff4c4c",tertiaryColor:"#e64444",alt:"tw",var:"tw"}};for(var i of Object.keys(a)){var c=a[i].var?a[i].var:i;if("white"===s||"black"===s)n+='g[data-category="'.concat(i,'"] > path.blocklyBlockBackground {\n        fill: var(--editorTheme3-').concat(c,"Color);\n      }\n      .scratchCategoryId-").concat(a[i].alt?a[i].alt:i," > .scratchCategoryItemBubble {\n        background-color: var(--editorTheme3-").concat(c,'Color) !important;\n      }\n      .blocklyDropDownDiv[data-category="').concat(i,'"] {\n        background-color: var(--editorTheme3-').concat(c,'Color) !important;\n        border-color: #0003 !important;\n      }\n      .blocklyBubbleCanvas [stroke="').concat(a[i].tertiaryColor,'"] {\n        stroke: var(--editorTheme3-').concat(c,"Color);\n      }\n      #s3devIDD > li.").concat(i," {\n        background-color: var(--editorTheme3-").concat(c,'Color);\n      }\n      .console-variable[data-category="').concat(i,'"] {\n        background-color: var(--editorTheme3-').concat(c,"Color) !important;\n      }\n      "),"custom"===i&&(n+='path.blocklyBlockBackground[fill="#FF6680"] {\n          fill: var(--editorTheme3-'.concat(i,"Color);\n        }")),"sensing"===i&&(n+='path.blocklyBlockBackground[fill="#5CB1D6"] {\n          fill: var(--editorTheme3-'.concat(i,"Color);\n        }")),"events"===i&&(n+='path.blocklyBlockBackground[fill="#FFBF00"] {\n          fill: var(--editorTheme3-'.concat(i,'Color);\n        }\n        .blocklyDropDownDiv[style*="rgb(255, 191, 0)"] {\n          background-color: var(--editorTheme3-').concat(i,"Color) !important;\n          border-color: #0003 !important;\n        }")),"Pen"===i&&(n+='path.blocklyBlockBackground[fill="#0FBD8C"] {\n          fill: var(--editorTheme3-'.concat(i,'Color);\n        }\n        .blocklyDropDownDiv[style*="rgb(15, 189, 140)"] {\n          background-color: var(--editorTheme3-').concat(i,"Color) !important;\n          border-color: #0003 !important;\n        }"));else{let t={colorOnWhite:"#fff",colorOnBlack:"#282828"}[s],o={colorOnWhite:"#00000026",colorOnBlack:"#fff3"}[s],l=r(e.settings.get(("TurboWarp"===i?"tw":i)+"-color"),{a:.15});n+='g[data-category="'.concat(i,'"] > path.blocklyBlockBackground,\n      g[data-category="').concat(i,'"] > g[data-argument-type="dropdown"] > rect,\n      g[data-category="').concat(i,'"] > g[data-argument-type="variable"] > rect {\n        fill: ').concat(t,";\n        stroke: var(--editorTheme3-").concat(c,'Color);\n      }\n      g[data-category="').concat(i,'"] > .blocklyText {\n        fill: var(--editorTheme3-').concat(c,'Color);\n      }\n      g[data-category="').concat(i,'"] > g[data-argument-type="dropdown"] > .blocklyDropdownText,\n      g[data-category="').concat(i,'"] > g[data-argument-type="variable"] > .blocklyDropdownText,\n      g[data-category="').concat(i,'"] > g[data-argument-type="dropdown"] > g > .blocklyDropdownText {\n        fill: var(--editorTheme3-').concat(c,'Color) !important;\n      }\n      g[data-category="').concat(i,'"] > g[data-argument-type="dropdown"] > path,\n      g[data-category="').concat(i,'"] > g[data-argument-type="variable"] > path,\n      g[data-category="').concat(i,'"] > path[data-argument-type="boolean"] {\n        fill: ').concat(l,";\n        stroke: var(--editorTheme3-").concat(c,"Color);\n      }\n      .scratchCategoryId-").concat(a[i].alt?a[i].alt:i," > .scratchCategoryItemBubble {\n        background-color: var(--editorTheme3-").concat(c,'Color) !important;\n      }\n      .blocklyDropDownDiv[data-category="').concat(i,'"] {\n        background-color: ').concat(t," !important;\n        border-color: var(--editorTheme3-").concat(c,'Color) !important;\n      }\n      .blocklyDropDownDiv[data-category="').concat(i,'"] .goog-menuitem {\n        color: var(--editorTheme3-').concat(c,'Color);\n      }\n      .blocklyBubbleCanvas [stroke="').concat(a[i].tertiaryColor,'"],\n      g[data-category=').concat(i,'] > g[data-argument-type*="text"] > path,\n      g[data-category=').concat(i,"] > g > line  {\n        stroke: var(--editorTheme3-").concat(c,'Color);\n      }\n      .blocklyWidgetDiv.fieldTextInput[style*="box-shadow"] {\n        box-shadow: 0 0 0 4px ').concat(o," !important;\n      }\n      #s3devIDD > li.").concat(i," {\n        background-color: ").concat(t,";\n        color: var(--editorTheme3-").concat(c,"Color);\n      }\n      #s3devIDD > li.").concat(i,":not(.boolean) {\n        border: 1px solid var(--editorTheme3-").concat(c,"Color);\n      }"),"custom"===i&&(n+='path.blocklyBlockBackground[fill="#FF6680"] {\n          fill: '.concat(t,";\n          stroke: var(--editorTheme3-").concat(i,'Color);\n        }\n        path.blocklyBlockBackground[fill="#FF6680"] ~ .blocklyText,\n        g[data-shapes="c-block c-1 hat"] > g[data-shapes="stack"]:not(.blocklyDraggable) > .blocklyText,\n        .blocklyEditableText > rect[fill="#FF3355"] ~ .blocklyText {\n          fill: var(--editorTheme3-').concat(i,'Color);\n        }\n        path.blocklyBlockBackground[fill="#FF6680"] ~ [data-argument-type="text"] > path {\n          stroke: var(--editorTheme3-').concat(i,'Color);\n        }\n        g[data-shapes="c-block c-1 hat"] > g[data-shapes="stack"]:not(.blocklyDraggable) > path,\n        path[data-argument-type="boolean"][fill="#FF3355"] {\n          fill: ').concat(l,";\n          stroke: var(--editorTheme3-").concat(i,'Color);\n        }\n        .blocklyEditableText > rect[fill="#FF3355"] {\n          fill: ').concat(l,";\n        }")),"sensing"===i&&(n+='path.blocklyBlockBackground[fill="#5CB1D6"],\n        g[data-argument-type="dropdown"] > rect[fill="#5CB1D6"],\n        g[data-argument-type="dropdown"] > rect[fill="#2E8EB8"] {\n          fill: '.concat(t,";\n          stroke: var(--editorTheme3-").concat(i,'Color);\n        }\n        g[data-argument-type="dropdown"] > path[fill="#47A8D1"],\n        g[data-argument-type="dropdown"] > path[fill="#2E8EB8"] {\n          fill: ').concat(l,";\n          stroke: var(--editorTheme3-").concat(i,'Color);\n        }\n        path.blocklyBlockBackground[fill="#5CB1D6"] ~ .blocklyText {\n          fill: var(--editorTheme3-').concat(i,'Color);\n        }\n        g[data-argument-type="dropdown"] > rect[fill="#5CB1D6"] ~ .blocklyText,\n        g[data-argument-type="dropdown"] > rect[fill="#2E8EB8"] ~ .blocklyText,\n        g[data-argument-type="dropdown"] > path[fill="#47A8D1"] ~ * > .blocklyText,\n        g[data-argument-type="dropdown"] > path[fill="#2E8EB8"] ~ * > .blocklyText {\n          fill: var(--editorTheme3-').concat(i,'Color) !important;\n        }\n        .blocklyDropDownDiv[style*="rgb(92, 177, 214)"] {\n          background-color: ').concat(t," !important;\n          border-color: var(--editorTheme3-").concat(c,'Color) !important;\n        }\n        .blocklyDropDownDiv[style*="rgb(92, 177, 214)"] .goog-menuitem {\n          color: var(--editorTheme3-').concat(c,"Color);\n        }")),"events"===i&&(n+='path.blocklyBlockBackground[fill="#FFBF00"],\n        g[data-argument-type="dropdown"] > rect[fill="#FFBF00"],\n        g[data-argument-type="dropdown"] > rect[fill="#CC9900"] {\n          fill: '.concat(t,";\n          stroke: var(--editorTheme3-").concat(c,'Color);\n        }\n        path.blocklyBlockBackground[fill="#FFBF00"] ~ .blocklyText {\n          fill: var(--editorTheme3-').concat(i,'Color);\n        }\n        path.blocklyBlockBackground[fill="#FFBF00"] ~ g[data-argument-type="variable"] > g > .blocklyDropdownText {\n          fill: var(--editorTheme3-').concat(i,'Color) !important;\n        }\n        g[data-argument-type="dropdown"] > rect[fill="#FFBF00"] ~ .blocklyText,\n        g[data-argument-type="dropdown"] > rect[fill="#CC9900"] ~ .blocklyText {\n          fill: var(--editorTheme3-').concat(i,'Color) !important;\n        }\n        .blocklyDropDownDiv[style*="rgb(255, 191, 0)"] {\n          background-color: ').concat(t," !important;\n          border-color: var(--editorTheme3-").concat(c,'Color) !important;\n        }\n        .blocklyDropDownDiv[style*="rgb(255, 191, 0)"] .goog-menuitem {\n          color: var(--editorTheme3-').concat(c,"Color);\n        }")),"Pen"===i&&(n+='g[data-category] /* specificity */ > path.blocklyBlockBackground[fill="#0FBD8C"] {\n          fill: '.concat(t,";\n          stroke: var(--editorTheme3-").concat(i,'Color);\n        }\n        path.blocklyBlockBackground[fill="#0FBD8C"] ~ .blocklyText {\n          fill: var(--editorTheme3-').concat(i,'Color);\n        }\n        path.blocklyBlockBackground[fill="#0FBD8C"] ~ g[data-argument-type="dropdown"] > g > .blocklyDropdownText {\n          fill: var(--editorTheme3-').concat(i,'Color) !important;\n        }\n        g[data-argument-type="dropdown"] > path[fill="#0DA57A"],\n        g[data-argument-type="dropdown"] > path[fill="#0B8E69"] {\n          fill: ').concat(l,";\n          stroke: var(--editorTheme3-").concat(i,'Color);\n        }\n        .blocklyDropDownDiv[style*="rgb(15, 189, 140)"] {\n          background-color: ').concat(t," !important;\n          border-color: var(--editorTheme3-").concat(c,'Color) !important;\n        }\n        path.blocklyBlockBackground[fill="#0FBD8C"] ~ [data-argument-type="text"] > path,\n        path.blocklyBlockBackground[fill="#0FBD8C"] ~ g > line  {\n          stroke: var(--editorTheme3-').concat(i,"Color);\n        }\n        #s3devIDD > li.extension {\n          background-color: ").concat(t,";\n          color: var(--editorTheme3-").concat(c,"Color);\n        }\n        #s3devIDD > li.extension:not(.boolean) {\n          border: 1px solid var(--editorTheme3-").concat(c,"Color);\n        }"))}}document.documentElement.style.setProperty("--editorTheme3-inputColor-text",function(e,t,n,s){const{r:a,g:r,b:i}=o(e);return.299*a+.587*r+.114*i>(s=void 0!==s?s:170)?void 0!==t?t:"#575e75":void 0!==n?n:"#ffffff"}(e.settings.get("input-color"))),t.textContent=n}n.r(t);t.default=async function({addon:e,global:t,console:n}){const o=document.querySelector("[data-addon-id='".concat(e.self.id,"']")),s=document.createElement("style");i(e,s),e.settings.addEventListener("change",()=>{i(e,s)}),s.className="scratch-addons-style",s.setAttribute("data-addon-id",e.self.id),s.setAttribute("data-addon-index",o.getAttribute("data-addon-index")),o.parentElement.insertBefore(s,o.nextSibling),e.self.addEventListener("reenabled",()=>s.disabled=!1)}},1959:function(e,t,n){"use strict";(function(e){var t=n(168),o=n.n(t),s=n(53),a=n(578),r=n(545),i=n(544),c=n(409),l=n(87);n(847);const d=e=>e.replace(/([<>'"&])/g,(e,t)=>"&#".concat(t.charCodeAt(0),";")),u=e=>e.replace(/-([a-z])/g,e=>e[1].toUpperCase()),p=e=>{const t=document.createElement("style");return t.textContent=e,t};let h=null;let g,m=[];const f=e=>{m=m.filter(t=>t!==e)};class b extends i.a{constructor(){super(),this._initialized=!1,this._nextState=null}initialize(){this._initialized||(c.a.appStateReducer=(e,t)=>{this._nextState=t,this.dispatchEvent(new CustomEvent("statechanged",{detail:{action:e,next:t}})),this._nextState=null},this._initialized=!0)}dispatch(e){return c.a.appStateStore.dispatch(e)}get state(){return this._nextState?this._nextState:c.a.appStateStore.getState()}}const v=()=>{const e=y.state.scratchGui.mode;return e.isEmbedded?"embed":e.isFullScreen?"fullscreen":e.isPlayerOnly?"projectpage":"editor"},y=new b,w=y.state.locales.locale.split("-")[0],k=Object(a.a)(w),x=e=>"addons-display-none-".concat(e);let C=!1;class E extends i.a{constructor(e){super(),this._id=e,this._seenElements=new WeakSet,this.traps={get vm(){return window.vm},getBlockly:()=>window.ScratchBlocks?Promise.resolve(window.ScratchBlocks):new Promise(e=>{const t=()=>{window.ScratchBlocks&&(this.removeEventListener("urlChange",t),e(window.ScratchBlocks))};this.addEventListener("urlChange",t)})}}get redux(){return y}loadScript(){throw new Error("loadScript is not supported")}waitForElement(e,{markAsSeen:t=!1,condition:n,reduxCondition:o,reduxEvents:s}={}){let a=!0;const r=()=>!!a&&(!(n&&!n())&&!(o&&!o(y.state)));if(r()){const n=document.querySelectorAll(e);for(const e of n)if(!this._seenElements.has(e))return t&&this._seenElements.add(e),Promise.resolve(e)}let i;return s&&(a=!1,i=({detail:e})=>{const t=e.action.type;s.includes(t)&&"fontsLoaded/SET_FONTS_LOADED"!==t&&(a=!0)},this.redux.initialize(),this.redux.addEventListener("statechanged",i)),new Promise(n=>{const o=()=>{if(!r())return;const s=document.querySelectorAll(e);for(const e of s)if(!this._seenElements.has(e)){n(e),f(o),t&&this._seenElements.add(e),i&&this.redux.removeEventListener("statechanged",i);break}};var s;s=o,g||(g=new MutationObserver(()=>{for(const e of m)e()}),g.observe(document.documentElement,{attributes:!1,childList:!0,subtree:!0})),m.push(s)})}addBlock(e,t,n){const o=this.traps.vm;o.addAddonBlock({procedureCode:e,arguments:t,callback:n,color:"#29beb8",secondaryColor:"#3aa8a4"}),C||(C=!0,this.traps.getBlockly().then(e=>{const t=e.BlockSvg,n=t.prototype.updateColour;t.prototype.updateColour=function(...e){if("procedures_call"===this.type){this.procCode_&&o.runtime.getAddonBlock(this.procCode_)&&(this.colour_="#29beb8",this.colourSecondary_="#3aa8a4",this.colourTertiary_="#3aa8a4",this.customContextMenu=null)}return n.call(this,...e)},o.editingTarget&&o.emitWorkspaceUpdate()}))}removeBlock(){throw new Error("not implemented")}copyImage(e){if(!navigator.clipboard.write)return Promise.reject(new Error("Clipboard API not supported"));const t=[new ClipboardItem({"image/png":Object(r.a)(e)})];return navigator.clipboard.write(t)}scratchClass(...e){const t=(()=>{if(h)return h;const e=Array.from(document.styleSheets).filter(e=>!(e.ownerNode.textContent.startsWith("/* DO NOT EDIT\n@todo This file is copied from GUI and should be pulled out into a shared library.")&&(e.ownerNode.textContent.includes("input_input-form")||e.ownerNode.textContent.includes("label_input-group_")))).map(e=>{try{return[...e.cssRules]}catch(e){return[]}}).flat().map(e=>e.selectorText).filter(e=>e).map(e=>e.match(/(([\w-]+?)_([\w-]+)_([\w\d-]+))/g)).filter(e=>e).flat();h=[...new Set(e)];const t=new MutationObserver(e=>{for(const n of e)for(const e of n.addedNodes)if("STYLE"===e.tagName)return h=null,void t.disconnect()});return t.observe(document.head,{childList:!0}),h})(),n=[];for(const o of e)if("string"==typeof o)for(const e of t)if(e.startsWith("".concat(o,"_"))&&e.length===o.length+6){n.push(e);break}const o=e[e.length-1];if("object"==typeof o){const e=Array.isArray(o.others)?o.others:[o.others];for(const t of e)n.push(t)}return n.join(" ")}get editorMode(){return v()}displayNoneWhileDisabled(e){e.classList.add(x(this._id))}get direction(){return this.redux.state.locales.isRtl?"rtl":"ltr"}}class _ extends i.a{constructor(e,t){super(),this._addonId=e,this._manifest=t}get(e){return s.a.getAddonSetting(this._addonId,e)}}class L extends i.a{constructor(e){super(),this.id=e,this.disabled=!1}get dir(){throw new Error("Addon tried to access addon.self.dir")}get lib(){throw new Error("Addon tried to access addon.self.lib")}}class T{constructor(t){T.instances.push(this);const n=l.a[t];this.id=t,this.manifest=n,this.messageCache={},this.stylesheets=[],this.disabledStylesheet=null,this.publicAPI={global:e,console:console,addon:{tab:new E(t),settings:new _(t,n),self:new L(t)},msg:this.msg.bind(this),safeMsg:this.safeMsg.bind(this)}}_msg(e,t,n){const s="".concat(this.id,"/").concat(e);if(this.messageCache[s])return this.messageCache[s].format(t);let a=k[s];if(!a)return s;n&&(a=n(a));const r=new o.a(a,w);return this.messageCache[s]=r,r.format(t)}msg(e,t){return this._msg(e,t,null)}safeMsg(e,t){return this._msg(e,t,d)}settingsChanged(){this.publicAPI.addon.settings.dispatchEvent(new CustomEvent("change")),this.updateCSSVariables()}updateCSSVariables(){if(this.manifest.settings){const e=u(this.id);for(const t of this.manifest.settings){const n=t.id,o="--".concat(e,"-").concat(u(n)),s=this.publicAPI.addon.settings.get(n);document.documentElement.style.setProperty(o,s)}}}settingsMatch(e){if(!e)return!0;return this.publicAPI.addon.settings.get(e.id)===e.value}dynamicEnable(){this.publicAPI.addon.self.dispatchEvent(new CustomEvent("reenabled")),this.publicAPI.addon.self.disabled=!1,this.appendStylesheets(),this.disabledStylesheet&&(this.disabledStylesheet.remove(),this.disabledStylesheet=null)}dynamicDisable(){this.publicAPI.addon.self.dispatchEvent(new CustomEvent("disabled")),this.publicAPI.addon.self.disabled=!0,this.removeStylesheets();const e=".".concat(x(this.id),"{display:none !important;}");this.disabledStylesheet=p(e),document.body.insertBefore(this.disabledStylesheet,document.body.firstChild)}removeStylesheets(){for(const e of this.stylesheets)e.remove()}appendStylesheets(){for(const e of this.stylesheets)document.body.insertBefore(e,document.body.firstChild)}async run(){if(this.updateCSSVariables(),this.manifest.userstyles)for(const e of this.manifest.userstyles){if(!this.settingsMatch(e.settingMatch))continue;const t=(await n(1960)("./".concat(this.id,"/").concat(e.url))).default[0][1],o=p(t);o.className="scratch-addons-theme",o.dataset.addonId=this.id,this.stylesheets.push(o)}if(this.appendStylesheets(),this.manifest.userscripts)for(const e of this.manifest.userscripts){if(!this.settingsMatch(e.settingMatch))continue;(await n(1998)("./".concat(this.id,"/").concat(e.url))).default(this.publicAPI)}}}T.instances=[];const D=e=>{new T(e).run()};let M=v();const S=()=>{const e=v();e!==M&&(M=e,setTimeout(()=>{for(const e of T.instances)e.publicAPI.addon.tab.dispatchEvent(new CustomEvent("urlChange"))}))},I=history.replaceState;history.replaceState=function(...e){I.apply(this,e),S()};const A=history.pushState;history.pushState=function(...e){A.apply(this,e),S()},s.a.addEventListener("addon-changed",e=>{const t=e.detail.addonId,n=T.instances.find(e=>e.id===t);e.detail.dynamicEnable?n?n.dynamicEnable():D(t):e.detail.dynamicDisable&&n&&n.dynamicDisable(),n&&n.settingsChanged()});for(const e of Object.keys(l.a))s.a.getAddonEnabled(e)&&D(e)}).call(this,n(44))},1960:function(e,t,n){var o={"./2d-color-picker/style.css":1961,"./block-palette-icons/userstyle.css":1962,"./clones/style.css":1974,"./color-picker/style.css":1977,"./custom-zoom/style.css":1978,"./debugger/style.css":1979,"./drag-drop/dragged-over.css":1980,"./editor-colored-context-menus/userscript.css":1981,"./editor-devtools/userscript.css":1982,"./editor-searchable-dropdowns/userscript.css":1983,"./editor-stage-left/stageleft.css":1984,"./editor-theme3/theme3.css":1985,"./folders/style.css":1986,"./gamepad/gamepadlib.css":1987,"./gamepad/style.css":1988,"./hide-flyout/style.css":1989,"./mediarecorder/style.css":1990,"./mouse-pos/style.css":1991,"./onion-skinning/style.css":1992,"./pause/style.css":1993,"./remove-curved-stage-border/remove-borders.css":1994,"./transparent-orphans/userstyle.css":1995,"./tw-interface-customization/remove-backpack.css":1996,"./variable-manager/style.css":1997};function s(e){return a(e).then((function(e){return n.t(e,7)}))}function a(e){return Promise.resolve().then((function(){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}))}s.keys=function(){return Object.keys(o)},s.resolve=a,s.id=1960,e.exports=s},1961:function(e,t,n){(e.exports=n(9)(!1)).push([e.i,".sa-2dcolor-picker {\n  width: 150px;\n  height: 150px;\n  border-radius: 8px;\n  margin: 8px;\n  position: relative;\n  user-select: none;\n}\n\n.sa-2dcolor-picker-image {\n  border-radius: 8px;\n  width: 150px;\n  height: 150px;\n  user-select: none;\n}\n",""])},1962:function(e,t,n){var o=n(198);(e.exports=n(9)(!1)).push([e.i,".scratchCategoryItemBubble {\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: 17px 17px;\n  height: 22px;\n  width: 22px;\n}\n\n.scratchCategoryId-motion .scratchCategoryItemBubble {\n  background-image: url("+o(n(1963))+");\n}\n\n.scratchCategoryId-looks .scratchCategoryItemBubble {\n  background-image: url("+o(n(1964))+");\n}\n\n.scratchCategoryId-sound .scratchCategoryItemBubble {\n  background-image: url("+o(n(1965))+");\n}\n\n.scratchCategoryId-events .scratchCategoryItemBubble {\n  background-image: url("+o(n(1966))+");\n}\n\n.scratchCategoryId-control .scratchCategoryItemBubble {\n  background-image: url("+o(n(1967))+");\n}\n\n.scratchCategoryId-sensing .scratchCategoryItemBubble {\n  background-image: url("+o(n(1968))+");\n}\n\n.scratchCategoryId-operators .scratchCategoryItemBubble {\n  background-image: url("+o(n(1969))+");\n}\n\n.scratchCategoryId-variables .scratchCategoryItemBubble {\n  background-image: url("+o(n(1970))+");\n}\n\n.scratchCategoryId-lists .scratchCategoryItemBubble {\n  background-image: url("+o(n(1971))+");\n}\n\n.scratchCategoryId-myBlocks .scratchCategoryItemBubble {\n  background-image: url("+o(n(1972))+");\n}\n\n.scratchCategoryId-tw .scratchCategoryItemBubble {\n  background-image: url("+o(n(1973))+");\n}\n",""])},1963:function(e,t,n){e.exports=n.p+"static/assets/c088896fb05dc466b45ecaa1d5c4d007.svg"},1964:function(e,t,n){e.exports=n.p+"static/assets/e008ee0cb1202de1137823150da1644a.svg"},1965:function(e,t,n){e.exports=n.p+"static/assets/7b98085c05bdcd97dd0c6d4b34317793.svg"},1966:function(e,t,n){e.exports=n.p+"static/assets/9d7acb2e5784a9a1d52e564af3d8469b.svg"},1967:function(e,t,n){e.exports=n.p+"static/assets/e1249124e702a974df36355af6aa2385.svg"},1968:function(e,t,n){e.exports=n.p+"static/assets/7601fa61034e5d7d542538e1e4338a4e.svg"},1969:function(e,t,n){e.exports=n.p+"static/assets/ab2c140af0ffba6b515eebc2156742e2.svg"},1970:function(e,t,n){e.exports=n.p+"static/assets/4bfaa15915bc5fb88b40b3e1a537c3ea.svg"},1971:function(e,t,n){e.exports=n.p+"static/assets/bd6d382729ecbd23c5181cf2b327072f.svg"},1972:function(e,t,n){e.exports=n.p+"static/assets/318e019bdee5ed02903aa5f22a9903f2.svg"},1973:function(e,t,n){e.exports=n.p+"static/assets/ce8ffc09dce132288116ec7d5a2d5f56.svg"},1974:function(e,t,n){var o=n(198);(e.exports=n(9)(!1)).push([e.i,'.clone-container-container {\n  display: none;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n  -ms-flex-align: center;\n  align-items: center;\n  padding: 0.25rem;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  color: #a065ff;\n}\n\n.clone-container {\n  font-size: 0.625rem;\n  font-weight: bold;\n  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n  white-space: nowrap;\n}\n\n.clone-icon {\n  margin: 0.25rem;\n  display: inline-block;\n  background-image: url('+o(n(1975))+');\n  height: 16px;\n  width: 16px;\n}\n\n.clone-container-container[data-count="0"] {\n  display: none;\n}\n\n.clone-container-container[data-count="300"] {\n  color: #ff6680;\n}\n\n.clone-container-container[data-count="300"] .clone-icon {\n  background-image: url('+o(n(1976))+");\n}\n\n.clone-count::after {\n  content: attr(data-str);\n}\n\n.sa-clones-small .clone-container-container {\n  display: none !important;\n}\n",""])},1975:function(e,t,n){e.exports=n.p+"static/assets/8a30520407ffdf5b0e7e06e490db9c1d.svg"},1976:function(e,t,n){e.exports=n.p+"static/assets/60fb267c5ab0c6f4ed9ab4a891ca7dd5.svg"},1977:function(e,t,n){(e.exports=n(9)(!1)).push([e.i,'.sa-color-picker {\n  display: flex;\n}\n\n.sa-color-picker-code {\n  margin: 8px 0;\n}\n\n.sa-color-picker-paint {\n  margin-top: 16px;\n  margin-bottom: 4px;\n}\n\n.sa-color-picker > .sa-color-picker-color {\n  border: none;\n  border-top-left-radius: 1rem;\n  border-bottom-left-radius: 1rem;\n  padding: 0;\n  padding-left: 0.6rem;\n  padding-right: 0.4rem;\n  margin-left: 0.5rem;\n  outline: none;\n  box-sizing: border-box;\n  width: 3rem;\n  height: 2rem;\n}\n[theme="dark"] .sa-color-picker > .sa-color-picker-color {\n  background: var(--ui-secondary);\n}\n\n.sa-color-picker > .sa-color-picker-text {\n  box-sizing: border-box;\n  width: calc(150px - 3rem);\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n\n[dir="rtl"] .sa-color-picker > .sa-color-picker-color {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n  border-top-right-radius: 1rem;\n  border-bottom-right-radius: 1rem;\n  margin-left: 0;\n  margin-right: 0.5rem;\n}\n\n[dir="rtl"] .sa-color-picker > .sa-color-picker-text {\n  border-top-left-radius: 1rem;\n  border-bottom-left-radius: 1rem;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n}\n\nbody.sa-hide-eye-dropper-background div[class*="stage_color-picker-background"] {\n  /* Do not show eye dropper background if the color picker is "fake" */\n  display: none;\n}\n',""])},1978:function(e,t,n){(e.exports=n(9)(!1)).push([e.i,".sa-custom-zoom-area {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  width: 60px;\n  height: 148px;\n  pointer-events: none;\n}\n.blocklyZoom > * {\n  transition: transform var(--sa-custom-zoom-speed, 0) ease-in-out;\n}\n.sa-custom-zoom-hidden > * {\n  transform: translateX(80px);\n}\n",""])},1979:function(e,t,n){(e.exports=n(9)(!1)).push([e.i,".sa-debugger-container {\n  margin-right: 0.2rem;\n}\n\n.debug {\n  display: none;\n}\n.debug {\n  position: absolute;\n  z-index: 492;\n  background-color: white;\n  width: 400px;\n  height: 25rem;\n}\n\n.debug h1 {\n  padding: 10px;\n  cursor: move;\n  z-index: 10;\n  color: #fff !important;\n  width: calc(100% - 20px);\n  font-size: 20px;\n}\n\n.sa-debugger-unpause {\n  animation: unpauseBackground 2s infinite alternate;\n}\n@keyframes unpauseBackground /* Firefox */ {\n  0% {\n    background-color: rgba(0, 0, 0, 0.15);\n  }\n  100% {\n    background-color: rgba(0, 0, 0, 0);\n  }\n}\n.sa-debugger-unpause > img {\n  width: 20px;\n  height: 20px;\n}\n\n.log {\n  --message-border-color: rgba(0, 0, 0, 0.15);\n  --warning-border-color: hsl(50deg 100% 88%);\n  --error-border-color: hsl(0deg 100% 92%);\n  --error-text-color: red;\n  --monospace-font-size: 12px;\n  --monospace-font-family: consolas, lucida console, courier new, monospace;\n  --source-code-font-size: 12px;\n  --source-code-font-family: consolas, lucida console, courier new, monospace;\n  font-family: var(--monospace-font-family);\n  font-size: var(--monospace-font-size) !important;\n  word-wrap: break-word;\n  user-select: text;\n  box-sizing: border-box;\n  min-width: 0;\n  min-height: 0;\n  display: flex;\n  border-top: 1px solid var(--message-border-color);\n  border-bottom: 1px solid var(--message-border-color);\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  flex: auto;\n  line-height: 1.2;\n  border-top-right-radius: revert;\n  border-top-left-radius: revert;\n  cursor: text;\n  align-items: center;\n  padding: 3px;\n  color: #575e75;\n  content-visibility: auto;\n  contain-intrinsic-size: 1.2rem;\n}\n.warn {\n  border-color: var(--warning-border-color);\n  color: hsl(39deg 100% 18%);\n  background-color: hsl(50deg 100% 95%);\n}\n.error {\n  border-color: var(--error-border-color);\n  color: var(--error-text-color);\n  background-color: hsl(0deg 100% 95%);\n}\n.log:not(.warn):not(.error) + .log:not(.warn):not(.error),\n.warn + .warn,\n.error + .error {\n  border-top-color: transparent;\n}\n.logs {\n  border-radius: 0;\n  padding: 0;\n}\n.extra-log-container {\n  display: flex;\n  flex-direction: column;\n  overflow: auto;\n  flex: 1;\n  cursor: default;\n  width: 100%;\n}\n.console-variable {\n  padding: 4px;\n  border-radius: 10px;\n  color: white;\n  margin-right: 5px;\n}\n.log > span:not(.console-variable) {\n  flex-grow: 1;\n}\n.log a {\n  color: inherit;\n  opacity: 0.5;\n  text-decoration: underline;\n  float: right;\n  text-align: right;\n  max-width: 100%;\n  padding-left: 4px;\n  margin-right: 4px;\n  margin-left: auto;\n}\n.log a:hover {\n  color: #4d97ff;\n  opacity: 1;\n}\n\n.logLink.deletedTarget {\n  pointer-events: none;\n}\n\n.logIcon {\n  width: 1rem;\n  height: 1rem;\n  margin: 0 0.25rem;\n}\n\n.log:not(.warn):not(.error) {\n  margin-left: 1.5rem;\n}\n",""])},1980:function(e,t,n){(e.exports=n(9)(!1)).push([e.i,'/* Based on the `stage-selector_raised` class */\ndiv[class*="stage-selector_header_"],\ndiv[class*="sprite-selector_sprite-selector"],\ndiv[class*="sprite-info_sprite-info"],\ndiv[class*="monitor_list-body"] {\n  -webkit-transition: background-color 0.25s ease;\n  -o-transition: background-color 0.25s ease;\n  transition: background-color 0.25s ease;\n}\n.sa-dragged-over,\n.sa-dragged-over div[class*="stage-selector_header_"],\n.sa-dragged-over div[class*="sprite-info_sprite-info"],\n.sa-dragged-over div[class*="monitor_list-body"] {\n  background-color: hsla(0, 100%, 77%, 1) !important;\n}\n',""])},1981:function(e,t,n){(e.exports=n(9)(!1)).push([e.i,".u-contextmenu-colored .blocklyContextMenu {\n  background-color: var(--u-contextmenu-bg) !important;\n  border-color: #0003;\n}\n.u-contextmenu-colored .blocklyContextMenu .goog-menuitem .goog-menuitem-content {\n  color: white;\n}\n.u-contextmenu-colored .blocklyContextMenu .goog-menuitem:hover.goog-menuitem-highlight,\n.s3dev-mi:hover {\n  border-color: transparent;\n}\n.u-contextmenu-colored .blocklyContextMenu .goog-menuitem:hover {\n  background-color: rgba(0, 0, 0, 0.2);\n}\n",""])},1982:function(e,t,n){(e.exports=n(9)(!1)).push([e.i,'#s3devToolBar {\n  display: flex;\n  white-space: nowrap;\n  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n}\n\n.s3devLabel {\n  display: flex;\n  padding-right: 2em;\n}\n\n[dir="rtl"] .s3devLabel {\n  padding-right: 0;\n  padding-left: 2em;\n}\n\n.s3devLabel > span:first-child {\n  margin-left: 1.5em;\n  margin-right: 1em;\n  font-weight: bold;\n  font-size: 0.625rem;\n  user-select: none;\n  cursor: default;\n  white-space: nowrap;\n  padding-top: 2px;\n}\n\n[dir="rtl"] .s3devLabel > span:first-child {\n  margin-right: 1.5em;\n  margin-left: 1em;\n}\n\n.s3devAction {\n  transition: opacity 200ms ease-in;\n  /*font-weight: bold;*/\n  opacity: 0;\n}\n\n.s3devLabel:hover .s3devAction {\n  opacity: 0.7;\n}\n\n/* Wrapper around find button and drop down */\n.s3devWrap {\n  overflow: visible;\n  /*margin-left:3em;*/\n  position: relative;\n}\n\n#s3devFind {\n  height: 2rem;\n}\n\n/* Find Input Box */\ninput.s3devInp {\n  min-width: 100%;\n  box-sizing: border-box !important;\n  /* !important required for extension, because CSS injection method (and hence order) differs from addon */\n  height: 1.5rem;\n\n  /* Change Scratch default styles */\n  border-radius: 0.25rem;\n  font-size: 0.75rem;\n  padding-left: 0.4em;\n}\n[theme="dark"] input.s3devInp {\n  color: #eee;\n  background: #3333;\n}\n[theme="dark"] input.s3devInp:hover {\n  background: #333;\n}\n\ninput.s3devInp:focus {\n  /* Change Scratch default styles */\n  box-shadow: none;\n}\n\n/* Drop down from find button */\n#s3devDDOut {\n  top: -6px;\n}\n\n/* Drop down from find button */\ndiv.s3devDDOut {\n  z-index: 100;\n  left: 0;\n  width: 16em;\n  position: relative;\n  /*padding: 2.2em 0 0;*/\n  /*background-color: white;*/\n  padding: 4px;\n}\n\n/* Drop down from find button */\nul.s3devDD {\n  display: none;\n  position: relative;\n  padding: 0.2em 0;\n  font-size: 0.75rem;\n  line-height: 1;\n  overflow-y: auto;\n  min-height: 128px;\n  max-height: 65vh;\n  user-select: none;\n  max-width: 100%;\n}\n\ndiv.s3devDDOut.vis {\n  /*box-shadow: 0 2px 3px rgba(0,0,0,0.3), 0 5px 8px rgba(0,0,0,0.2);*/\n  box-shadow: 0px 0px 8px 1px rgba(0, 0, 0, 0.3);\n  background-color: white;\n  border: none;\n  border-radius: 4px;\n}\n[theme="dark"] div.s3devDDOut.vis {\n  background-color: #111;\n}\n\ndiv.s3devDDOut.vis ul.s3devDD {\n  display: block;\n  border: none;\n}\n\n/* Drop down items */\n.s3devDD > li {\n  display: block;\n  padding: 0.5em 0.3em;\n  white-space: nowrap;\n  margin: 0;\n  font-weight: bold;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n\n.s3devDD > li > b {\n  background-color: #aaffaa;\n  color: black;\n}\n\n/* Drop down items */\n.s3devDD > li:hover,\n.s3devDD > li.sel {\n  color: white;\n  cursor: pointer;\n}\n\n#s3devDD > li::before {\n  content: "\\25CF   "; /* ● */\n}\n\n.define {\n  color: rgb(255, 102, 128);\n}\n.define:hover,\n.define.sel {\n  background-color: rgb(255, 102, 128);\n}\n\n.flag {\n  color: #4cbf56;\n}\n.flag:hover,\n.flag.sel {\n  background-color: #4cbf56;\n}\n\n.receive {\n  color: rgb(255, 191, 0);\n}\n.receive:hover,\n.receive.sel {\n  background-color: rgb(255, 191, 0);\n}\n\n.event {\n  color: rgb(255, 191, 0);\n}\n.event:hover,\n.event.sel {\n  background-color: rgb(255, 191, 0);\n}\n\n.var,\n.VAR {\n  color: rgb(255, 120, 26);\n}\n.var:hover,\n.var.sel,\n.VAR:hover,\n.VAR.sel {\n  background-color: rgb(255, 120, 26);\n}\n\n.list,\n.LIST {\n  color: rgb(255, 102, 26);\n}\n.list:hover,\n.list.sel,\n.LIST:hover,\n.LIST.sel {\n  background-color: rgb(255, 102, 26);\n}\n\n.costume {\n  color: rgb(26, 66, 255);\n}\n.costume:hover,\n.costume.sel {\n  background-color: rgb(26, 66, 255);\n}\n\n.operators {\n  background-color: rgb(64, 191, 74);\n  color: rgb(56, 148, 56);\n}\n.operators:hover,\n.operators.sel {\n  background-color: rgb(56, 148, 56);\n}\n\n.data {\n  background-color: rgb(255, 140, 26);\n  color: rgb(219, 110, 0);\n}\n.data:hover,\n.data.sel {\n  background-color: rgb(219, 110, 0);\n}\n\n.data-lists {\n  background-color: rgb(255, 102, 26);\n  color: rgb(255, 102, 26);\n}\n.data-lists:hover,\n.data-lists.sel {\n  background-color: rgb(207, 81, 20);\n}\n\n.sensing {\n  background-color: rgb(76, 191, 230);\n  color: rgb(46, 142, 184);\n}\n.sensing:hover,\n.sensing.sel {\n  background-color: rgb(46, 142, 184);\n}\n\n.looks {\n  background-color: rgb(153, 102, 255);\n  color: rgb(119, 77, 203);\n}\n.looks:hover,\n.looks.sel {\n  background-color: rgb(119, 77, 203);\n}\n\n.sounds {\n  background-color: rgb(214, 92, 214);\n  color: rgb(189, 66, 189);\n}\n.sounds:hover,\n.sounds.sel {\n  background-color: rgb(189, 66, 189);\n}\n\n.motion {\n  background-color: rgb(76, 151, 255);\n  color: rgb(51, 115, 204);\n}\n.motion:hover,\n.motion.sel {\n  background-color: rgb(51, 115, 204);\n}\n\n.events {\n  background-color: rgb(255, 213, 0);\n  color: rgb(204, 153, 0);\n}\n.events:hover,\n.events.sel {\n  background-color: rgb(204, 153, 0);\n}\n\n.control {\n  background-color: rgb(255, 171, 25);\n  color: rgb(207, 139, 23);\n}\n.control:hover,\n.control.sel {\n  background-color: rgb(207, 139, 23);\n}\n\n.TurboWarp {\n  background-color: #ff4c4c;\n  color: rgb(207, 139, 23);\n}\n.TurboWarp:hover,\n.TurboWarp.sel {\n  background-color: #e64444;\n}\n\n.null {\n  background-color: rgb(255, 102, 128);\n  color: rgb(255, 77, 106);\n}\n.null:hover,\n.null.sel {\n  background-color: rgb(255, 77, 106);\n}\n\n.extension {\n  background-color: rgb(15 189 140);\n}\n.extension:hover,\n.extension.sel {\n  background-color: rgb(11 158 117);\n}\n\n/*.s3devDD>li.hat::before {                           content: \'◠ \';}*/\n/*.s3devDD>li.hat::before {                           content: \'▲ \';}*/\n/*.s3devDD>li.block::before {                         content: \'■ \';}*/\n/*.s3devDD>li.reporter::before {                      content: \'● \';}*/\n/*.s3devDD>li.boolean::before {                       content: \'◆ \';}*/\n\n#s3devIDD > li {\n  height: 19px;\n  padding: 3px 8px;\n  margin: 2px 0.3em;\n  box-sizing: border-box;\n  position: relative;\n  color: white;\n  font-weight: bold;\n  width: min-content;\n}\n\n.s3devDD > li.hat {\n  border-radius: 14px 14px 3px 3px;\n}\n.s3devDD > li.block {\n  border-radius: 3px;\n}\n.s3devDD > li.reporter {\n  border-radius: 10px;\n}\n\n.s3devDD > li.boolean {\n  width: min-content;\n}\n.s3devDD > li.boolean::before {\n  content: "";\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 0;\n  height: 0;\n  border-right: 9px solid transparent;\n  border-top: 9px solid white;\n  border-bottom: 10px solid white;\n}\n.s3devDD > li.boolean::after {\n  content: "";\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 0;\n  height: 0;\n  border-left: 9px solid transparent;\n  border-top: 9px solid white;\n  border-bottom: 10px solid white;\n}\n[theme="dark"] .s3devDD > li.boolean::before {\n  border-top-color: #111;\n  border-bottom-color: #111;\n}\n[theme="dark"] .s3devDD > li.boolean::after {\n  border-top-color: #111;\n  border-bottom-color: #111;\n}\n\n#s3devOverlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(80, 80, 80, 0.5);\n  z-index: 9999;\n  padding: 10em;\n  color: white;\n  font-weight: bold;\n}\n\n.s3devMulti {\n  font-weight: normal;\n  position: absolute;\n  right: 0;\n  white-space: nowrap;\n  background-color: inherit;\n  z-index: 1;\n  padding: 0;\n}\n\n.s3devNav {\n  padding: 0 6px;\n}\n\n.s3devNav:hover {\n  color: #ffff80;\n}\n\n.s3devAction {\n  margin-left: 2em;\n  font-size: 12px;\n  font-weight: bold;\n  line-height: 2;\n}\n\n@media screen and (max-width: 1180px) {\n  .s3devAction {\n    display: none;\n  }\n}\n\n.s3devHide {\n  display: none;\n}\n\n.s3dev-mi:hover {\n  background-color: #d6e9f8;\n}\n[theme="dark"] .s3dev-mi:hover {\n  background-color: var(--ui-tertiary);\n}\n\n#s3devHelpPop > div {\n  box-sizing: border-box;\n  width: 800px;\n  height: 60vh;\n  max-height: 800px;\n  max-width: 85%;\n  margin: auto;\n  margin-top: 20vh;\n}\n\n#s3devHelpPop [class*="modal_header-item-title"] {\n  margin: 0 -20rem 0 0;\n}\n#s3devHelpPop[dir="rtl"] [class*="modal_header-item-title"] {\n  margin: 0 0 0 -20rem;\n}\n\n#s3devHelpContent {\n  height: calc(100% - 3.125rem);\n  overflow-y: auto;\n  padding: 1em 2em 4em;\n  background-color: white;\n  user-select: text;\n}\n[theme="dark"] #s3devHelpPop > div {\n  background: #111;\n}\n\n#s3devFloatingBar {\n  display: flex;\n  white-space: nowrap;\n  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n\n  position: absolute;\n  min-width: 128px;\n  background-color: white;\n  border-radius: 4px;\n  box-shadow: rgba(0, 0, 0, 0.3) 0 0 3px, rgba(0, 0, 0, 0.2) 0 3px 10px;\n\n  z-index: 1000001;\n}\n[theme="dark"] #s3devFloatingBar {\n  background-color: #111;\n}\n\n#s3devInsertLabel {\n  padding: 0;\n  align-items: center;\n}\n\n/* Drop down from find button */\nul#s3devIDD {\n  max-height: 200px;\n  margin-bottom: 0;\n}\n\n#s3devIDD > li > b {\n  background-color: rgba(0, 0, 0, 0.6);\n  color: white;\n}\n\n[data-highlighted="true"] {\n  background-color: hsla(30, 100%, 55%, 1) !important; /* orange */\n  color: white !important;\n}\n',""])},1983:function(e,t,n){(e.exports=n(9)(!1)).push([e.i,".u-dropdown-searchbar {\n  width: 100%;\n  box-sizing: border-box;\n  /* based on styles for the title input */\n  color: white;\n  background-color: hsla(0, 100%, 100%, 0.25);\n  border: 1px dashed hsla(0, 0%, 0%, 0.15);\n  padding: 0.5rem;\n  outline: none;\n  transition: 0.25s ease-out;\n  font-size: 13px;\n  font-weight: bold;\n  border-radius: 4px;\n}\n.u-dropdown-searchbar:hover {\n  background-color: hsla(0, 100%, 100%, 0.5);\n}\n.u-dropdown-searchbar:focus {\n  background-color: white;\n  color: black;\n}\n",""])},1984:function(e,t,n){(e.exports=n(9)(!1)).push([e.i,'[class^="stage-header_stage-button-icon"] {\n  transform: scaleX(-1);\n}\n[class^="target-pane_target-pane"] {\n  -webkit-flex-direction: row-reverse;\n  -ms-flex-direction: row-reverse;\n  flex-direction: row-reverse;\n}\n[dir="ltr"] [class^="target-pane_stage-selector-wrapper"] {\n  margin-left: 0;\n  margin-right: calc(0.5rem / 2);\n}\n[dir="ltr"] [class^="sprite-selector_sprite-selector"] {\n  margin-left: calc(0.5rem / 2);\n  margin-right: 0;\n}\n[dir="rtl"] [class^="target-pane_stage-selector-wrapper"] {\n  margin-right: 0;\n  margin-left: calc(0.5rem / 2);\n}\n[dir="rtl"] [class^="sprite-selector_sprite-selector"] {\n  margin-right: calc(0.5rem / 2);\n  margin-left: 0;\n}\n[class^="gui_flex-wrapper"] {\n  -webkit-flex-direction: row-reverse;\n  -ms-flex-direction: row-reverse;\n  flex-direction: row-reverse;\n  overflow-x: hidden;\n}\n\n[dir="ltr"] [class^="backpack_backpack-header"] {\n  border-top-right-radius: 0;\n  border-top-left-radius: 0.5rem;\n}\n[dir="ltr"] [class^="blocks_blocks_C530M"] .injectionDiv,\n[dir="ltr"] [class^="asset-panel_wrapper"] {\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  border-bottom-left-radius: 0.5rem;\n}\n[dir="ltr"] [class^="gui_extension-button-container"] {\n  border-bottom-left-radius: 0.5rem;\n}\n\n[dir="rtl"] [class^="backpack_backpack-header"] {\n  border-top-left-radius: 0;\n  border-top-right-radius: 0.5rem;\n}\n[dir="rtl"] [class^="blocks_blocks_C530M"] .injectionDiv,\n[dir="rtl"] [class^="asset-panel_wrapper"] {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n  border-bottom-right-radius: 0.5rem;\n}\n[dir="rtl"] [class^="gui_extension-button-container"] {\n  border-bottom-right-radius: 0.5rem;\n}\n\n.Popover {\n  z-index: 40;\n}\n',""])},1985:function(e,t,n){(e.exports=n(9)(!1)).push([e.i,'path.blocklyBlockBackground[fill="#FF6680"],\npath.blocklyBlockBackground[fill="#5CB1D6"],\npath.blocklyBlockBackground[fill="#FFBF00"],\ng[data-category] > path.blocklyBlockBackground {\n  stroke: #0003;\n}\ng[data-argument-type="dropdown"] > path,\ng[data-argument-type="dropdown"] > rect,\ng[data-argument-type="variable"] > rect,\ng[data-argument-type="variable"] > path,\ng[data-shapes="c-block c-1 hat"] > g[data-shapes="stack"]:not(.blocklyDraggable) > path,\npath[data-argument-type="boolean"] {\n  stroke: #0003;\n  fill: #0001;\n}\ng[data-argument-type*="text"] > path,\n[data-category] g > line {\n  stroke: #0002;\n}\n.scratchCategoryItemBubble {\n  border-color: #0003 !important;\n}\n\n#s3devDD > li.extension {\n  background-color: var(--editorTheme3-PenColor);\n}\n\n.blocklyEditableText rect {\n  fill: #0001;\n}\n\n.fieldTextInput {\n  border-color: #0003 !important;\n}\n\n.blocklyBlockBackground[fill="#FFFFFF"] {\n  fill: var(--editorTheme3-inputColor);\n}\n.blocklyEditableText > text {\n  fill: var(--editorTheme3-inputColor-text);\n}\n.blocklyHtmlInput {\n  background-color: var(--editorTheme3-inputColor);\n  color: var(--editorTheme3-inputColor-text);\n}\n',""])},1986:function(e,t,n){(e.exports=n(9)(!1)).push([e.i,'.sa-folders-contextmenu-container {\n}\n\n.sa-folders-contextmenu-item {\n  max-width: 250px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n[sa-folders-context-type="folder"] > :not(.sa-folders-contextmenu-container) {\n  display: none;\n}\n',""])},1987:function(e,t,n){var o=n(198);(e.exports=n(9)(!1)).push([e.i,'.gamepadlib-selector {\n  width: 100%;\n  margin-bottom: 3px;\n}\n\n.gamepadlib-content {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n}\n.gamepadlib-content-buttons {\n  padding-right: 10px;\n}\n.gamepadlib-content-axes {\n}\n\n.gamepadlib-mapping {\n  display: flex;\n  align-items: center;\n  margin-bottom: 3px;\n}\n.gamepadlib-mapping-label {\n  width: 100px;\n  text-align: center;\n}\n.gamepadlib-keyinput {\n  text-align: center;\n  width: 75px;\n  height: 25px;\n  border-radius: 0;\n  border: 1px solid black;\n  background: white;\n  color: black;\n  box-sizing: border-box;\n  padding: 0;\n  margin: 0;\n}\n.gamepadlib-mapping[data-value="1"] .gamepadlib-keyinput {\n  background: yellow;\n}\n.gamepadlib-keyinput[data-accepting-input="true"] {\n  background: #d6fff9;\n}\n.gamepadlib-keyinput[data-empty="true"]:not([data-accepting-input="true"]) {\n  color: #aaa;\n  font-style: italic;\n}\n\n.gamepadlib-axis {\n  margin-bottom: 8px;\n  text-align: center;\n}\n.gamepadlib-axis-circle {\n  position: relative;\n  width: 150px;\n  height: 150px;\n  border: 1px solid black;\n  overflow: hidden;\n}\n.gamepadlib-axis-dot {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  background-image: url('+o(n(1922))+");\n  width: 8px;\n  height: 8px;\n  transform: translate(-50%, -50%);\n  pointer-events: none;\n}\n.gamepadlib-axis-mapping {\n  width: 100%;\n}\n\n.gamepadlib-axis-circle-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n.gamepadlib-axis-circle-overlay > .gamepadlib-axis-mapper {\n  position: absolute;\n}\n.gamepadlib-axis-circle-overlay > .gamepadlib-axis-mapper:nth-of-type(1) {\n  left: 50%;\n  top: 0;\n  transform: translateX(-50%);\n}\n.gamepadlib-axis-circle-overlay > .gamepadlib-axis-mapper:nth-of-type(2) {\n  left: 0;\n  top: 50%;\n  transform: translateY(-50%);\n}\n.gamepadlib-axis-circle-overlay > .gamepadlib-axis-mapper:nth-of-type(3) {\n  right: 0;\n  top: 50%;\n  transform: translateY(-50%);\n}\n.gamepadlib-axis-circle-overlay > .gamepadlib-axis-mapper:nth-of-type(4) {\n  left: 50%;\n  bottom: 0;\n  transform: translateX(-50%);\n}\n",""])},1988:function(e,t,n){(e.exports=n(9)(!1)).push([e.i,'.sa-gamepad-container {\n  margin-right: 0.2rem;\n}\n\n.sa-gamepad-spacer {\n  display: flex;\n  width: 100%;\n  justify-content: flex-end;\n}\n\n.sa-gamepad-popup-outer {\n  /* above fullscreen */\n  z-index: 99999;\n}\n.sa-gamepad-popup {\n  box-sizing: border-box;\n  width: 700px;\n  max-height: min(800px, 85vh);\n  height: 100%;\n  max-width: 85%;\n  margin: 50px auto;\n  display: flex;\n  flex-direction: column;\n}\n.sa-gamepad-popup-content {\n  background-color: white;\n  padding: 1.5rem 2.25rem;\n  height: 100%;\n  overflow-y: auto;\n}\n\n.sa-gamepad-popup [class*="modal_header-item-title"] {\n  margin: 0 -20rem 0 0;\n}\n\n.sa-gamepad-cursor {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 9999;\n  user-select: none;\n  pointer-events: none;\n  will-change: transform;\n  image-rendering: optimizeSpeed;\n  image-rendering: crisp-edges;\n  image-rendering: pixelated;\n}\n.sa-gamepad-cursor-down {\n  filter: invert(100%);\n}\n\n.sa-gamepad-small .sa-gamepad-container[data-editor-mode="editor"] {\n  display: none !important;\n}\n\n.sa-gamepad-hide-cursor [class^="stage_stage_"] {\n  cursor: none;\n}\n\n.sa-gamepad-browser-support-warning {\n  font-weight: bold;\n  margin-bottom: 10px;\n}\n\n.sa-gamepad-store-settings {\n  display: none;\n}\n.sa-gamepad-store-settings > input {\n  margin-right: 4px;\n}\n.sa-gamepad-has-controller .sa-gamepad-store-settings {\n  display: block;\n}\n',""])},1989:function(e,t,n){(e.exports=n(9)(!1)).push([e.i,".blocklyFlyout,\n.blocklyFlyoutScrollbar,\n.sa-lock-image {\n  transition-property: transform;\n}\n\n.blocklyFlyout.sa-flyoutClose {\n  transform: translateX(-200px) !important;\n}\n\n.blocklyFlyoutScrollbar.sa-flyoutClose {\n  transform: translateX(35px) !important;\n}\n\n.sa-lock-image.sa-flyoutClose {\n  transform: translateX(-260px);\n}\n\n.sa-flyout-placeHolder {\n  position: absolute;\n  left: 61px;\n  top: 44px;\n  height: 100%;\n  width: 251px;\n}\n\n.sa-lock-image {\n  position: absolute;\n  z-index: 20;\n  width: 20px;\n  cursor: pointer;\n  top: 46px;\n  left: 280px;\n}\n\n.injectionDiv {\n  overflow: hidden !important;\n}\n",""])},1990:function(e,t,n){(e.exports=n(9)(!1)).push([e.i,'.mediaRecorderPopup {\n  box-sizing: border-box;\n  width: 700px;\n  max-height: min(800px, 80vh);\n  max-width: 85%;\n  margin-top: 20vh;\n  overflow-y: auto;\n  margin-left: auto;\n  margin-right: auto;\n}\n\n.mediaRecorderPopup [class*="modal_header-item-title"] {\n  margin: 0; /* required because there is no close button */\n}\n\n.mediaRecorderPopupContent {\n  background-color: white;\n  padding: 1.5rem 2.25rem;\n}\n[theme="dark"] .mediaRecorderPopupContent {\n  color: var(--text-primary);\n  background-color: var(--ui-primary);\n}\n\n.mediaRecorderPopup p {\n  font-size: 1rem;\n  margin: 1rem auto;\n}\n\n.mediaRecorderPopup p :last-child {\n  margin-left: 1rem;\n}\n\n.mediaRecorderPopup[dir="rtl"] p :last-child {\n  margin-left: 0;\n  margin-right: 1rem;\n}\n\n#recordOptionSecondsInput {\n  width: 6rem;\n}\n\n.mediaRecorderPopupButtons {\n  margin-top: 1.5rem;\n}\n\n.mediaRecorderPopupButtons button {\n  margin-left: 0.5rem;\n}\n\n.mediaRecorderPopupButtons button:nth-of-type(1) {\n  color: black;\n}\n',""])},1991:function(e,t,n){(e.exports=n(9)(!1)).push([e.i,'.pos-container-container {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n  -ms-flex-align: center;\n  align-items: center;\n  padding: 0.25rem;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.pos-container {\n  font-size: 0.6rem;\n  font-weight: bold;\n  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n  color: #5cb1d6;\n  white-space: nowrap;\n}\n\n/* Use pseudo elements to avoid firing mutation observers by just moving the cursor */\n.pos-container > span::after {\n  content: attr(data-content);\n}\n\n.sa-mouse-pos-small .pos-container-container {\n  display: none !important;\n}\n',""])},1992:function(e,t,n){(e.exports=n(9)(!1)).push([e.i,'.sa-onion-controls-container {\n  display: flex;\n  flex-direction: row;\n  height: calc(1.95rem + 2px);\n}\n\n.sa-onion-button {\n  position: relative;\n}\n.sa-onion-button:focus-within {\n  background-color: hsla(0, 100%, 65%, 0.2);\n}\n.sa-onion-button[data-enabled="true"] {\n  background-color: #ff4c4c;\n}\n\n.sa-onion-settings {\n  position: absolute;\n  bottom: 0;\n  right: 16px;\n  /* based on the styles for the color dropdown */\n  padding: 4px;\n  border-radius: 4px;\n  border: 1px solid #ddd;\n  box-shadow: 0px 0px 8px 1px rgba(0, 0, 0, 0.3);\n  transition-property: bottom, opacity;\n  transition-duration: 500ms;\n  transition-timing-function: cubic-bezier(0.23, 1, 0.32, 1);\n  opacity: 0;\n  pointer-events: none;\n  background: white;\n  color: black;\n}\n.sa-onion-settings[data-visible="true"] {\n  bottom: 16px;\n  pointer-events: auto;\n  opacity: 1;\n}\n[dir="rtl"] .sa-onion-settings {\n  right: initial;\n  left: 24px;\n}\n.sa-onion-settings .sa-onion-button {\n  border-color: #d9d9d9 !important; /* override dark mode */\n}\n\n.sa-onion-settings-line {\n  display: flex;\n  justify-content: flex-end;\n  align-items: baseline;\n}\n\n.sa-onion-settings-input {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  text-align: center;\n  border: 0;\n  background: transparent;\n  -moz-appearance: textfield;\n  border: 0;\n  outline: 0;\n}\n\n.sa-onion-settings-input::-webkit-outer-spin-button,\n.sa-onion-settings-input::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n\n.sa-onion-settings-tip {\n  position: absolute;\n  bottom: 0;\n  transform: translateY(100%);\n  right: 101px;\n}\n[dir="rtl"] .sa-onion-settings-tip {\n  right: 118px;\n}\n.sa-onion-settings-polygon {\n  fill: white;\n  stroke: #ddd;\n}\n\n[theme="dark"] .sa-onion-image[data-image="settings"] {\n  filter: invert(1);\n}\n[theme="dark"] .sa-onion-image[data-image="increment"] {\n  filter: none;\n}\n[theme="dark"] .sa-onion-image[data-image="decrement"] {\n  filter: none;\n}\n',""])},1993:function(e,t,n){(e.exports=n(9)(!1)).push([e.i,".pause-btn {\n  width: 2rem;\n  height: 2rem;\n  padding: 0.375rem;\n  border-radius: 0.25rem;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  user-drag: none;\n  cursor: pointer;\n}\n\n.pause-btn:hover {\n  background-color: hsla(0, 100%, 65%, 0.15);\n}\n",""])},1994:function(e,t,n){(e.exports=n(9)(!1)).push([e.i,'[class*="stage_stage"] {\n  border-radius: 0rem !important;\n}\n\n[class*="stage_green-flag-overlay-wrapper"] {\n  border-radius: 0rem !important;\n}\n',""])},1995:function(e,t,n){(e.exports=n(9)(!1)).push([e.i,'.blocklySvg > .blocklyWorkspace > .blocklyBlockCanvas > .blocklyDraggable[data-shapes*="hat"],\n.blocklyFlyout > .blocklyWorkspace > .blocklyBlockCanvas > .blocklyDraggable {\n  opacity: calc(1 - var(--transparentOrphans-block) / 100);\n}\n.blocklyWsDragSurface > .blocklyBlockCanvas > .blocklyDraggable[data-shapes*="hat"] {\n  opacity: calc(1 - var(--transparentOrphans-block) / 100);\n}\n\n.blocklySvg > .blocklyWorkspace > .blocklyBlockCanvas > .blocklyDraggable:not([data-shapes*="hat"]) {\n  opacity: calc(1 - var(--transparentOrphans-orphan) / 100);\n}\n.blocklyWsDragSurface > .blocklyBlockCanvas > .blocklyDraggable:not([data-shapes*="hat"]) {\n  opacity: calc(1 - var(--transparentOrphans-orphan) / 100);\n}\n\n.blocklyBlockDragSurface {\n  opacity: calc(1 - var(--transparentOrphans-dragged) / 100);\n}\n',""])},1996:function(e,t,n){(e.exports=n(9)(!1)).push([e.i,'[class^="backpack_backpack-container"] {\n  display: none;\n}\n',""])},1997:function(e,t,n){var o=n(198);(e.exports=n(9)(!1)).push([e.i,"/* Change z-indexes to allow more than 3 tabs */\n.gui_tab_27Unf.gui_is-selected_sHAiu {\n  z-index: 10 !important;\n}\n.gui_tab_27Unf:nth-of-type(1) {\n  z-index: 9;\n}\n.gui_tab_27Unf:nth-of-type(2) {\n  z-index: 8;\n}\n.gui_tab_27Unf:nth-of-type(3) {\n  z-index: 7;\n}\n.gui_tab_27Unf:nth-of-type(4) {\n  z-index: 6;\n}\n\n.sa-var-manager {\n  display: block;\n  padding: 18px;\n  /* weird hack to fix scrolling??? */\n  height: 50px;\n  overflow-y: auto;\n}\n\n.sa-var-manager-searchbox {\n  background-image: url("+o(n(1923))+');\n  width: 25%;\n  margin-bottom: 4px;\n  padding: 8px;\n  padding-right: 32px; /* for the text to not overlap the image */\n  border-radius: 4px;\n  background-repeat: no-repeat;\n  background-size: 18px 18px;\n  background-position: calc(100% - 7px) center;\n  font-size: 0.75rem;\n}\n[theme="dark"] .sa-var-manager-searchbox {\n  border-color: #333;\n}\n\n[dir="rtl"] .sa-var-manager-searchbox {\n  padding-right: 8px;\n  padding-left: 32px;\n  background-position: 7px center;\n}\n\n.sa-var-manager.freeze .sa-var-manager-value *,\n.sa-var-manager.freeze .sa-var-manager-name * {\n  opacity: 0.5;\n}\n\n.sa-var-manager.freeze input:focus,\n.sa-var-manager.freeze textarea:focus {\n  opacity: 1;\n}\n\n.sa-var-manager-heading {\n  display: block;\n  font-weight: bold;\n  font-size: large;\n  margin-top: 6px;\n  margin-bottom: 6px;\n}\n\n.sa-var-manager-name {\n  word-break: break-word;\n}\n\n.sa-var-manager .sa-var-manager-value {\n  width: 75%;\n}\n\n.sa-var-manager * > input {\n  background: none;\n  border: none;\n  padding: 8px;\n  width: 100%;\n  height: 100%;\n}\n\n.sa-var-manager-value > textarea {\n  background: none;\n  border: none;\n  padding: 8px;\n  width: 100%;\n  height: 100%;\n  line-height: 2em;\n  resize: none;\n}\n\n.sa-var-manager table {\n  border-radius: 5px;\n  border-collapse: collapse;\n  width: 100%;\n}\n\n.sa-var-manager td {\n  border: 1px solid rgba(0, 0, 0, 0.15);\n  text-align: left;\n}\n[theme="dark"] .sa-var-manager td {\n  border-color: #333;\n}\n\n/* tr:nth-child(even) {\n    background-color: #dddddd;\n} */\n',""])},1998:function(e,t,n){var o={"./2d-color-picker/paint-editor":1908,"./2d-color-picker/paint-editor.js":1908,"./2d-color-picker/userscript":1924,"./2d-color-picker/userscript.js":1924,"./bitmap-copy/userscript":1925,"./bitmap-copy/userscript.js":1925,"./block-switching/blockToDom":1912,"./block-switching/blockToDom.js":1912,"./block-switching/userscript":1926,"./block-switching/userscript.js":1926,"./blocks2image/userscript":1927,"./blocks2image/userscript.js":1927,"./cat-blocks/userscript":1928,"./cat-blocks/userscript.js":1928,"./clones/userscript":1929,"./clones/userscript.js":1929,"./color-picker/code-editor":1913,"./color-picker/code-editor.js":1913,"./color-picker/paint-editor":1930,"./color-picker/paint-editor.js":1930,"./color-picker/userscript":1931,"./color-picker/userscript.js":1931,"./custom-block-shape/userscript":1932,"./custom-block-shape/userscript.js":1932,"./custom-zoom/userscript":1933,"./custom-zoom/userscript.js":1933,"./data-category-tweaks-v2/userscript":1934,"./data-category-tweaks-v2/userscript.js":1934,"./debugger/userscript":1935,"./debugger/userscript.js":1935,"./drag-drop/userscript":1937,"./drag-drop/userscript.js":1937,"./editor-colored-context-menus/userscript":1938,"./editor-colored-context-menus/userscript.js":1938,"./editor-devtools/BlockInstance":1907,"./editor-devtools/BlockInstance.js":1907,"./editor-devtools/BlockItem":1914,"./editor-devtools/BlockItem.js":1914,"./editor-devtools/DevTools":1915,"./editor-devtools/DevTools.js":1915,"./editor-devtools/DomHelpers":1918,"./editor-devtools/DomHelpers.js":1918,"./editor-devtools/XML":1919,"./editor-devtools/XML.js":1919,"./editor-devtools/blockly/BlockFlasher":1917,"./editor-devtools/blockly/BlockFlasher.js":1917,"./editor-devtools/blockly/UndoGroup":1920,"./editor-devtools/blockly/UndoGroup.js":1920,"./editor-devtools/blockly/Utils":1916,"./editor-devtools/blockly/Utils.js":1916,"./editor-devtools/show-broadcast":1939,"./editor-devtools/show-broadcast.js":1939,"./editor-devtools/userscript":1940,"./editor-devtools/userscript.js":1940,"./editor-searchable-dropdowns/userscript":1941,"./editor-searchable-dropdowns/userscript.js":1941,"./editor-sounds/userscript":1942,"./editor-sounds/userscript.js":1942,"./editor-stage-left/fix-share-the-love":1943,"./editor-stage-left/fix-share-the-love.js":1943,"./editor-theme3/theme3":1958,"./editor-theme3/theme3.js":1958,"./folders/userscript":1944,"./folders/userscript.js":1944,"./gamepad/gamepadlib":1921,"./gamepad/gamepadlib.js":1921,"./gamepad/userscript":1945,"./gamepad/userscript.js":1945,"./hide-flyout/userscript":1946,"./hide-flyout/userscript.js":1946,"./initialise-sprite-position/userscript":1947,"./initialise-sprite-position/userscript.js":1947,"./load-extensions/userscript":1948,"./load-extensions/userscript.js":1948,"./mediarecorder/userscript":1949,"./mediarecorder/userscript.js":1949,"./mouse-pos/userscript":1950,"./mouse-pos/userscript.js":1950,"./mute-project/userscript":1951,"./mute-project/userscript.js":1951,"./onion-skinning/userscript":1952,"./onion-skinning/userscript.js":1952,"./pause/module":1906,"./pause/module.js":1906,"./pause/userscript":1953,"./pause/userscript.js":1953,"./remove-sprite-confirm/userscript":1954,"./remove-sprite-confirm/userscript.js":1954,"./tw-interface-customization/remove-backpack":1955,"./tw-interface-customization/remove-backpack.js":1955,"./tw-project-info/blockcount":1956,"./tw-project-info/blockcount.js":1956,"./variable-manager/userscript":1957,"./variable-manager/userscript.js":1957};function s(e){return a(e).then(n)}function a(e){return Promise.resolve().then((function(){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}))}s.keys=function(){return Object.keys(o)},s.resolve=a,s.id=1998,e.exports=s},1999:function(e,t,n){e.exports=n.p+"static/assets/1d88d0fb1688305cd93cb879e0eb83da.png"},2e3:function(e,t,n){e.exports=n.p+"static/assets/455223e1a9618fe4f791df0e4551169d.svg"},2001:function(e,t,n){e.exports=n.p+"static/assets/d0441b753c807751826d68d84895782b.svg"},2002:function(e,t,n){e.exports=n.p+"static/assets/8d6ca9b4f4cc4dc9092037a605c33778.svg"},2003:function(e,t,n){e.exports=n.p+"static/assets/42331b999633094b4072c9c67e5d14e4.svg"},2004:function(e,t,n){e.exports=n.p+"static/assets/6c2d79195b3f2cc87e6155b166674a25.svg"},2005:function(e,t,n){e.exports=n.p+"static/assets/76b6cb627b95d79705c0b41664064f0e.svg"},2006:function(e,t,n){e.exports=n.p+"static/assets/22e4dbb6a50a0e9f7409245d5983a5c9.svg"},2007:function(e,t,n){e.exports=n.p+"static/assets/0e009d6e684951615b31a267baa37636.svg"},2008:function(e,t,n){e.exports=n.p+"static/assets/cb666b99d3528f91b52f985dfb102afa.svg"},2009:function(e,t,n){e.exports=n.p+"static/assets/b1943d453bad1292a0fdc148c85094bf.svg"},2010:function(e,t,n){e.exports=n.p+"static/assets/bb253918c345ecd72e87fdde9b57c41a.png"},2011:function(e,t,n){e.exports=n.p+"static/assets/7ccb0253b8f853a83465bfc2a1c68294.svg"},2012:function(e,t,n){e.exports=n.p+"static/assets/8cd418f8f584076a4ee8497b0534f45c.png"},2013:function(e,t,n){e.exports=n.p+"static/assets/cf2bdd182f62aaf82abdc3df183d5229.svg"},2014:function(e,t,n){e.exports=n.p+"static/assets/0bf9d7356bf6bc4fb28a7e4e8338757a.svg"},2015:function(e,t,n){e.exports=n.p+"static/assets/b45bc220e004b6343d1a2e1abd9e313a.svg"},2016:function(e,t,n){e.exports=n.p+"static/assets/ae4b22decf2fde68ad23fd36c48c455e.svg"},2017:function(e,t,n){e.exports=n.p+"static/assets/d1b20b63da0e8727a5af2aa5768c0b1a.svg"},2018:function(e,t,n){e.exports=n.p+"static/assets/05259a52e79f7f0a1bad7bef71d3bbbb.svg"},2019:function(e,t,n){e.exports=n.p+"static/assets/845fea9bdf5fa6c5de3934d64db8adba.svg"},2020:function(e,t,n){e.exports=n.p+"static/assets/8b63eff046ba87acfd02c86e631a2d6d.svg"},2021:function(e,t,n){e.exports=n.p+"static/assets/e079d14437a5d486830af3dc75b9e806.svg"},2022:function(e,t,n){e.exports=n.p+"static/assets/7980c63844b66a9a01a32a70b3e7ca8a.svg"},2023:function(e,t,n){e.exports=n.p+"static/assets/0c99c0eae1be54ccd90e2a77165b1d81.svg"},2024:function(e,t,n){"use strict";n.r(t);n(1959)}}]);